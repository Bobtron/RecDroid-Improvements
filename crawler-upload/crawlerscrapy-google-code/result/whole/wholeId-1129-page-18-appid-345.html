https://code.google.com/archive/p/geform/issues/68<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/geform/">Project</a>
    </li>
    <li>
      <a href="/archive/p/geform/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/geform/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/geform/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/geform/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=geform">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/geform/logo.png">
            <h1 class="ng-binding">geform - issue #68</h1>
            <p class="ng-binding">Erro inesperado e aleatorio ao tentar fazer upload de um formulario</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 13, 2014 by
                  <i class="ng-binding">Quick Ox</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Na tentativa de criar um formulário, um erro no envio ao servidor é acusado. Entretanto, nem sempre acontece, mesmo realizando os mesmos procedimentos e criando o mesmo formúlario (não é deterministico). Os dados enviados parecem nem mesmo chegar ao servidor.
Stacktrace:
02-13 23:36:19.022: W/System.err(821): java.net.SocketException: sendto failed: EPIPE (Broken pipe)
02-13 23:36:19.042: W/System.err(821):  at libcore.io.IoBridge.maybeThrowAfterSendto(IoBridge.java:506)
02-13 23:36:19.042: W/System.err(821):  at libcore.io.IoBridge.sendto(IoBridge.java:475)
02-13 23:36:19.122: W/System.err(821):  at java.net.PlainSocketImpl.write(PlainSocketImpl.java:507)
02-13 23:36:19.182: W/System.err(821):  at java.net.PlainSocketImpl.access$100(PlainSocketImpl.java:46)
02-13 23:36:19.202: W/System.err(821):  at java.net.PlainSocketImpl$PlainSocketOutputStream.write(PlainSocketImpl.java:269)
02-13 23:36:19.202: W/System.err(821):  at java.io.OutputStream.write(OutputStream.java:82)
02-13 23:36:19.202: W/System.err(821):  at libcore.net.http.ChunkedOutputStream.close(ChunkedOutputStream.java:119)
02-13 23:36:19.202: W/System.err(821):  at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:812)
02-13 23:36:19.202: W/System.err(821):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:283)
02-13 23:36:19.202: W/System.err(821):  at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:495)
02-13 23:36:19.202: W/System.err(821):  at br.ufrj.del.geform.net.UploadTask.uploadXml(UploadTask.java:102)
02-13 23:36:19.212: W/System.err(821):  at br.ufrj.del.geform.net.UploadTask.upload(UploadTask.java:71)
02-13 23:36:19.212: W/System.err(821):  at br.ufrj.del.geform.net.UploadTask.doInBackground(UploadTask.java:44)
02-13 23:36:19.273: W/System.err(821):  at br.ufrj.del.geform.net.UploadTask.doInBackground(UploadTask.java:1)
02-13 23:36:19.332: W/System.err(821):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-13 23:36:19.332: W/System.err(821):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-13 23:36:19.482: W/System.err(821):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
02-13 23:36:19.482: W/System.err(821):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-13 23:36:19.482: W/System.err(821):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-13 23:36:19.564: W/System.err(821):  at java.lang.Thread.run(Thread.java:856)
02-13 23:36:19.662: W/System.err(821): Caused by: libcore.io.ErrnoException: sendto failed: EPIPE (Broken pipe)
02-13 23:36:19.722: W/System.err(821):  at libcore.io.Posix.sendtoBytes(Native Method)
02-13 23:36:19.732: W/System.err(821):  at libcore.io.Posix.sendto(Posix.java:151)
02-13 23:36:19.732: W/System.err(821):  at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:177)
02-13 23:36:19.732: W/System.err(821):  at libcore.io.IoBridge.sendto(IoBridge.java:473)
02-13 23:36:19.732: W/System.err(821):  ... 18 more</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 13, 2014 by
                  <i class="ng-binding">Quick Ox</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Dos testes realizados muitas vezes o erro acontecia quando o caractere '-' estava presente. Suspeitou-se de problema com encode, mas foi verificado que nao se trata disso. Outros caracteres mesmo sem codificacao sao enviados sem problemas, e mesmo o caractere '-' quando codificado era mantido como '-'. Diferentes formularios foram criados, incluindo ou nao o caractere que parecia gerar o problema '-', para testar e algumas vezes o erro ocorria em outras não.
O problema foi visto em diferentes versoes do android: 4.3 e 4.2.2 (emulador), 4.1.2 (Galaxy S2). Porem, na versao 2.3.3 (emulador), os testes realizados nao geraram erros o que pode indicar algum problema com as versoes mais novas.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 13, 2014 by
                  <i class="ng-binding">Quick Ox</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Mesmo com o envio de respostas um erro parecido foi gerado, sempre relacionado com a conexao com o servidor (usada a classe HttpURLConnection). Assim como o visto para o envio de um formulario, no envio das respostas poderia dar problema mas logo em seguida quando tentado novamente o erro nao ocorria mais e era corretamente enviado para o servidor.
Stacktrace:
02-13 23:33:58.153: W/System.err(821): java.io.EOFException
02-13 23:33:58.162: W/System.err(821):  at libcore.io.Streams.readAsciiLine(Streams.java:203)
02-13 23:33:58.162: W/System.err(821):  at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:573)
02-13 23:33:58.172: W/System.err(821):  at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:821)
02-13 23:33:58.182: W/System.err(821):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:283)
02-13 23:33:58.192: W/System.err(821):  at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:495)
02-13 23:33:58.212: W/System.err(821):  at br.ufrj.del.geform.net.UploadTask.uploadXml(UploadTask.java:102)
02-13 23:33:58.212: W/System.err(821):  at br.ufrj.del.geform.net.UploadTask.upload(UploadTask.java:71)
02-13 23:33:58.224: W/System.err(821):  at br.ufrj.del.geform.net.UploadTask.doInBackground(UploadTask.java:44)
02-13 23:33:58.224: W/System.err(821):  at br.ufrj.del.geform.net.UploadTask.doInBackground(UploadTask.java:1)
02-13 23:33:58.272: W/System.err(821):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-13 23:33:58.282: W/System.err(821):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-13 23:33:58.302: W/System.err(821):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
02-13 23:33:58.312: W/System.err(821):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-13 23:33:58.354: W/System.err(821):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-13 23:33:58.362: W/System.err(821):  at java.lang.Thread.run(Thread.java:856)</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 15, 2014 by
                  <i class="ng-binding">Quick Ox</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>This issue was updated by revision 80ab21fc6e9e.</p>

<p>O problema parece acontecer com a opcao de utilizar o modo de streaming chuncked. Nao sei o porque, mas ao nao usar essa opcao o problema nao aconteceu mais. Foram testadas as funcionalidade de criacao de formulario e envio de coletas nas versoes 2.3.3, 4.2.1 e 4.3 do android (todas emuladas). Bastava ativar essa opcao que o problema voltava a ocorrer. Pelo browser, pude conferir que as chamadas feitas contem o header Transfer-Encoding: chuncked, mas nenhum problema relacionado ocorreu ate agora no app (so acontecia no android). A solucao adotada foi realizar conexao com o servidor não utilizando o chunckedStreamingMode.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Fixed</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-High</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Target-Android</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>