https://code.google.com/archive/p/csipsimple/issues/1980<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #1980</h1>
            <p class="ng-binding">Enable zrtp support for AES-256 bit encryption between two csipsimple clients</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Sep 19, 2012 by
                  <i class="ng-binding">Quick Kangaroo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p><b>What steps will reproduce the problem?</b>
1. start a call between two devices
2. zrtp sas is displayed
<b>3.</b></p>

<p><b>What is the expected output? What do you see instead?</b>
Expected output is AES-256 bit encryption
Actual output is twofish-256 bit encryption</p>

<p><b>What version of the product are you using? On what operating system?</b>
0.04-03 r1911
android version 4.0.3</p>

<p><b>Please provide any additional information below.</b></p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Sep 19, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Apparently in latest ZrtpCpp twofish-256 is preferred over AES-256 (that is preferred over twofish-128 and aes-128)
 (cf <a href="https://github.com/wernerd/ZRTPCPP/blob/master/zrtp/ZrtpConfigure.cpp#L205">https://github.com/wernerd/ZRTPCPP/blob/master/zrtp/ZrtpConfigure.cpp#L205</a> )
AES-128 seems the only one mandatory to support but if there is better available on other side, better will be selected.</p>

<p>I guess Werner had a good reason for choosing it as the preferred one. 
On my side not an expert on symetric cipher to tell which is the best ;)
Is there a reason why you prefer AES over Twofish? 
With a good reason I could ask for more details on this choice on zrtpcpp library side.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Sep 19, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>From wikipedia page of twofish :</p>

<p>--</p>

<h2>On most software platforms Twofish was slightly slower than Rijndael (the chosen algorithm for Advanced Encryption Standard) for 128-bit keys, but somewhat faster for 256-bit keys.[3]</h2>

<p>so apparently for 256 it's better choice than AES in terms of speed. </p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Sep 19, 2012 by
                  <i class="ng-binding">Quick Kangaroo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I'm looking to do a fips 140-2 compliant voip client and fips 140-2 mandates aes256.</p>

<p>Guess there's no way to change that to use aes?  I remember reading about the zrtpcpp library and noted that it supports all 4: aes128,256 and twofish128,256.  Just a thought: maybe it's a matter of specifying the protocol rather than accepting the default??  </p>

<p>from <a href="https://github.com/wernerd/ZRTPCPP">https://github.com/wernerd/ZRTPCPP</a>:
The GNU ZRTP implementation is compliant to RFC 6189. Currently GNU ZRTP C++ supports the following features:</p>

<p>multi-stream mode
Finite field Diffie-Helman with 2048 and 3072 bit primes
Elliptic curve Diffie-Helman with 256 and 384 bit curves
AES-128 and AES-256 symmetric cipher
Twofish-128 and Twofish-256 bit symmetric ciphers</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #4</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Sep 19, 2012 by
                  <i class="ng-binding">Quick Kangaroo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>btw, this is a great product you have your hands on!!!  good job!! </p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #5</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Sep 19, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>So no problem... 
CSipSimple is actually compliant as it does support aes256 ;)</p>

<p>It's not the selected method if you call between two csipsimple as the best <em>chosen</em> is twofish256 (as preferred over aes256).
<em>But</em> if you call another sip client that only support what is mandatory for you (aes256)... it will select aes256 ;)
So no problem, it's compliant with any voip client that is compliant with anything considering aes256 as mandatory.</p>

<p>It just select just better in case there is something better available on remote side. But mandatory encryption cipher for your needs (aes256) <em>is supported</em>.</p>

<p>It's just like codec negotiation. If you have a remote side that supports g711 only it will select g711. If remote side support a better codec it will select the better codec (depending of codec priority list).</p>

<p>If you have a closer look to the piece of code I sent the link on (line 205) you'll see that it's a voluntary preferred order of zrtpccp to have the following priority list :
twofish256, aes256, twofish128, aes128
It's a priority list. So if remote only support the mandatory aes256 will just be fine ! If the remote supports twofish256 as results in better cpu performance (if I correctly understood) and as good security, it will choose twofish256.</p>

<p>Some question about fips validation. Can you point me the document where fips validation required the aes256. It's for my culture. I'm a little bit confused with that. Sounds to me some validation step passed over software and that is done by a federal agency and that needs to be done on each software. It seems to me independent of choosen crypto module.</p>

<p>BTW, some point you might be interested in : csipsimple will not use (unless you rebuild it) an openssl version that has been stamped with "fips" validation (cf : <a href="http://www.openssl.org/docs/fips/fipsvalidation.html">http://www.openssl.org/docs/fips/fipsvalidation.html</a>). It will use the one of the device for performance reason (and also because if there is security fixes pushed to the device, will benefit it). 
So it will use the crypto module of the device (whatever has been fips validated or not). It's possible however to build a version of the app with openssl fully included (and so get the openssl version you want). Also, AFAIK, zrtpcpp has not been validated.</p>

<p>About zrtp. The mandatory cipher is aes128 (not 256). See section 5.1.3 of the RFC : 
<a href="http://tools.ietf.org/html/rfc6189#section-5.1.3">http://tools.ietf.org/html/rfc6189#section-5.1.3</a>
You may also be interested in reading the section 5.1.5 on how the negotiation is made
<a href="http://tools.ietf.org/html/rfc6189#section-5.1.5">http://tools.ietf.org/html/rfc6189#section-5.1.5</a></p>

<p>So to sum up (correct me if I'm wrong) :
 - The app is compliant with anything that mandates aes256.
 - If the remote side supports twofish256 it will select it as <em>preferred</em> one
 - The app also supports (derivated from zrtpcpp) all following ciphering methods : twofish256, aes256, twofish128, aes128. So it's compliant with ZRTP RFC 6189 and with anything that has a mandatory list included is this list.</p>

<p>It would be possible from csipsimple to change config of zrtpcpp and select different <em>priority order</em>, but I think that if twofish256 is the preferred one in zrtpcpp it's for good reason (I completely trust the good job made by Werner and from what I could read digging a little bit in the question, is that twofish for 256 is faster than aes). If you have some inputs that could make this priority order different let me know. If it's arguments like security level or cpu performance, I can ask Werner to review and give his opinion on that, and will benefit all apps using zrtpcpp ;).</p>

<p>If you want to do a build of csipsimple with aes256 as highest priority (for other reasons than security and performance), should not be to hard. I can guide you. One important point if you release something based on that is that what you release <em>must</em> be released under GPL license terms (so release source code, inform users they have gpl rights, allow them to redistribute the app etc).</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #6</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Sep 20, 2012 by
                  <i class="ng-binding">Quick Kangaroo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Thanks for all of your input, you're truely a master of your craft.</p>

<p>When it comes to the FIPS, I was mistaken.  The main customer we service requires aes256.  </p>

<p>Regarding the distribution of the code thanks for the reminder we have accepted that as a possibility if we go down this route.  We are also experimenting with another solution that is already FIPS compliant.  </p>

<p>For my personal use nothing beats csipsimple.  Thanks for making it for the world to use.  Thanks also for helping me to understand the protocols a little better :)</p>

<p>ttyl</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Need-Details</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>