https://code.google.com/archive/p/csipsimple/issues/1407<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #1407</h1>
            <p class="ng-binding">results of testings today</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Nov 30, 2011 by
                  <i class="ng-binding">Happy Kangaroo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I ve tested today with a friend, and we went through several testcases. I would prefer to discuss the results somewhere on irc, cause I could describe suspicious parts more detailed.
So for now I give you a broad brush description riddled with questions :).</p>

<p>First to the systems: We used
M1) Google Nexus S on Android 2.3.6
M2) Google Nexus S on Android 2.3.6
and one
M3) SGS II on Android 2.3.3.</p>

<p>All using: CSipSimple 0.04-00 r1154.
If the situation gets clearer to me I will include the HTC Wildfires again. This time we left them out.</p>

<p>We ve been testing with these two Voip Providers:
P1) Iptel.org (ZRTP, SRTP - 128 AES)
P2) tanstagi (ZRTP, TLS - 256 Twofish)</p>

<p>First round.. on the same Wifi Network:
P1) ZRTP is always invalid. SAS is not available. The rest is fine.
P2) M1 is able to call M2. The call back (M2-&gt;M1) is not possible. The call shuts down after a sec or two.</p>

<p>Second round.. outside, on UMTS:
The first 10 minutes nothing working at all. Why?
Then:
P1) still no connection possible at all. could it be blocked by the mobile service provider? if yes, how can i find out? Other reasons?
We had different versions of not working :).. one phone ringing while the other was in the call, calling into silence, just not responding, and quite a long delay after pressing "end call" to when the mobile really ends it and closes the call window.
P2) Same like above: M1 is able to call M2. The call back (M2-&gt;M1) is not possible.</p>

<p>I didnt test M3 with P2, the login doesnt work atm, will add the results as fup as soon as they are available.</p>

<p>I hope i am able to contribute to your work by testing, I really appreciate it. If you need logs, please tell me.</p>

<p>kr</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Nov 30, 2011 by
                  <i class="ng-binding">Happy Kangaroo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>additional comment:
i ve activated ice on the mobiles.</p>

<p>additional questions..
how are the secure settings interconnected?</p>

<p>for example: if i activate tls, and i set srtp mode to mandatory aswell?
or is this relying on which protocol i set in the account settings? I guess something would have to overrule the other..
what about the proxy: srtp mode. if it is set to mandatory, is it used only if the srtp is triggered in the first place?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Nov 30, 2011 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>What do you mean by ZRTP, SRTP case? Did you try to activate both SRTP and ZRTP? If so, that's not supporteed case. I should probably change the preference UI to reflect that this is an invalid configuration.
In fact, both ZRTP and SRTP are methods to encrypt media. Both methods are exclusive. Actually if both clients supports ZRTP it should include SRTP features (at least that's what I understood ;) ). So if you enable SRTP at the same time that ZRTP it will not work (I mean encryption will not work). In best case SRTP will be tried but I'm not sure.</p>

<p>About case 2, I'd be interested in logs. That's weird that behavior is not symetric. All the more so as your two devices are on the same network and should have the same configuration. So if you can collect logs from both device in the working and the not working case would be great. If you do so, collect logs at the end of each call (since android log system has limited buffer, if you run all calls in the same log I may not see the begin of the call ;) ).</p>

<p>About P1 on UTMS, that's possible that your mobile service provider block SIP. Here in france they detect SIP packets and just block anything about SIP. Obviously they are not able to detect SIPS (SIP+TLS) so it works fine with encrypted control plan.
This blocking is also sometimes different depending on the antenna you are connected to. When it was not yet blocked everywhere here, I was able to connect in sip at some location, and if I moved of 100km I was not able.
However regarding what you describe it sounds more like some not totally reliable connection or just about the fact sip packets were too big. Indeed SRTP add a lot of information in INVITE and it could lead to bigger UDP packets. If you have in addition a lot of codecs activated, you could reach the limit of what's accepted by the network you are connected too and obsever very weird and unresponsive behaviours.</p>

<p>About your last additional comments, for now settings are not interconnected. (And as I said, it should maybe be connected for SRTP/ZRTP).
About TLS and SRTP there's no link at all. TLS is about encryption of control plan (sip invite, bye, ack messages) and SRTP/ZRTP are bout encryption of the media plan (the actual voice).</p>

<p>The SRTP mode mandatory means that if the negociation lead to something that will not be encrypted the call will not be established. 
Such an option could also maybe be possible with ZRTP. For now that's not supported. But since the way to establish ZRTP is slightly different I'm not sure that's a really necessary feature. ZRTP could be supported by other side, but not announced during SIP negociation, so the "mandatory" feature is not necessarily a good idea for ZRTP.</p>

<p>About a more interactive way for your issues and report, you could join the developer group (<a href="http://groups.google.com/group/csipsimple-dev/">http://groups.google.com/group/csipsimple-dev/</a>), you'll be welcome :D</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Need-Details</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>