https://code.google.com/archive/p/csipsimple/issues/2190<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #2190</h1>
            <p class="ng-binding">turn auth issue</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 22, 2013 by
                  <i class="ng-binding">Grumpy Ox</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>csipsimple is not sending to the turn server the username password, and this way can't authenticated</p>

<p><b>What steps will reproduce the problem?</b>
1. use turn server (<a href="http://turnserver.sourceforge.net/">http://turnserver.sourceforge.net/</a>) + try to allocate ports using csipsimple and authenticate with username + password</p>

<p><b>What is the expected output? What do you see instead?</b>
Expected <a href="http://tools.ietf.org/html/rfc5766#section-16">http://tools.ietf.org/html/rfc5766#section-16</a>
I expect turn auth but csipsimple is not sending in the reply messages after 401 the username, so the server can't authenticate (<a href="http://turnserver.sourceforge.net/">http://turnserver.sourceforge.net/</a>)</p>

<p>--------------------------------8&lt;---------------------------------
   The client, upon receipt of the 401 error, re-attempts the Allocate
   request, this time including the authentication attributes.  The
   client selects a new transaction id, and then populates the new
   Allocate request with the same attributes as before.  The client
   includes a USERNAME attribute and uses the realm value received from
   the server to help it determine which value to use; here the client
   is configured to use the username "George" for the realm
   "example.com".  The client also includes the REALM and NONCE
   attributes, which are just copied from the 401 error response.
   Finally, the client includes a MESSAGE-INTEGRITY attribute as the
   last attribute in the message, whose value is a Hashed Message</p>

<p>Mahy, et al.                 Standards Track                   [Page 50]</p>

<p>RFC 5766                          TURN                        April 2010</p>

<p>Authentication Code - Secure Hash Algorithm 1 (HMAC-SHA1) hash over
   the contents of the message (shown as just "..." above); this HMAC-
   SHA1 computation includes a password value.
--------------------------------8&lt;---------------------------------</p>

<p><b>What version of the product are you using? On what operating system?</b>
0.04-05-r2093 (pjnath-2.0.1svn)</p>

<p><b>Please provide any additional information below.</b></p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 22, 2013 by
                  <i class="ng-binding">Grumpy Ox</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>root@hangya:/usr/local/src/turnserver# tshark -i any port 3478 -V
Running as user "root" and group "root". This could be dangerous.
Capturing on Pseudo-device that captures on all interfaces
Frame 1 (92 bytes on wire, 92 bytes captured)
    Arrival Time: Jan 22, 2013 15:48:58.092293000
    [Time delta from previous captured frame: 0.000000000 seconds]
    [Time delta from previous displayed frame: 0.000000000 seconds]
    [Time since reference or first frame: 0.000000000 seconds]
    Frame Number: 1
    Frame Length: 92 bytes
    Capture Length: 92 bytes
    [Frame is marked: False]
    [Protocols in frame: sll:ip:udp:stun2]
Linux cooked capture
    Packet type: Unicast to us (0)
    Link-layer address type: 1
    Link-layer address length: 6
    Source: Cisco_5f:e4:00 (00:0e:39:5f:e4:00)
    Protocol: IP (0x0800)
Internet Protocol, Src: 178.48.31.65 (178.48.31.65), Dst: 195.111.192.23 (195.111.192.23)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00)
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..0. = ECN-Capable Transport (ECT): 0
        .... ...0 = ECN-CE: 0
    Total Length: 76
    Identification: 0x02eb (747)
    Flags: 0x02 (Don't Fragment)
        0.. = Reserved bit: Not Set
        .1. = Don't fragment: Set
        ..0 = More fragments: Not Set
    Fragment offset: 0
    Time to live: 57
    Protocol: UDP (0x11)
    Header checksum: 0xe9bd [correct]
        [Good: True]
        [Bad : False]
    Source: 178.48.31.65 (178.48.31.65)
    Destination: 195.111.192.23 (195.111.192.23)
User Datagram Protocol, Src Port: 59439 (59439), Dst Port: stun (3478)
    Source port: 59439 (59439)
    Destination port: stun (3478)
    Length: 56
    Checksum: 0x3e6c [validation disabled]
        [Good Checksum: False]
        [Bad Checksum: False]
Session Traversal Utilities for NAT
    Message Type: 0x0003 (Allocate Request)
        .... ...0 ...0 .... = Message Class: 0x0000
        [Request (0)]
        ..00 000. 000. 0011 = Message Method: 0x0003
        [Allocate (0x003)]
        ..0. .... .... .... = Message Method Assignment: 0x0000
        [IETF Review (0)]
    Message Length: 28
    Message Cookie: 2112A442
    Message Transaction ID: EA2F0000833B16595A878305
    Attributes
        REQUESTED-TRANSPORT: UDP
            Attribute Type: REQUESTED-TRANSPORT (0x0019)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 4
            Transport: UDP (0x11)
            Reserved: 3
        SOFTWARE
            Attribute Type: SOFTWARE (0x8022)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 16
            Software: pjnath-2.0.1svn</p>

<p>Frame 2 (184 bytes on wire, 184 bytes captured)
    Arrival Time: Jan 22, 2013 15:48:58.092832000
    [Time delta from previous captured frame: 0.000539000 seconds]
    [Time delta from previous displayed frame: 0.000539000 seconds]
    [Time since reference or first frame: 0.000539000 seconds]
    Frame Number: 2
    Frame Length: 184 bytes
    Capture Length: 184 bytes
    [Frame is marked: False]
    [Protocols in frame: sll:ip:udp:stun2]
Linux cooked capture
    Packet type: Sent by us (4)
    Link-layer address type: 1
    Link-layer address length: 6
    Source: Xensourc_01:00:19 (00:16:3e:01:00:19)
    Protocol: IP (0x0800)
Internet Protocol, Src: 195.111.192.23 (195.111.192.23), Dst: 178.48.31.65 (178.48.31.65)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00)
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..0. = ECN-Capable Transport (ECT): 0
        .... ...0 = ECN-CE: 0
    Total Length: 168
    Identification: 0x0000 (0)
    Flags: 0x02 (Don't Fragment)
        0.. = Reserved bit: Not Set
        .1. = Don't fragment: Set
        ..0 = More fragments: Not Set
    Fragment offset: 0
    Time to live: 64
    Protocol: UDP (0x11)
    Header checksum: 0xe54c [correct]
        [Good: True]
        [Bad : False]
    Source: 195.111.192.23 (195.111.192.23)
    Destination: 178.48.31.65 (178.48.31.65)
User Datagram Protocol, Src Port: stun (3478), Dst Port: 59439 (59439)
    Source port: stun (3478)
    Destination port: 59439 (59439)
    Length: 148
    Checksum: 0x559e [validation disabled]
        [Good Checksum: False]
        [Bad Checksum: False]
Session Traversal Utilities for NAT
    [Request In: 1]
    [Time: 0.000539000 seconds]
    Message Type: 0x0113 (Allocate Error Response)
        .... ...1 ...1 .... = Message Class: 0x0011
        [Error Response (3)]
        ..00 000. 000. 0011 = Message Method: 0x0003
        [Allocate (0x003)]
        ..0. .... .... .... = Message Method Assignment: 0x0000
        [IETF Review (0)]
    Message Length: 120
    Message Cookie: 2112A442
    Message Transaction ID: EA2F0000833B16595A878305
    Attributes
        ERROR-CODE 401 (Unauthorized): Unauthorized
            Attribute Type: ERROR-CODE (0x0009)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 20
            Reserved: 2
            .... .100 = Error Class: 4
            Error Code: 1
            Error Reason Phrase: Unauthorized
        REALM: vvc.niif.hu
            Attribute Type: REALM (0x0014)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 11
            Realm: vvc.niif.hu
            Padding: 1
        NONCE: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c
            Attribute Type: NONCE (0x0015)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 48
            Nonce: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c
        SOFTWARE
            Attribute Type: SOFTWARE (0x8022)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 14
            Software: TurnServer 0.8
            Padding: 2
        FINGERPRINT
            Attribute Type: FINGERPRINT (0x8028)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 4
            CRC-32: 0x0ba2c62c</p>

<p>Frame 3 (92 bytes on wire, 92 bytes captured)
    Arrival Time: Jan 22, 2013 15:48:58.098912000
    [Time delta from previous captured frame: 0.006080000 seconds]
    [Time delta from previous displayed frame: 0.006080000 seconds]
    [Time since reference or first frame: 0.006619000 seconds]
    Frame Number: 3
    Frame Length: 92 bytes
    Capture Length: 92 bytes
    [Frame is marked: False]
    [Protocols in frame: sll:ip:udp:stun2]
Linux cooked capture
    Packet type: Unicast to us (0)
    Link-layer address type: 1
    Link-layer address length: 6
    Source: Cisco_5f:e4:00 (00:0e:39:5f:e4:00)
    Protocol: IP (0x0800)
Internet Protocol, Src: 178.48.31.65 (178.48.31.65), Dst: 195.111.192.23 (195.111.192.23)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00)
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..0. = ECN-Capable Transport (ECT): 0
        .... ...0 = ECN-CE: 0
    Total Length: 76
    Identification: 0x02ec (748)
    Flags: 0x02 (Don't Fragment)
        0.. = Reserved bit: Not Set
        .1. = Don't fragment: Set
        ..0 = More fragments: Not Set
    Fragment offset: 0
    Time to live: 57
    Protocol: UDP (0x11)
    Header checksum: 0xe9bc [correct]
        [Good: True]
        [Bad : False]
    Source: 178.48.31.65 (178.48.31.65)
    Destination: 195.111.192.23 (195.111.192.23)
User Datagram Protocol, Src Port: 53495 (53495), Dst Port: stun (3478)
    Source port: 53495 (53495)
    Destination port: stun (3478)
    Length: 56
    Checksum: 0x9bef [validation disabled]
        [Good Checksum: False]
        [Bad Checksum: False]
Session Traversal Utilities for NAT
    Message Type: 0x0003 (Allocate Request)
        .... ...0 ...0 .... = Message Class: 0x0000
        [Request (0)]
        ..00 000. 000. 0011 = Message Method: 0x0003
        [Allocate (0x003)]
        ..0. .... .... .... = Message Method Assignment: 0x0000
        [IETF Review (0)]
    Message Length: 28
    Message Cookie: 2112A442
    Message Transaction ID: EA2F00006A3CE80C5B878305
    Attributes
        REQUESTED-TRANSPORT: UDP
            Attribute Type: REQUESTED-TRANSPORT (0x0019)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 4
            Transport: UDP (0x11)
            Reserved: 3
        SOFTWARE
            Attribute Type: SOFTWARE (0x8022)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 16
            Software: pjnath-2.0.1svn</p>

<p>Frame 4 (184 bytes on wire, 184 bytes captured)
    Arrival Time: Jan 22, 2013 15:48:58.099500000
    [Time delta from previous captured frame: 0.000588000 seconds]
    [Time delta from previous displayed frame: 0.000588000 seconds]
    [Time since reference or first frame: 0.007207000 seconds]
    Frame Number: 4
    Frame Length: 184 bytes
    Capture Length: 184 bytes
    [Frame is marked: False]
    [Protocols in frame: sll:ip:udp:stun2]
Linux cooked capture
    Packet type: Sent by us (4)
    Link-layer address type: 1
    Link-layer address length: 6
    Source: Xensourc_01:00:19 (00:16:3e:01:00:19)
    Protocol: IP (0x0800)
Internet Protocol, Src: 195.111.192.23 (195.111.192.23), Dst: 178.48.31.65 (178.48.31.65)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00)
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..0. = ECN-Capable Transport (ECT): 0
        .... ...0 = ECN-CE: 0
    Total Length: 168
    Identification: 0x0000 (0)
    Flags: 0x02 (Don't Fragment)
        0.. = Reserved bit: Not Set
        .1. = Don't fragment: Set
        ..0 = More fragments: Not Set
    Fragment offset: 0
    Time to live: 64
    Protocol: UDP (0x11)
    Header checksum: 0xe54c [correct]
        [Good: True]
        [Bad : False]
    Source: 195.111.192.23 (195.111.192.23)
    Destination: 178.48.31.65 (178.48.31.65)
User Datagram Protocol, Src Port: stun (3478), Dst Port: 53495 (53495)
    Source port: stun (3478)
    Destination port: 53495 (53495)
    Length: 148
    Checksum: 0x559e [validation disabled]
        [Good Checksum: False]
        [Bad Checksum: False]
Session Traversal Utilities for NAT
    [Request In: 3]
    [Time: 0.000588000 seconds]
    Message Type: 0x0113 (Allocate Error Response)
        .... ...1 ...1 .... = Message Class: 0x0011
        [Error Response (3)]
        ..00 000. 000. 0011 = Message Method: 0x0003
        [Allocate (0x003)]
        ..0. .... .... .... = Message Method Assignment: 0x0000
        [IETF Review (0)]
    Message Length: 120
    Message Cookie: 2112A442
    Message Transaction ID: EA2F00006A3CE80C5B878305
    Attributes
        ERROR-CODE 401 (Unauthorized): Unauthorized
            Attribute Type: ERROR-CODE (0x0009)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 20
            Reserved: 2
            .... .100 = Error Class: 4
            Error Code: 1
            Error Reason Phrase: Unauthorized
        REALM: vvc.niif.hu
            Attribute Type: REALM (0x0014)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 11
            Realm: vvc.niif.hu
            Padding: 1
        NONCE: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c
            Attribute Type: NONCE (0x0015)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 48
            Nonce: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c
        SOFTWARE
            Attribute Type: SOFTWARE (0x8022)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 14
            Software: TurnServer 0.8
            Padding: 2
        FINGERPRINT
            Attribute Type: FINGERPRINT (0x8028)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 4
            CRC-32: 0x37f56aa3</p>

<p>Frame 5 (160 bytes on wire, 160 bytes captured)
    Arrival Time: Jan 22, 2013 15:48:58.116039000
    [Time delta from previous captured frame: 0.016539000 seconds]
    [Time delta from previous displayed frame: 0.016539000 seconds]
    [Time since reference or first frame: 0.023746000 seconds]
    Frame Number: 5
    Frame Length: 160 bytes
    Capture Length: 160 bytes
    [Frame is marked: False]
    [Protocols in frame: sll:ip:udp:stun2]
Linux cooked capture
    Packet type: Unicast to us (0)
    Link-layer address type: 1
    Link-layer address length: 6
    Source: Cisco_5f:e4:00 (00:0e:39:5f:e4:00)
    Protocol: IP (0x0800)
Internet Protocol, Src: 178.48.31.65 (178.48.31.65), Dst: 195.111.192.23 (195.111.192.23)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00)
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..0. = ECN-Capable Transport (ECT): 0
        .... ...0 = ECN-CE: 0
    Total Length: 144
    Identification: 0x02ec (748)
    Flags: 0x02 (Don't Fragment)
        0.. = Reserved bit: Not Set
        .1. = Don't fragment: Set
        ..0 = More fragments: Not Set
    Fragment offset: 0
    Time to live: 57
    Protocol: UDP (0x11)
    Header checksum: 0xe978 [correct]
        [Good: True]
        [Bad : False]
    Source: 178.48.31.65 (178.48.31.65)
    Destination: 195.111.192.23 (195.111.192.23)
User Datagram Protocol, Src Port: 59439 (59439), Dst Port: stun (3478)
    Source port: 59439 (59439)
    Destination port: stun (3478)
    Length: 124
    Checksum: 0xc4fb [validation disabled]
        [Good Checksum: False]
        [Bad Checksum: False]
Session Traversal Utilities for NAT
    Message Type: 0x0003 (Allocate Request)
        .... ...0 ...0 .... = Message Class: 0x0000
        [Request (0)]
        ..00 000. 000. 0011 = Message Method: 0x0003
        [Allocate (0x003)]
        ..0. .... .... .... = Message Method Assignment: 0x0000
        [IETF Review (0)]
    Message Length: 96
    Message Cookie: 2112A442
    Message Transaction ID: EA2F00003C66EC325C878305
    Attributes
        REQUESTED-TRANSPORT: UDP
            Attribute Type: REQUESTED-TRANSPORT (0x0019)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 4
            Transport: UDP (0x11)
            Reserved: 3
        SOFTWARE
            Attribute Type: SOFTWARE (0x8022)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 16
            Software: pjnath-2.0.1svn
        REALM: vvc.niif.hu
            Attribute Type: REALM (0x0014)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 11
            Realm: vvc.niif.hu
            Padding: 1
        NONCE: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c
            Attribute Type: NONCE (0x0015)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 48
            Nonce: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c</p>

<p>Frame 6 (184 bytes on wire, 184 bytes captured)
    Arrival Time: Jan 22, 2013 15:48:58.116452000
    [Time delta from previous captured frame: 0.000413000 seconds]
    [Time delta from previous displayed frame: 0.000413000 seconds]
    [Time since reference or first frame: 0.024159000 seconds]
    Frame Number: 6
    Frame Length: 184 bytes
    Capture Length: 184 bytes
    [Frame is marked: False]
    [Protocols in frame: sll:ip:udp:stun2]
Linux cooked capture
    Packet type: Sent by us (4)
    Link-layer address type: 1
    Link-layer address length: 6
    Source: Xensourc_01:00:19 (00:16:3e:01:00:19)
    Protocol: IP (0x0800)
Internet Protocol, Src: 195.111.192.23 (195.111.192.23), Dst: 178.48.31.65 (178.48.31.65)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00)
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..0. = ECN-Capable Transport (ECT): 0
        .... ...0 = ECN-CE: 0
    Total Length: 168
    Identification: 0x0000 (0)
    Flags: 0x02 (Don't Fragment)
        0.. = Reserved bit: Not Set
        .1. = Don't fragment: Set
        ..0 = More fragments: Not Set
    Fragment offset: 0
    Time to live: 64
    Protocol: UDP (0x11)
    Header checksum: 0xe54c [correct]
        [Good: True]
        [Bad : False]
    Source: 195.111.192.23 (195.111.192.23)
    Destination: 178.48.31.65 (178.48.31.65)
User Datagram Protocol, Src Port: stun (3478), Dst Port: 59439 (59439)
    Source port: stun (3478)
    Destination port: 59439 (59439)
    Length: 148
    Checksum: 0x559e [validation disabled]
        [Good Checksum: False]
        [Bad Checksum: False]
Session Traversal Utilities for NAT
    Message Type: 0x0113 (Allocate Error Response)
        .... ...1 ...1 .... = Message Class: 0x0011
        [Error Response (3)]
        ..00 000. 000. 0011 = Message Method: 0x0003
        [Allocate (0x003)]
        ..0. .... .... .... = Message Method Assignment: 0x0000
        [IETF Review (0)]
    Message Length: 120
    Message Cookie: 2112A442
    Message Transaction ID: EA2F00003C66EC325C878305
    Attributes
        ERROR-CODE 401 (Unauthorized): Unauthorized
            Attribute Type: ERROR-CODE (0x0009)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 20
            Reserved: 2
            .... .100 = Error Class: 4
            Error Code: 1
            Error Reason Phrase: Unauthorized
        REALM: vvc.niif.hu
            Attribute Type: REALM (0x0014)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 11
            Realm: vvc.niif.hu
            Padding: 1
        NONCE: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c
            Attribute Type: NONCE (0x0015)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 48
            Nonce: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c
        SOFTWARE
            Attribute Type: SOFTWARE (0x8022)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 14
            Software: TurnServer 0.8
            Padding: 2
        FINGERPRINT
            Attribute Type: FINGERPRINT (0x8028)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 4
            CRC-32: 0xe3ff3dd5</p>

<p>Frame 7 (160 bytes on wire, 160 bytes captured)
    Arrival Time: Jan 22, 2013 15:48:58.128844000
    [Time delta from previous captured frame: 0.012392000 seconds]
    [Time delta from previous displayed frame: 0.012392000 seconds]
    [Time since reference or first frame: 0.036551000 seconds]
    Frame Number: 7
    Frame Length: 160 bytes
    Capture Length: 160 bytes
    [Frame is marked: False]
    [Protocols in frame: sll:ip:udp:stun2]
Linux cooked capture
    Packet type: Unicast to us (0)
    Link-layer address type: 1
    Link-layer address length: 6
    Source: Cisco_5f:e4:00 (00:0e:39:5f:e4:00)
    Protocol: IP (0x0800)
Internet Protocol, Src: 178.48.31.65 (178.48.31.65), Dst: 195.111.192.23 (195.111.192.23)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00)
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..0. = ECN-Capable Transport (ECT): 0
        .... ...0 = ECN-CE: 0
    Total Length: 144
    Identification: 0x02ed (749)
    Flags: 0x02 (Don't Fragment)
        0.. = Reserved bit: Not Set
        .1. = Don't fragment: Set
        ..0 = More fragments: Not Set
    Fragment offset: 0
    Time to live: 57
    Protocol: UDP (0x11)
    Header checksum: 0xe977 [correct]
        [Good: True]
        [Bad : False]
    Source: 178.48.31.65 (178.48.31.65)
    Destination: 195.111.192.23 (195.111.192.23)
User Datagram Protocol, Src Port: 53495 (53495), Dst Port: stun (3478)
    Source port: 53495 (53495)
    Destination port: stun (3478)
    Length: 124
    Checksum: 0xb273 [validation disabled]
        [Good Checksum: False]
        [Bad Checksum: False]
Session Traversal Utilities for NAT
    Message Type: 0x0003 (Allocate Request)
        .... ...0 ...0 .... = Message Class: 0x0000
        [Request (0)]
        ..00 000. 000. 0011 = Message Method: 0x0003
        [Allocate (0x003)]
        ..0. .... .... .... = Message Method Assignment: 0x0000
        [IETF Review (0)]
    Message Length: 96
    Message Cookie: 2112A442
    Message Transaction ID: EA2F000001F24F675D878305
    Attributes
        REQUESTED-TRANSPORT: UDP
            Attribute Type: REQUESTED-TRANSPORT (0x0019)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 4
            Transport: UDP (0x11)
            Reserved: 3
        SOFTWARE
            Attribute Type: SOFTWARE (0x8022)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 16
            Software: pjnath-2.0.1svn
        REALM: vvc.niif.hu
            Attribute Type: REALM (0x0014)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 11
            Realm: vvc.niif.hu
            Padding: 1
        NONCE: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c
            Attribute Type: NONCE (0x0015)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 48
            Nonce: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c</p>

<p>Frame 8 (184 bytes on wire, 184 bytes captured)
    Arrival Time: Jan 22, 2013 15:48:58.129294000
    [Time delta from previous captured frame: 0.000450000 seconds]
    [Time delta from previous displayed frame: 0.000450000 seconds]
    [Time since reference or first frame: 0.037001000 seconds]
    Frame Number: 8
    Frame Length: 184 bytes
    Capture Length: 184 bytes
    [Frame is marked: False]
    [Protocols in frame: sll:ip:udp:stun2]
Linux cooked capture
    Packet type: Sent by us (4)
    Link-layer address type: 1
    Link-layer address length: 6
    Source: Xensourc_01:00:19 (00:16:3e:01:00:19)
    Protocol: IP (0x0800)
Internet Protocol, Src: 195.111.192.23 (195.111.192.23), Dst: 178.48.31.65 (178.48.31.65)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00)
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..0. = ECN-Capable Transport (ECT): 0
        .... ...0 = ECN-CE: 0
    Total Length: 168
    Identification: 0x0000 (0)
    Flags: 0x02 (Don't Fragment)
        0.. = Reserved bit: Not Set
        .1. = Don't fragment: Set
        ..0 = More fragments: Not Set
    Fragment offset: 0
    Time to live: 64
    Protocol: UDP (0x11)
    Header checksum: 0xe54c [correct]
        [Good: True]
        [Bad : False]
    Source: 195.111.192.23 (195.111.192.23)
    Destination: 178.48.31.65 (178.48.31.65)
User Datagram Protocol, Src Port: stun (3478), Dst Port: 53495 (53495)
    Source port: stun (3478)
    Destination port: 53495 (53495)
    Length: 148
    Checksum: 0x559e [validation disabled]
        [Good Checksum: False]
        [Bad Checksum: False]
Session Traversal Utilities for NAT
    Message Type: 0x0113 (Allocate Error Response)
        .... ...1 ...1 .... = Message Class: 0x0011
        [Error Response (3)]
        ..00 000. 000. 0011 = Message Method: 0x0003
        [Allocate (0x003)]
        ..0. .... .... .... = Message Method Assignment: 0x0000
        [IETF Review (0)]
    Message Length: 120
    Message Cookie: 2112A442
    Message Transaction ID: EA2F000001F24F675D878305
    Attributes
        ERROR-CODE 401 (Unauthorized): Unauthorized
            Attribute Type: ERROR-CODE (0x0009)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 20
            Reserved: 2
            .... .100 = Error Class: 4
            Error Code: 1
            Error Reason Phrase: Unauthorized
        REALM: vvc.niif.hu
            Attribute Type: REALM (0x0014)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 11
            Realm: vvc.niif.hu
            Padding: 1
        NONCE: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c
            Attribute Type: NONCE (0x0015)
                0... .... .... .... = Attribute Type Comprehension: 0x0000
                [Required (0)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 48
            Nonce: 50feb4ea000000004076f0498657abb92c9fe8b6ca1c798c
        SOFTWARE
            Attribute Type: SOFTWARE (0x8022)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 14
            Software: TurnServer 0.8
            Padding: 2
        FINGERPRINT
            Attribute Type: FINGERPRINT (0x8028)
                1... .... .... .... = Attribute Type Comprehension: 0x0001
                [Optional (1)]
                .0.. .... .... .... = Attribute Type Assignment: 0x0000
                [IETF Review (0)]
            Attribute Length: 4
            CRC-32: 0xce3bddcf</p>

<p>8 packets captured</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 31, 2013 by
                  <i class="ng-binding">Grumpy Ox</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Realm is not set?
//empty if
pjsua_jni_addons.c</p>

<pre><code>    if(realm.slen) {
</code></pre>

<p>//=&gt;
        } else {
                turn_auth_cred-&gt;data.static_cred.realm = pj_str("*");
        }</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 31, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Hi,</p>

<p>Thanks for the point !
It could indeed be a possible root cause for the problem.
I think I decided first to always pass "" to this method (as no settings in the ui and wildcard should be fine), but the java pass "*" so maybe finally nothing is set at all.</p>

<p>Let's try a fix based on your very relevant point. </p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #4</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 31, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>This issue was closed by revision r2102.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #5</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 31, 2013 by
                  <i class="ng-binding">Grumpy Ox</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Thank you very much for the correction.
It is better now, but the auth is not yet fixed.</p>

<p>Currently it sends the realm but not the 
USERNAME and the MESSAGE-INTEGRITY</p>

<pre><code>Attributes
    REQUESTED-TRANSPORT: UDP
        Attribute Type: REQUESTED-TRANSPORT (0x0019)
            0... .... .... .... = Attribute Type Comprehension: 0x0000
            [Required (0)]
            .0.. .... .... .... = Attribute Type Assignment: 0x0000
            [IETF Review (0)]
        Attribute Length: 4
        Transport: UDP (0x11)
        Reserved: 3
    SOFTWARE
        Attribute Type: SOFTWARE (0x8022)
            1... .... .... .... = Attribute Type Comprehension: 0x0001
            [Optional (1)]
            .0.. .... .... .... = Attribute Type Assignment: 0x0000
            [IETF Review (0)]
        Attribute Length: 16
        Software: pjnath-2.0.1svn
    REALM: vvc.niif.hu
        Attribute Type: REALM (0x0014)
            0... .... .... .... = Attribute Type Comprehension: 0x0000
            [Required (0)]
            .0.. .... .... .... = Attribute Type Assignment: 0x0000
            [IETF Review (0)]
        Attribute Length: 11
        Realm: vvc.niif.hu
        Padding: 1
    NONCE: 4c044ae7715143d9
        Attribute Type: NONCE (0x0015)
            0... .... .... .... = Attribute Type Comprehension: 0x0000
            [Required (0)]
            .0.. .... .... .... = Attribute Type Assignment: 0x0000
            [IETF Review (0)]
        Attribute Length: 16
        Nonce: 4c044ae7715143d9
</code></pre></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #6</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Mar 6, 2013 by
                  <i class="ng-binding">Grumpy Ox</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Here You can find the patch, that made it works.</p>

<h1>Index: src/com/csipsimple/pjsip/PjSipAccount.java</h1>

<p>--- src/com/csipsimple/pjsip/PjSipAccount.java  (revision 2154)
+++ src/com/csipsimple/pjsip/PjSipAccount.java  (working copy)
@@ -30,6 +30,7 @@
 import com.csipsimple.utils.Log;
 import com.csipsimple.utils.PreferencesProviderWrapper;</p>

<p>+import org.pjsip.pjsua.SWIGTYPE_p_pj_stun_auth_cred;
 import org.pjsip.pjsua.csipsimple_acc_config;
 import org.pjsip.pjsua.pj_qos_params;
 import org.pjsip.pjsua.pj_qos_type;
@@ -230,11 +231,15 @@
             pjsua_turn_config turnCfg = cfg.getTurn_cfg();
             turnCfg.setEnable_turn( (profile.turn_cfg_enable == 1) ? pjsuaConstants.PJ_TRUE : pjsuaConstants.PJ_FALSE);
             turnCfg.setTurn_server( pjsua.pj_str_copy(profile.turn_cfg_server) );
+ <br>
+            SWIGTYPE_p_pj_stun_auth_cred turn_auth_cred;
+            turn_auth_cred=turnCfg.getTurn_auth_cred();
             pjsua.set_turn_credentials(
                     pjsua.pj_str_copy(profile.turn_cfg_user),
                     pjsua.pj_str_copy(profile.turn_cfg_password), 
                     pjsua.pj_str_copy("*"), 
-                    turnCfg.getTurn_auth_cred());
+                    turn_auth_cred);
+            turnCfg.setTurn_auth_cred(turn_auth_cred);
         }else {
             cfg.setTurn_cfg_use(pjsua_turn_config_use.PJSUA_TURN_CONFIG_USE_DEFAULT);
         }</p>

<h1>Index: src/com/csipsimple/pjsip/PjSipService.java</h1>

<p>--- src/com/csipsimple/pjsip/PjSipService.java  (revision 2154)
+++ src/com/csipsimple/pjsip/PjSipService.java  (working copy)
@@ -68,6 +68,7 @@
 import com.csipsimple.utils.video.VideoUtilsWrapper.VideoCaptureDeviceInfo;
 import com.csipsimple.wizards.WizardUtils;</p>

<p>+import org.pjsip.pjsua.SWIGTYPE_p_pj_stun_auth_cred;
 import org.pjsip.pjsua.csipsimple_config;
 import org.pjsip.pjsua.dynamic_factory;
 import org.pjsip.pjsua.pj_pool_t;
@@ -513,12 +514,16 @@
                 if (isTurnEnabled == 1) {
                     mediaCfg.setEnable_turn(isTurnEnabled);
                     mediaCfg.setTurn_server(pjsua.pj_str_copy(prefsWrapper.getTurnServer()));
+
+                    SWIGTYPE_p_pj_stun_auth_cred turn_auth_cred;
+                    turn_auth_cred=mediaCfg.getTurn_auth_cred();
                     pjsua.set_turn_credentials(
                             pjsua.pj_str_copy(prefsWrapper
                                     .getPreferenceStringValue(SipConfigManager.TURN_USERNAME)),
                             pjsua.pj_str_copy(prefsWrapper
                                     .getPreferenceStringValue(SipConfigManager.TURN_PASSWORD)),
-                            pjsua.pj_str_copy("<em>"), mediaCfg.getTurn_auth_cred());
+                            pjsua.pj_str_copy("</em>"), turn_auth_cred);
+                   mediaCfg.setTurn_auth_cred(turn_auth_cred);
                 } else {
                     mediaCfg.setEnable_turn(pjsua.PJ_FALSE);
                 }</p>

<h1>Index: src/com/csipsimple/api/SipProfile.java</h1>

<p>--- src/com/csipsimple/api/SipProfile.java  (revision 2154)
+++ src/com/csipsimple/api/SipProfile.java  (working copy)
@@ -1403,7 +1403,7 @@
         if (tmp_i != null &amp;&amp; tmp_i &gt;= 0) {
             turn_cfg_use = tmp_i;
         }
-        tmp_i = args.getAsInteger(FIELD_ICE_CFG_ENABLE);
+        tmp_i = args.getAsInteger(FIELD_TURN_CFG_ENABLE);
         if (tmp_i != null &amp;&amp; tmp_i &gt;= 0) {
             turn_cfg_enable = tmp_i;
         }</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #7</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Mar 6, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Thanks !!!</p>

<p>To be integrated asap.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #8</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Mar 6, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Issue 2248 has been merged into this issue.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #9</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Mar 6, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>This issue was closed by revision r2156.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Fixed</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>