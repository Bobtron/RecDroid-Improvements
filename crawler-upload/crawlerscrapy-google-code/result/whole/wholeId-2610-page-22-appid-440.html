https://code.google.com/archive/p/csipsimple/issues/2234<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #2234</h1>
            <p class="ng-binding">Wrong port number when trying to unregister contact  - contact rewrite</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 8, 2013 by
                  <i class="ng-binding">Happy Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Hello,</p>

<p>I'm seeing very strange behaviour of the CSipSimple client when trying to REGISTER to a Kamailio server, due to the contact rewrite feature, which sends out a second registration when the client gets a different host/port back from the server than was sent in the REGISTER. The behaviour cannot always be reproduced. I'm including a few tcpdump extracts below:</p>

<p>As you can see, the first one works fine. The first registration with 6761 in the contact port is followed by a new registration, and an expires=0 for contact port 6761.</p>

<p>17:28:00.875476 IP (tos 0x8, ttl 57, id 0, offset 0, flags [DF], proto UDP (17), length 767)
    188.189.68.119.33608 &gt; 93-94-109-36.ip.firstserved.net.sip: SIP, length: 739
    REGISTER sip:firstserved.net SIP/2.0
    v: SIP/2.0/UDP 188.189.68.119:54088;rport;branch=z9hG4bKPj4aU1BgdeOOJCAJg-yshpTuaUsiLu13NC
    Route: &lt;sip:firstserved.net;lr&gt;
    Max-Forwards: 70
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=w.6q81PNijdHGoH.YGSsRgga6afcL936
    t: "koen" &lt;sip:koen@firstserved.net&gt;
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10027 REGISTER
    Authorization: Digest username="koen@firstserved.net", realm="firstserved.net", nonce="URUnk1EVJmcMKTLodR/NlauO9YcoSKhV", uri="sip:firstserved.net", response="68f5780a6a57a9f689e13fc2c909c537"
    User-Agent: CSipSimple_SK17i-10/r1916
    m: &lt;sip:koen@188.189.68.119:6761;ob&gt;
    Expires: 300
    Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
    l:  0</p>

<p>17:28:00.877513 IP (tos 0x10, ttl 64, id 45335, offset 0, flags [none], proto UDP (17), length 589)
    93-94-109-36.ip.firstserved.net.sip &gt; 188.189.68.119.33608: SIP, length: 561
    SIP/2.0 200 OK
    v: SIP/2.0/UDP 188.189.68.119:54088;rport=33608;branch=z9hG4bKPj4aU1BgdeOOJCAJg-yshpTuaUsiLu13NC
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=w.6q81PNijdHGoH.YGSsRgga6afcL936
    t: "koen" &lt;sip:koen@firstserved.net&gt;;tag=b27e1a1d33761e85846fc98f5f3a7e58.c6bd
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10027 REGISTER
    Contact: &lt;sip:koen@188.189.80.44:6237;ob&gt;;expires=4;received="sip:188.189.80.44:59045", &lt;sip:koen@188.189.68.119:6761;ob&gt;;expires=300;received="sip:188.189.68.119:33608"
    Server: kamailio (3.3.3 (x86_64/linux))
    Content-Length: 0</p>

<p>17:28:01.274382 IP (tos 0x8, ttl 57, id 0, offset 0, flags [DF], proto UDP (17), length 816)
    188.189.68.119.33608 &gt; 93-94-109-36.ip.firstserved.net.sip: SIP, length: 788
    REGISTER sip:firstserved.net SIP/2.0
    v: SIP/2.0/UDP 188.189.68.119:54088;rport;branch=z9hG4bKPjmbWd0PcTPZqBEz3HMm.54.2GVKGsl0Mu
    Route: &lt;sip:firstserved.net;lr&gt;
    Max-Forwards: 70
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=jtTrOzQ6KXhaoPaI0gqn0DfdMv4WXSA.
    t: "koen" &lt;sip:koen@firstserved.net&gt;
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10028 REGISTER
    Authorization: Digest username="koen@firstserved.net", realm="firstserved.net", nonce="URUnk1EVJmcMKTLodR/NlauO9YcoSKhV", uri="sip:firstserved.net", response="68f5780a6a57a9f689e13fc2c909c537"
    User-Agent: CSipSimple_SK17i-10/r1916
    m: &lt;sip:koen@188.189.68.119:33608;ob&gt;
    m: &lt;sip:koen@188.189.68.119:6761;ob&gt;;expires=0
    Expires: 300
    Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
    l:  0</p>

<p>17:28:01.276116 IP (tos 0x10, ttl 64, id 45336, offset 0, flags [none], proto UDP (17), length 590)
    93-94-109-36.ip.firstserved.net.sip &gt; 188.189.68.119.33608: SIP, length: 562
    SIP/2.0 200 OK
    v: SIP/2.0/UDP 188.189.68.119:54088;rport=33608;branch=z9hG4bKPjmbWd0PcTPZqBEz3HMm.54.2GVKGsl0Mu
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=jtTrOzQ6KXhaoPaI0gqn0DfdMv4WXSA.
    t: "koen" &lt;sip:koen@firstserved.net&gt;;tag=b27e1a1d33761e85846fc98f5f3a7e58.9902
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10028 REGISTER
    Contact: &lt;sip:koen@188.189.80.44:6237;ob&gt;;expires=3;received="sip:188.189.80.44:59045", &lt;sip:koen@188.189.68.119:33608;ob&gt;;expires=300;received="sip:188.189.68.119:33608"
    Server: kamailio (3.3.3 (x86_64/linux))
    Content-Length: 0</p>

<p>Here, the unregister which should contain an expires=0 for the contact on port 7820, instead contains an unregister for port 7823, which is of course ignored by the server. Additionally, an extra register request is sent out, leading to three registrations for this AoR.</p>

<p>17:32:57.097215 IP (tos 0x8, ttl 57, id 0, offset 0, flags [DF], proto UDP (17), length 767)
    188.189.68.119.37704 &gt; 93-94-109-36.ip.firstserved.net.sip: SIP, length: 739
    REGISTER sip:firstserved.net SIP/2.0
    v: SIP/2.0/UDP 188.189.68.119:54088;rport;branch=z9hG4bKPjuQ0sUVykpqOwVIvCN1XYcw-zS0dKmax3
    Route: &lt;sip:firstserved.net;lr&gt;
    Max-Forwards: 70
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=fPvz042lfqKU6PhM2uJB170bdoa.srf2
    t: "koen" &lt;sip:koen@firstserved.net&gt;
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10029 REGISTER
    Authorization: Digest username="koen@firstserved.net", realm="firstserved.net", nonce="URUnk1EVJmcMKTLodR/NlauO9YcoSKhV", uri="sip:firstserved.net", response="68f5780a6a57a9f689e13fc2c909c537"
    User-Agent: CSipSimple_SK17i-10/r1916
    m: &lt;sip:koen@188.189.68.119:7816;ob&gt;
    Expires: 300
    Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
    l:  0</p>

<p>17:32:57.097742 IP (tos 0x10, ttl 64, id 45346, offset 0, flags [none], proto UDP (17), length 520)
    93-94-109-36.ip.firstserved.net.sip &gt; 188.189.68.119.37704: SIP, length: 492
    SIP/2.0 401 Unauthorized
    v: SIP/2.0/UDP 188.189.68.119:54088;rport=37704;branch=z9hG4bKPjuQ0sUVykpqOwVIvCN1XYcw-zS0dKmax3
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=fPvz042lfqKU6PhM2uJB170bdoa.srf2
    t: "koen" &lt;sip:koen@firstserved.net&gt;;tag=b27e1a1d33761e85846fc98f5f3a7e58.b5c9
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10029 REGISTER
    WWW-Authenticate: Digest realm="firstserved.net", nonce="URUp5FEVKLiaOtGsjCvNtXJ0Zx8oT8Ix"
    Server: kamailio (3.3.3 (x86_64/linux))
    Content-Length: 0</p>

<p>17:32:57.176138 IP (tos 0x8, ttl 57, id 0, offset 0, flags [DF], proto UDP (17), length 767)
    188.189.68.119.37704 &gt; 93-94-109-36.ip.firstserved.net.sip: SIP, length: 739
    REGISTER sip:firstserved.net SIP/2.0
    v: SIP/2.0/UDP 188.189.68.119:54088;rport;branch=z9hG4bKPjuQ0sUVykpqOwVIvCN1XYcw-zS0dKmax3
    Route: &lt;sip:firstserved.net;lr&gt;
    Max-Forwards: 70
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=fPvz042lfqKU6PhM2uJB170bdoa.srf2
    t: "koen" &lt;sip:koen@firstserved.net&gt;
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10029 REGISTER
    Authorization: Digest username="koen@firstserved.net", realm="firstserved.net", nonce="URUnk1EVJmcMKTLodR/NlauO9YcoSKhV", uri="sip:firstserved.net", response="68f5780a6a57a9f689e13fc2c909c537"
    User-Agent: CSipSimple_SK17i-10/r1916
    m: &lt;sip:koen@188.189.68.119:7818;ob&gt;
    Expires: 300
    Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
    l:  0</p>

<p>17:32:57.176457 IP (tos 0x10, ttl 64, id 45347, offset 0, flags [none], proto UDP (17), length 520)
    93-94-109-36.ip.firstserved.net.sip &gt; 188.189.68.119.37704: SIP, length: 492
    SIP/2.0 401 Unauthorized
    v: SIP/2.0/UDP 188.189.68.119:54088;rport=37704;branch=z9hG4bKPjuQ0sUVykpqOwVIvCN1XYcw-zS0dKmax3
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=fPvz042lfqKU6PhM2uJB170bdoa.srf2
    t: "koen" &lt;sip:koen@firstserved.net&gt;;tag=b27e1a1d33761e85846fc98f5f3a7e58.b5c9
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10029 REGISTER
    WWW-Authenticate: Digest realm="firstserved.net", nonce="URUp5FEVKLiaOtGsjCvNtXJ0Zx8oT8Ix"
    Server: kamailio (3.3.3 (x86_64/linux))
    Content-Length: 0</p>

<p>17:32:57.456560 IP (tos 0x8, ttl 57, id 0, offset 0, flags [DF], proto UDP (17), length 767)
    188.189.68.119.37704 &gt; 93-94-109-36.ip.firstserved.net.sip: SIP, length: 739
    REGISTER sip:firstserved.net SIP/2.0
    v: SIP/2.0/UDP 188.189.68.119:54088;rport;branch=z9hG4bKPjisuN3.NhYVJc.naknm0UU.su7Lm3Xzyi
    Route: &lt;sip:firstserved.net;lr&gt;
    Max-Forwards: 70
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=fPvz042lfqKU6PhM2uJB170bdoa.srf2
    t: "koen" &lt;sip:koen@firstserved.net&gt;
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10030 REGISTER
    User-Agent: CSipSimple_SK17i-10/r1916
    m: &lt;sip:koen@188.189.68.119:7820;ob&gt;
    Expires: 300
    Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
    Authorization: Digest username="koen@firstserved.net", realm="firstserved.net", nonce="URUp5FEVKLiaOtGsjCvNtXJ0Zx8oT8Ix", uri="sip:firstserved.net", response="eb9913c6da93960af00595938bb5636a"
    l:  0</p>

<p>17:32:57.458635 IP (tos 0x10, ttl 64, id 45349, offset 0, flags [none], proto UDP (17), length 592)
    93-94-109-36.ip.firstserved.net.sip &gt; 188.189.68.119.37704: SIP, length: 564
    SIP/2.0 200 OK
    v: SIP/2.0/UDP 188.189.68.119:54088;rport=37704;branch=z9hG4bKPjisuN3.NhYVJc.naknm0UU.su7Lm3Xzyi
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=fPvz042lfqKU6PhM2uJB170bdoa.srf2
    t: "koen" &lt;sip:koen@firstserved.net&gt;;tag=b27e1a1d33761e85846fc98f5f3a7e58.a00c
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10030 REGISTER
    Contact: &lt;sip:koen@188.189.68.119:33608;ob&gt;;expires=4;received="sip:188.189.68.119:33608", &lt;sip:koen@188.189.68.119:7820;ob&gt;;expires=300;received="sip:188.189.68.119:37704"
    Server: kamailio (3.3.3 (x86_64/linux))
    Content-Length: 0</p>

<p>17:32:57.857172 IP (tos 0x8, ttl 57, id 0, offset 0, flags [DF], proto UDP (17), length 816)
    188.189.68.119.37704 &gt; 93-94-109-36.ip.firstserved.net.sip: SIP, length: 788
    REGISTER sip:firstserved.net SIP/2.0
    v: SIP/2.0/UDP 188.189.68.119:54088;rport;branch=z9hG4bKPj8vBD5MRlHUrw3Wx39Hfd2mIl39FDSo0H
    Route: &lt;sip:firstserved.net;lr&gt;
    Max-Forwards: 70
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=7WnrUrBYAlzd.FHE6JvYz84rIwIIQn.l
    t: "koen" &lt;sip:koen@firstserved.net&gt;
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10031 REGISTER
    Authorization: Digest username="koen@firstserved.net", realm="firstserved.net", nonce="URUp5FEVKLiaOtGsjCvNtXJ0Zx8oT8Ix", uri="sip:firstserved.net", response="eb9913c6da93960af00595938bb5636a"
    User-Agent: CSipSimple_SK17i-10/r1916
    m: &lt;sip:koen@188.189.68.119:37704;ob&gt;
    m: &lt;sip:koen@188.189.68.119:7823;ob&gt;;expires=0
    Expires: 300
    Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
    l:  0</p>

<p>17:32:57.858414 IP (tos 0x10, ttl 64, id 45350, offset 0, flags [none], proto UDP (17), length 676)
    93-94-109-36.ip.firstserved.net.sip &gt; 188.189.68.119.37704: SIP, length: 648
    SIP/2.0 200 OK
    v: SIP/2.0/UDP 188.189.68.119:54088;rport=37704;branch=z9hG4bKPj8vBD5MRlHUrw3Wx39Hfd2mIl39FDSo0H
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=7WnrUrBYAlzd.FHE6JvYz84rIwIIQn.l
    t: "koen" &lt;sip:koen@firstserved.net&gt;;tag=b27e1a1d33761e85846fc98f5f3a7e58.eba9
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10031 REGISTER
    Contact: &lt;sip:koen@188.189.68.119:33608;ob&gt;;expires=4;received="sip:188.189.68.119:33608", &lt;sip:koen@188.189.68.119:7820;ob&gt;;expires=300;received="sip:188.189.68.119:37704", &lt;sip:koen@188.189.68.119:37704;ob&gt;;expires=300;received="sip:188.189.68.119:37704"
    Server: kamailio (3.3.3 (x86_64/linux))
    Content-Length: 0</p>

<p>17:33:03.936014 IP (tos 0x8, ttl 57, id 0, offset 0, flags [DF], proto UDP (17), length 767)
    188.189.68.119.37704 &gt; 93-94-109-36.ip.firstserved.net.sip: SIP, length: 739
    REGISTER sip:firstserved.net SIP/2.0
    v: SIP/2.0/UDP 188.189.68.119:54088;rport;branch=z9hG4bKPj.qp-4JEubUXCo9DsFWhgIiltbQqSMFrq
    Route: &lt;sip:firstserved.net;lr&gt;
    Max-Forwards: 70
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=batH6XJrAFqvEJpC63ttwfKPVSfTu0uc
    t: "koen" &lt;sip:koen@firstserved.net&gt;
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10032 REGISTER
    Authorization: Digest username="koen@firstserved.net", realm="firstserved.net", nonce="URUp5FEVKLiaOtGsjCvNtXJ0Zx8oT8Ix", uri="sip:firstserved.net", response="eb9913c6da93960af00595938bb5636a"
    User-Agent: CSipSimple_SK17i-10/r1916
    m: &lt;sip:koen@188.189.68.119:7831;ob&gt;
    Expires: 300
    Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
    l:  0</p>

<p>17:33:03.938132 IP (tos 0x10, ttl 64, id 45351, offset 0, flags [none], proto UDP (17), length 677)
    93-94-109-36.ip.firstserved.net.sip &gt; 188.189.68.119.37704: SIP, length: 649
    SIP/2.0 200 OK
    v: SIP/2.0/UDP 188.189.68.119:54088;rport=37704;branch=z9hG4bKPj.qp-4JEubUXCo9DsFWhgIiltbQqSMFrq
    f: "koen" &lt;sip:koen@firstserved.net&gt;;tag=batH6XJrAFqvEJpC63ttwfKPVSfTu0uc
    t: "koen" &lt;sip:koen@firstserved.net&gt;;tag=b27e1a1d33761e85846fc98f5f3a7e58.eb28
    i: cXGHDoxWFgO6U1uKuoPM5L9c8vIlO3Ur
    CSeq: 10032 REGISTER
    Contact: &lt;sip:koen@188.189.68.119:7820;ob&gt;;expires=294;received="sip:188.189.68.119:37704", &lt;sip:koen@188.189.68.119:37704;ob&gt;;expires=294;received="sip:188.189.68.119:37704", &lt;sip:koen@188.189.68.119:7831;ob&gt;;expires=300;received="sip:188.189.68.119:37704"
    Server: kamailio (3.3.3 (x86_64/linux))
    Content-Length: 0</p>

<p>Kind regards,</p>

<p>Denis Braet</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 8, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Hi,</p>

<p>MMmmm, very strange.</p>

<p>I would be interested by two things :
 1- Try to upgrade to latest nightly builds. There is something to prevent from brutal network loss (and so from missing un-registrations in the middle) -&gt; <a href="http://nightlies.csipsimple.com/trunk/">http://nightlies.csipsimple.com/trunk/</a>
 (be sure with this version that the "try to clean registration" is enabled -- it should be the case after the upgrade)</p>

<p>2- Have logs from the app (see HowToCollectLogs wiki page). Here we see logs from the server, and regarding how contact are rewritten (the IP are the same and only port changes), I really suspect there is a network equipment in the middle that already makes some ip:port rewriting (something like a SIP ALG). Comparing logs from the app and logs from your server will allow to see what is sent by the app and what is received by your server and detect if there is something in the middle as I suspect. (this equipement can be hidden in a firewall, or an internet access box, so maybe there is one even if you didn't voluntarily deployed one).
And in this case =&gt; 
    a) you should not have "allow contact rewrite" enabled (as already done by your equipment on the middle)
    b) the offset of 3 in the port number is probably introduced by this equipment in the middle (maybe it has a bug when stressed by the contact rewrite stuff from pjsip).</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 8, 2013 by
                  <i class="ng-binding">Happy Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Hello Régis,</p>

<p>There is indeed some NAT'ing involved in this scenario, but not under our control, since the connection is made over 3G with a Belgian provider. I myself have no such trouble, with exactly the same CSipSimple version, to connect from Bouygues and SFR, two French providers. I'll ask my colleague to record a log on his phone on monday to cross-check what goes wrong between client and server.</p>

<p>I'm certain that disabling the contact-rewrite field would solve the issue - at least when resorting to other NAT traversal means, but since we're aiming to build a fully RFC3261-compliant solution that works with as many clients and ISP's as is possible, that's not the way to go.</p>

<p>Kind regards,</p>

<p>Denis Braet</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 8, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Ah, on va pouvoir continuer en français si tu te connectes de SRF ou Bouygues :)</p>

<p>Ok, pour le fait que l'équipement qui fait le NAT est peut-être pas de votre côté.
Par contre il est tout à fait illusoire d'imaginer trouver une solution qui corresponde à toutes les topo réseaux.
D'ailleurs la méchanique de contact rewrite n'est pas décrite dans la RFC3261 mais dans une autre (que je n'ai pas en tête). Il y a aussi beaucoup d'autres RFC qui étendent le SIP. Concernant les problématiques de NAT, il y a par exemple le STUN et le ICE.
Activer le STUN pourrait par exemple éviter le contact rewrite (puisque le port sip publique serait directement trouvé comme étant le bon). Il faut par contre que ce serveur stun soit dans le bon réseau (idéalement le même public que celui du serveur sip)</p>

<p>Il faut donc en général des options (qu'il faudra détecter au mieux suivant les besoins). C'est pour cette raison que l'approche de csipsimple c'est d'avoir des assistant de configuration qui viennent adapter au mieux les options par rapport au fournisseur de service, au modèle du téléphone, au pays et aux préférences de l'utilisateur.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #4</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 8, 2013 by
                  <i class="ng-binding">Happy Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Bonsoir Régis,</p>

<p>Aucun souci de continuer en français, je te savais francophone mais avais débuté la conversation en anglais par souci pour de futurs lecteurs.</p>

<p>Tu as bien raison que de chercher la configuration qui permette de connecter tous les clients à travers tous les fournisseurs vers tous les serveurs SIP est le graal. D'autre part, mieux vaut anticiper le plus possible. Ce que j'aime bien à CSipSimple par rapport à d'autres softphones tel que SipDroid, 3CXPhone ou bien d'autres, c'est qu'on peut chipoter dedans pour essayer différents scénarios, contrairement aux autres. Pour la plateforme Android, le logiciel est bien en train de devenir le logiciel de préférence. Et malgré le fait qu'il est possible de choisir différents profils pour chaque fournisseur VoIP, ça n'empêche pas le NAT'ing des fournisseurs de faire pierre d'achoppement. La config qui marche sur mon phone ne marche pas sur celui de mon collègue. Mon ambition est de configurer le serveur de telle façon qu'il puisse capter les conneries NAT des fournisseurs autant que possible, sans demander à l'utilisateur de passer en mode expert, sans compter ceux qui se serviraient d'un logiciel moins intelligent, tel qu'un softphone Windows ou même un téléphone SIP Cisco.</p>

<p>Je te tiens au courant de mes découvertes quant à la logique NAT de l'ISP de mon collègue, ça pourra probablement servir à encore une fois trouver des workarounds pour les bêtises d'autrui.</p>

<p>Bien à toi,</p>

<p>Denis</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #5</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 11, 2013 by
                  <i class="ng-binding">Happy Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Bonjour Régis,</p>

<p>Le fournisseur ré-écrit les ports dans le champ contact, comme tu peux voir dans les logs ci-dessous:</p>

<p>Envoyé depuis le phone:</p>

<p>D/libpjsip( 5279): REGISTER sip:firstserved.net SIP/2.0
D/libpjsip( 5279): v: SIP/2.0/UDP 188.189.95.24:21320;rport;branch=z9hG4bKPjwwIZ3llqbZW9VQM2PnvpWuRbplho-zRD
D/libpjsip( 5279): Route: 
D/libpjsip( 5279): Max-Forwards: 70
D/libpjsip( 5279): f: "koen" ;tag=aiZi0wbDzro6vyejM821Yf9qKO6O151q
D/libpjsip( 5279): t: "koen" 
D/libpjsip( 5279): i: zulCfTZEk9j5LS7BrK22GjaiWpHFrGO.
D/libpjsip( 5279): CSeq: 47767 REGISTER
D/libpjsip( 5279): User-Agent: CSipSimple_SK17i-10/r1916
D/libpjsip( 5279): m: "koen" 
D/libpjsip( 5279): Expires: 300
D/libpjsip( 5279): Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
D/libpjsip( 5279): Authorization: Digest username="koen@firstserved.net", realm="firstserved.net", nonce="URi26FEYtby4V09I4K2et/ugnyW/fzVy", uri="sip:firstserved.net", response="197148f2a9d22a15b4ecf5580ee6e858"
D/libpjsip( 5279): l:  0</p>

<p>Reçu sur le serveur:</p>

<p>10:11:25.844768 IP (tos 0x8, ttl 57, id 0, offset 0, flags [DF], proto UDP (17), length 787)
    188.189.95.24.21320 &gt; 93-94-109-36.ip.firstserved.net.sip: SIP, length: 759
    REGISTER sip:firstserved.net SIP/2.0
    v: SIP/2.0/UDP 188.189.95.24:21320;rport;branch=z9hG4bKPjwwIZ3llqbZW9VQM2PnvpWuRbplho-zRD
    Route: 
    Max-Forwards: 70
    f: "koen" ;tag=aiZi0wbDzro6vyejM821Yf9qKO6O151q
    t: "koen" 
    i: zulCfTZEk9j5LS7BrK22GjaiWpHFrGO.
    CSeq: 47767 REGISTER
    User-Agent: CSipSimple_SK17i-10/r1916
    m: "koen" 
    Expires: 300
    Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
    Authorization: Digest username="koen@firstserved.net", realm="firstserved.net", nonce="URi26FEYtby4V09I4K2et/ugnyW/fzVy", uri="sip:firstserved.net", response="197148f2a9d22a15b4ecf5580ee6e858"
    l:  0</p>

<p>Cela mène évidemment à un jeu de ping-pong, vu que le serveur renvoie le port perçu, 32203, dans ce cas, et que le client voit un port changé, et répond de retour, et ainsi de suite:</p>

<p>10:11:25.846927 IP (tos 0x10, ttl 64, id 30087, offset 0, flags [none], proto UDP (17), length 473)
    93-94-109-36.ip.firstserved.net.sip &gt; 188.189.95.24.21320: SIP, length: 445
    SIP/2.0 200 OK
    v: SIP/2.0/UDP 188.189.95.24:21320;rport=21320;branch=z9hG4bKPjwwIZ3llqbZW9VQM2PnvpWuRbplho-zRD
    f: "koen" ;tag=aiZi0wbDzro6vyejM821Yf9qKO6O151q
    t: "koen" ;tag=b27e1a1d33761e85846fc98f5f3a7e58.06fc
    i: zulCfTZEk9j5LS7BrK22GjaiWpHFrGO.
    CSeq: 47767 REGISTER
    Contact: ;expires=300
    Server: kamailio (3.3.3 (x86_64/linux))
    Content-Length: 0</p>

<p>D/libpjsip( 5279): SIP/2.0 200 OK
D/libpjsip( 5279): v: SIP/2.0/UDP 10.48.60.11;rport=21320;branch=z9hG4bKPjwwIZ3llqbZW9VQM2PnvpWuRbplho-zRD
D/libpjsip( 5279): f: "koen" ;tag=aiZi0wbDzro6vyejM821Yf9qKO6O151q
D/libpjsip( 5279): t: "koen" ;tag=b27e1a1d33761e85846fc98f5f3a7e58.06fc
D/libpjsip( 5279): i: zulCfTZEk9j5LS7BrK22GjaiWpHFrGO.
D/libpjsip( 5279): CSeq: 47767 REGISTER
D/libpjsip( 5279): Contact: ;expires=300
D/libpjsip( 5279): Server: kamailio (3.3.3 (x86_64/linux))
D/libpjsip( 5279): Content-Length: 0</p>

<p>D/libpjsip( 5279): REGISTER sip:firstserved.net SIP/2.0
D/libpjsip( 5279): v: SIP/2.0/UDP 188.189.95.24:21320;rport;branch=z9hG4bKPjFuM0.sVUObmjjuCY.pH.1NLRC68heOyu
D/libpjsip( 5279): Route: 
D/libpjsip( 5279): Max-Forwards: 70
D/libpjsip( 5279): f: "koen" ;tag=TffHd4yxpx8CjdEJANinawZ0TkgZLzYf
D/libpjsip( 5279): t: "koen" 
D/libpjsip( 5279): i: zulCfTZEk9j5LS7BrK22GjaiWpHFrGO.
D/libpjsip( 5279): CSeq: 47768 REGISTER
D/libpjsip( 5279): Authorization: Digest username="koen@firstserved.net", realm="firstserved.net", nonce="URi26FEYtby4V09I4K2et/ugnyW/fzVy", uri="sip:firstserved.net", response="197148f2a9d22a15b4ecf5580ee6e858"
D/libpjsip( 5279): User-Agent: CSipSimple_SK17i-10/r1916
D/libpjsip( 5279): m: "koen" 
D/libpjsip( 5279): Expires: 0
D/libpjsip( 5279): l:  0</p>

<p>10:11:36.984031 IP (tos 0x8, ttl 57, id 0, offset 0, flags [DF], proto UDP (17), length 693)
    188.189.95.24.21320 &gt; 93-94-109-36.ip.firstserved.net.sip: SIP, length: 665
    REGISTER sip:firstserved.net SIP/2.0
    v: SIP/2.0/UDP 188.189.95.24:21320;rport;branch=z9hG4bKPjFuM0.sVUObmjjuCY.pH.1NLRC68heOyu
    Route: 
    Max-Forwards: 70
    f: "koen" ;tag=TffHd4yxpx8CjdEJANinawZ0TkgZLzYf
    t: "koen" 
    i: zulCfTZEk9j5LS7BrK22GjaiWpHFrGO.
    CSeq: 47768 REGISTER
    Authorization: Digest username="koen@firstserved.net", realm="firstserved.net", nonce="URi26FEYtby4V09I4K2et/ugnyW/fzVy", uri="sip:firstserved.net", response="197148f2a9d22a15b4ecf5580ee6e858"
    User-Agent: CSipSimple_SK17i-10/r1916
    m: "koen" 
    Expires: 0
    l:  0</p>

<p>Aurais-tu une idée de comment éviter ce genre de problèmes? J'avais pensé essayer le SIP par TCP, étant donné que pour ce scénario, CSipSimple permet d'employer l'extension GRUU pour avoir un champ de contact unique, mais ça ne donne pas trop fort en TCP:</p>

<p>D/libpjsip( 5279): 10:29:43.432    pjsua_acc.c  Adding account: id=koen 
D/libpjsip( 5279): 10:29:43.432    pjsua_acc.c  .Account koen  added with id 1
D/libpjsip( 5279): 10:29:43.432    pjsua_acc.c  .Acc 1: setting registration..
E/libpjsip( 5279): 10:29:43.432    pjsua_acc.c  ..Unable to generate suitable Contact header for registration: Unsupported transport (PJSIP_EUNSUPTRANSPORT) [status=171060]
E/libpjsip( 5279): 10:29:43.432    pjsua_acc.c  ..Unable to create registration: Unsupported transport (PJSIP_EUNSUPTRANSPORT) [status=171060]</p>

<p>Il y a-t-il une raison de protocole pourquoi RFC5626 ne marche pas en UDP? Ou s'agit-il d'une implémentation qui reste à faire?</p>

<p>Bien à toi,</p>

<p>Denis</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #6</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 11, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Ok, ça confirme ma théorie :).</p>

<p>Pour le TCP qui ne marche pas, est-ce que l'option dans Réseaux &gt; Transport TCP est bien activée? Sinon comment as-tu activé le transport TCP?</p>

<p>Pour l'udp et la rfc5626, en effet : <a href="http://www.pjsip.org/pjsip/docs/html/structpjsua__acc__config.htm#a306e4641988606f1ef0993e398ff98e7">http://www.pjsip.org/pjsip/docs/html/structpjsua__acc__config.htm#a306e4641988606f1ef0993e398ff98e7</a>
pas encore supporté chez pjsip.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #7</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 11, 2013 by
                  <i class="ng-binding">Happy Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Bonsoir Régis,</p>

<p>Pour le TCP, c'était en effet l'option transport qui n'était pas activée. J'ai fait des tests avec l'enregistrement par TCP et TLS, et le problème des doubles enregistrements ne se produit plus. Malheureusement, les appels n'offrent l'audio que d'un côté, et je suppose qu'ici aussi, il y a un problème du côté du fournisseur d'accès. J'inclus les paramètres utiles des différents logs. C'est le client dont les logs traitent ci-dessous qui ne reçoit pas d'audio, l'autre côté reçoit bien son audio par contre.</p>

<p>Les logs CSipSimple, niveau de logging 5 ci-dessous. Je n'ai pas filtré le tout, au cas où ce serait un problème audio, ce qui me parait plutôt improbable, vu que les codecs sont compatibles - nous avons testé en G711, Codec2 et G729. Ce qui m'intéresse, ce sont les deux messages STUN timeout, je ne sais s'ils sont normaux. Par contre, pas moyen de voir dans les logs quels ports RTP et RTCP sont affichés par le client en réponse à l'INVITE, vu que les messages sont coupés à mi-chemin.</p>

<p>Côté tcpdump sur le serveur, ça donne le suivant pour le RTP et RTCP:</p>

<p>RTP du serveur vers le client:
17:10:48.542876 IP (tos 0xb8, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 60)
    93-94-109-36.ip.firstserved.net.43822 &gt; 188.189.67.183.24364: UDP, length 32</p>

<p>Vers port 24364 comme affiché dans les logs</p>

<p>RTP du client vers le serveur:
17:10:48.555294 IP (tos 0x8, ttl 57, id 0, offset 0, flags [DF], proto UDP (17), length 60)
    188.189.67.183.65324 &gt; 93-94-109-36.ip.firstserved.net.43822: UDP, length 32</p>

<p>Vers le port RTP comme affiché par le serveur. Par contre, le traffic n'est pas symmétrique, alors que dans l'autre leg du call, il l'est.</p>

<p>RTCP serveur -&gt; client:
17:10:48.684310 IP (tos 0xb8, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 120)
    93-94-109-36.ip.firstserved.net.43823 &gt; 188.189.67.183.24365: UDP, length 92</p>

<p>RTCP client -&gt; serveur:
17:10:41.015986 IP (tos 0x8, ttl 57, id 0, offset 0, flags [DF], proto UDP (17), length 92)
    188.189.67.183.40749 &gt; 93-94-109-36.ip.firstserved.net.43823: UDP, length 64</p>

<p>Le proxy media sur le serveur démontre que les packets RTP arrivent bel et bien jusqu'au serveur:</p>

<p>Feb 11 17:10:37 sip01 rtpproxy[24349]: INFO:handle_command: new session on a port 43822 created, tag oMKT
GNINfNkTtswEzYYsmYDSp3zzXrU0;1
Feb 11 17:10:41 sip01 rtpproxy[24349]: INFO:handle_command: pre-filling callee's address with 188.189.67.
183:24364
Feb 11 17:11:49 sip01 rtpproxy[24349]: INFO:remove_session: RTP stats: 398 in from callee, 364 in from ca
ller, 762 relayed, 0 dropped
Feb 11 17:11:49 sip01 rtpproxy[24349]: INFO:remove_session: RTCP stats: 3 in from callee, 4 in from calle
r, 7 relayed, 0 dropped
Feb 11 17:11:49 sip01 rtpproxy[24349]: INFO:remove_session: session on ports 43822/52428 is cleaned up</p>

<p>L'invite envoyé par le serveur:</p>

<p>17:10:37.868956 IP (tos 0x10, ttl 64, id 23641, offset 0, flags [DF], proto TCP (6), length 1201)
    93-94-109-36.ip.firstserved.net.sip &gt; 188.189.67.183.61249: Flags [P.], cksum 0xcf9a (incorrect -&gt; 0x9834), seq 3169:4318, ack 4307, win 390, options [nop,nop,TS val 1457494659 ecr 15978911], length 1149
E...\Y@.@...]^m$..C....Aw..zW..............
V.......INVITE sip:koen@188.189.67.183:61249;transport=TCP;ob SIP/2.0
Record-Route: 
Record-Route: 
Via: SIP/2.0/TCP 93.94.109.36;branch=z9hG4bK91b3.881d8005.0;i=e1
v: SIP/2.0/TLS 192.168.1.55:38512;received=109.20.3.91;rport=38512;branch=z9hG4bKPjIUTDd3AKpVB.8O3paaHE-qJfCW3SzRSH
Max-Forwards: 69
f: "disple" ;tag=oMKTGNINfNkTtswEzYYsmYDSp3zzXrU0
t: 
m: 
i: -nGwirchXTqEobxZpt4Ot3MWAH9CMFyn
CSeq: 18021 INVITE
k: replaces, 100rel, timer, norefersub
x: 1800
Min-SE: 90
User-Agent: CSipSimple_GT-I9100-15/r1916
c: application/sdp
l:   296
P-hint: branch [1]</p>

<p>v=0
o=- 3569587812 3569587812 IN IP4 93.94.109.36
s=pjmedia
c=IN IP4 109.20.3.91
t=0 0
m=audio 43822 RTP/AVP 18 100 0 8 101
c=IN IP4 93.94.109.36
a=rtcp:43823
a=sendrecv
a=fmtp:18 annexb=no
a=rtpmap:100 CODEC2/8000
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-15
a=nortpproxy:yes</p>

<p>La réponse à l'INVITE reçue par le serveur:</p>

<p>17:10:41.255162 IP (tos 0x8, ttl 57, id 16820, offset 0, flags [DF], proto TCP (6), length 1122)
    188.189.67.183.61249 &gt; 93-94-109-36.ip.firstserved.net.sip: Flags [P.], cksum 0x5907 (correct), seq 5616:6686, ack 4318, win 7904, options [nop,nop,TS val 15980696 ecr 1457495565], length 1070
E..bA.@.9.0...C.]^m$.A..W..#w.......Y......
SIP/2.0 200 OK
v: SIP/2.0/TCP 93.94.109.36;received=93.94.109.36;branch=z9hG4bK91b3.881d8005.0;i=e1
v: SIP/2.0/TLS 192.168.1.55:38512;rport=38512;received=109.20.3.91;branch=z9hG4bKPjIUTDd3AKpVB.8O3paaHE-qJfCW3SzRSH
Record-Route: 
Record-Route: 
i: -nGwirchXTqEobxZpt4Ot3MWAH9CMFyn
f: "disple" ;tag=oMKTGNINfNkTtswEzYYsmYDSp3zzXrU0
t: ;tag=QXzD8TsJKLzIbKBWYpNZu6K.6Ur.lqrZ
CSeq: 18021 INVITE
m: 
k: replaces, 100rel, timer, norefersub
x: 1800;refresher=uac
Require: timer
c: application/sdp
l:   273</p>

<p>v=0
o=- 3569587799 3569587800 IN IP4 188.189.67.183
s=pjmedia
c=IN IP4 188.189.67.183
t=0 0
m=audio 24364 RTP/AVP 18 101
c=IN IP4 188.189.67.183
a=rtcp:61229 IN IP4 188.189.67.183
a=sendrecv
a=fmtp:18 annexb=no
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-15</p>

<p>Chose bizarre, je ne vois pas le CODEC2 dans la réponse, bien qu'il soit installé, et que j'arrive bien à entendre l'audio venant du client, moi.</p>

<p>Aurais-tu une idée de ce qui se passe? Nous avons également essayé en TLS, nous disant que de cette façon là, un ALG SIP ne pourrait ré-écrire quoi que ce soit dans les messages, vu qu'ils sont illisibles, mais sans aucun succès.</p>

<p>Bien à toi,</p>

<p>Denis Braet</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #8</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 11, 2013 by
                  <i class="ng-binding">Happy Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Les logs CSipSimple appartenant au message précédent - il était trop long pour poster en une fois:</p>

<p>--------- beginning of /dev/log/main
D/libpjsip(14784): 17:09:44.292  evsub0x2b26f4  .....Subscription state changed ACCEPTED --&gt; ACTIVE
D/libpjsip(14784): 17:09:44.293   pjsua_pres.c  ......MWI subscription for koen  is ACTIVE
D/libpjsip(14784): 17:09:48.506 stuntsx0x2b3cc !STUN timeout waiting for response
D/libpjsip(14784): 17:09:48.591 stuntsx0x2b44b  STUN timeout waiting for response
D/SIP UA Receiver(14784): NAT TYPE DETECTED !!!Symmetric et 0
D/libpjsip(14784): 17:09:59.177   pjsua_core.c !.RX 1149 bytes Request msg INVITE/cseq=18021 (rdata0x2bbe94) from tcp 93.94.109.36:5060:
D/libpjsip(14784): INVITE sip:koen@188.189.67.183:61249;transport=TCP;ob SIP/2.0
D/libpjsip(14784): Record-Route: 
D/libpjsip(14784): Record-Route: 
D/libpjsip(14784): Via: SIP/2.0/TCP 93.94.109.36;branch=z9hG4bK91b3.881d8005.0;i=e1
D/libpjsip(14784): v: SIP/2.0/TLS 192.168.1.55:38512;received=109.20.3.91;rport=38512;branch=z9hG4bKPjIUTDd3AKpVB.8O3paaHE-qJfCW3SzRSH
D/libpjsip(14784): Max-Forwards: 69
D/libpjsip(14784): f: "disple" ;tag=oMKTGNINfNkTtswEzYYsmYDSp3zzXrU0
D/libpjsip(14784): t: 
D/libpjsip(14784): m: 
D/libpjsip(14784): i: -nGwirchXTqEobxZpt4Ot3MWAH9CMFyn
D/libpjsip(14784): CSeq: 18021 INVITE
D/libpjsip(14784): k: replaces, 100rel, timer, norefersub
D/libpjsip(14784): x: 1800
D/libpjsip(14784): Min-SE: 90
D/libpjsip(14784): User-Agent: CSipSimple_GT-I9100-15/r1916
D/libpjsip(14784): c: application/sdp
D/libpjsip(14784): l:   296
D/libpjsip(14784): P-hint: branch [1]
D/libpjsip(14784): 
D/libpjsip(14784): v=0
D/libpjsip(14784): o=- 3569587812 3569587812 IN IP4 93.94.109.36
D/libpjsip(14784): 17:09:59.177   pjsua_call.c  .Incoming Request msg INVITE/cseq=18021 (rdata0x2bbe94)
D/libpjsip(14784): 17:09:59.178  pjsua_media.c  ..Call 0: initializing media..
D/libpjsip(14784): 17:09:59.554  pjsua_media.c  ...Note: STUN mapped RTCP port 61229 is not adjacent to RTP port 24364
D/libpjsip(14784): 17:09:59.555  pjsua_media.c  ...RTP socket reachable at 188.189.67.183:24364
D/libpjsip(14784): 17:09:59.555  pjsua_media.c  ...RTCP socket reachable at 188.189.67.183:61229
D/libpjsip(14784): 17:09:59.555  pjsua_media.c  ...Media index 0 selected for audio call 0
D/libpjsip(14784): 17:09:59.557   pjsua_core.c  .....TX 609 bytes Response msg 100/INVITE/cseq=18021 (tdta0x2c3448) to tcp 93.94.109.36:5060:
D/libpjsip(14784): SIP/2.0 100 Trying
D/libpjsip(14784): v: SIP/2.0/TCP 93.94.109.36;received=93.94.109.36;branch=z9hG4bK91b3.881d8005.0;i=e1
D/libpjsip(14784): v: SIP/2.0/TLS 192.168.1.55:38512;rport=38512;received=109.20.3.91;branch=z9hG4bKPjIUTDd3AKpVB.8O3paaHE-qJfCW3SzRSH
D/libpjsip(14784): Record-Route: 
D/libpjsip(14784): Record-Route: 
D/libpjsip(14784): i: -nGwirchXTqEobxZpt4Ot3MWAH9CMFyn
D/libpjsip(14784): f: "disple" ;tag=oMKTGNINfNkTtswEzYYsmYDSp3zzXrU0
D/libpjsip(14784): t: 
D/libpjsip(14784): CSeq: 18021 INVITE
D/libpjsip(14784): l:  0
D/libpjsip(14784): 
D/libpjsip(14784): 
D/libpjsip(14784): --end msg--
D/libpjsip(14784): 17:09:59.714   pjsua_call.c  ..Answering call 0: code=180
D/libpjsip(14784): 17:09:59.719   pjsua_core.c  ......TX 700 bytes Response msg 180/INVITE/cseq=18021 (tdta0x2c3448) to tcp 93.94.109.36:5060:
D/libpjsip(14784): SIP/2.0 180 Ringing
D/libpjsip(14784): v: SIP/2.0/TCP 93.94.109.36;received=93.94.109.36;branch=z9hG4bK91b3.881d8005.0;i=e1
D/libpjsip(14784): v: SIP/2.0/TLS 192.168.1.55:38512;rport=38512;received=109.20.3.91;branch=z9hG4bKPjIUTDd3AKpVB.8O3paaHE-qJfCW3SzRSH
D/libpjsip(14784): Record-Route: 
D/libpjsip(14784): Record-Route: 
D/libpjsip(14784): i: -nGwirchXTqEobxZpt4Ot3MWAH9CMFyn
D/libpjsip(14784): f: "disple" ;tag=oMKTGNINfNkTtswEzYYsmYDSp3zzXrU0
D/libpjsip(14784): t: ;tag=QXzD8TsJKLzIbKBWYpNZu6K.6Ur.lqrZ
D/libpjsip(14784): CSeq: 18021 INVITE
D/libpjsip(14784): m: 
D/libpjsip(14784): l:  0
D/libpjsip(14784): 
D/libpjsip(14784): 
D/libpjsip(14784): --end msg--
I/libpjsip(14784): 17:09:59.720 pjsua_jni_addo  .........Call 0 state changed to EARLY (180 Ringing)
I/libpjsip(14784): 17:09:59.724 pjsua_jni_addo  .........Get call secure info...
E/AudioPolicyManagerBase(  118): unknown stream type
D/libpjsip(14784): 17:10:01.871   pjsua_call.c !Answering call 0: code=200
D/libpjsip(14784): 17:10:01.871  pjsua_media.c  ...Call 0: updating media..
D/libpjsip(14784): 17:10:01.871    pjsua_aud.c  ....Audio channel update..
D/libpjsip(14784): 17:10:01.871   strm0x352d3c  .....Encoder stream started
D/libpjsip(14784): 17:10:01.871   strm0x352d3c  .....Decoder stream started
D/libpjsip(14784): 17:10:01.871  pjsua_media.c  ....Audio updated, stream #0: G729 (sendrecv)
E/AudioPolicyManagerBase(  118): unknown stream type
I/libpjsip(14784): 17:10:01.881 pjsua_jni_addo  ...Get call secure info...
D/libpjsip(14784): 17:10:01.881 pjsua_jni_addo  ...Get secure for media type 1
D/libpjsip(14784): 17:10:01.882    pjsua_aud.c  ...Conf connect: 2 --&gt; 0
D/libpjsip(14784): 17:10:01.882    pjsua_aud.c  ....Set sound device: capture=-1, playback=-2
D/libpjsip(14784): 17:10:01.882 android_jni_de  .....Default params
D/libpjsip(14784): 17:10:01.882    pjsua_aud.c  .....Opening sound device PCM@8000/1/20ms
D/libpjsip(14784): 17:10:01.883 android_jni_de  ......Creating stream
I/libpjsip(14784): 17:10:01.883 android_jni_de  ......Create stream : 8000 samples/sec, 160 samples/frame, 2 bytes/sample
I/libpjsip(14784): 17:10:01.883 android_jni_de  ......Sample format is : 2 for 16 
E/AudioPolicyManagerBase(  118): unknown stream type
I/libpjsip(14784): 17:10:02.053 android_jni_de  ......We have the class
I/libpjsip(14784): 17:10:02.053 android_jni_de  ......We have the buffer method
I/libpjsip(14784): 17:10:02.053 android_jni_de  ......Min record buffer 6144
I/libpjsip(14784): 17:10:02.055 android_jni_de  ......We have the track class
I/libpjsip(14784): 17:10:02.055 android_jni_de  ......We have the buffer method
I/libpjsip(14784): 17:10:02.055 android_jni_de  ......Min play buffer 4096
I/libpjsip(14784): 17:10:02.055 android_jni_de  ......Min buffer 6144
I/libpjsip(14784): 17:10:02.063 android_jni_de  ......Use micro source : 7
I/libpjsip(14784): 17:10:02.065 android_jni_de  ......We have capture the instance done
I/libpjsip(14784): 17:10:02.067 android_jni_de  ......We have the track instance done
D/libpjsip(14784): 17:10:02.067 android_jni_de  ......Starting Android stream stream..
D/libpjsip(14784): 17:10:02.067 android_jni_de  ......Starting done
D/libpjsip(14784): 17:10:02.067 android_jni_de  ......Get stream params
D/libpjsip(14784): 17:10:02.067 android_jni_de  ......Get stream params
D/libpjsip(14784): 17:10:02.067   conference.c  ....Port 2 (sip:denis@firstserved.net) transmitting to port 0 (Android Audio)
D/libpjsip(14784): 17:10:02.067    pjsua_aud.c  ...Conf connect: 0 --&gt; 2
D/libpjsip(14784): 17:10:02.067   conference.c  ....Port 0 (Android Audio) transmitting to port 2 (sip:denis@firstserved.net)
I/libpjsip(14784): 17:10:02.079 android_jni_de !&lt;&lt; Enter player thread
D/libpjsip(14784): 17:10:02.082 android_jni_de  We have the class for process
D/libpjsip(14784): 17:10:02.083 android_jni_de  We have the method for setThreadPriority
I/libpjsip(14784): 17:10:02.083 android_jni_de !&lt;&lt; Enter recorder thread
D/libpjsip(14784): 17:10:02.084 android_jni_de  We have the class for process
D/libpjsip(14784): 17:10:02.085 android_jni_de  We have the method for setThreadPriority
D/libpjsip(14784): 17:10:02.109   Master/sound  Underflow, buf_cnt=0, will generate 1 frame
E/kernel  (  125): [160112.784057] [audpreproc.c:audpreproc_dsp_event] Unknown Event 65535
E/kernel  (  125): [160112.785156] [audio_pcm_in.c:audrec_dsp_event] Unknown Event id 65535
D/libpjsip(14784): 17:10:02.122   pjsua_core.c !....TX 1070 bytes Response msg 200/INVITE/cseq=18021 (tdta0x2c3448) to tcp 93.94.109.36:5060:
D/libpjsip(14784): SIP/2.0 200 OK
D/libpjsip(14784): v: SIP/2.0/TCP 93.94.109.36;received=93.94.109.36;branch=z9hG4bK91b3.881d8005.0;i=e1
D/libpjsip(14784): v: SIP/2.0/TLS 192.168.1.55:38512;rport=38512;received=109.20.3.91;branch=z9hG4bKPjIUTDd3AKpVB.8O3paaHE-qJfCW3SzRSH
D/libpjsip(14784): Record-Route: 
D/libpjsip(14784): Record-Route: 
D/libpjsip(14784): i: -nGwirchXTqEobxZpt4Ot3MWAH9CMFyn
D/libpjsip(14784): f: "disple" ;tag=oMKTGNINfNkTtswEzYYsmYDSp3zzXrU0
D/libpjsip(14784): t: ;tag=QXzD8TsJKLzIbKBWYpNZu6K.6Ur.lqrZ
D/libpjsip(14784): CSeq: 18021 INVITE
D/libpjsip(14784): m: 
D/libpjsip(14784): k: replaces, 100rel, timer, norefersub
D/libpjsip(14784): x: 1800;refresher=uac
D/libpjsip(14784): Require: timer
D/libpjsip(14784): c: application/sdp
D/libpjsip(14784): l:   273
D/libpjsip(14784): 
D/libpjsip(14784): v=0
D/libpjsip(14784): o=- 3569587799 3569587800 IN IP4 188.189.67.183
D/libpjsip(14784): s=pjmedia
D/libpjsip(14784): c=IN IP4 188.189.67.183
D/libpjsip(14784): t=0 0
D/libpjsip(14784): m=audi
D/libpjsip(14784): 17:10:02.126   Master/sound  Underflow, buf_cnt=0, will generate 1 frame
I/libpjsip(14784): 17:10:02.133 pjsua_jni_addo !.......Call 0 state changed to CONNECTING
I/libpjsip(14784): 17:10:02.139 pjsua_jni_addo  .......Get call secure info...
D/libpjsip(14784): 17:10:02.139 pjsua_jni_addo  .......Get secure for media type 1
D/libpjsip(14784): 17:10:02.150   Master/sound !Underflow, buf_cnt=0, will generate 1 frame
D/libpjsip(14784): 17:10:02.637   pjsua_core.c !.TX 1070 bytes Response msg 200/INVITE/cseq=18021 (tdta0x2c3448) to tcp 93.94.109.36:5060:
D/libpjsip(14784): SIP/2.0 200 OK
D/libpjsip(14784): v: SIP/2.0/TCP 93.94.109.36;received=93.94.109.36;branch=z9hG4bK91b3.881d8005.0;i=e1
D/libpjsip(14784): v: SIP/2.0/TLS 192.168.1.55:38512;rport=38512;received=109.20.3.91;branch=z9hG4bKPjIUTDd3AKpVB.8O3paaHE-qJfCW3SzRSH
D/libpjsip(14784): Record-Route: 
D/libpjsip(14784): Record-Route: 
D/libpjsip(14784): i: -nGwirchXTqEobxZpt4Ot3MWAH9CMFyn
D/libpjsip(14784): f: "disple" ;tag=oMKTGNINfNkTtswEzYYsmYDSp3zzXrU0
D/libpjsip(14784): t: ;tag=QXzD8TsJKLzIbKBWYpNZu6K.6Ur.lqrZ
D/libpjsip(14784): CSeq: 18021 INVITE
D/libpjsip(14784): m: 
D/libpjsip(14784): k: replaces, 100rel, timer, norefersub
D/libpjsip(14784): x: 1800;refresher=uac
D/libpjsip(14784): Require: timer
D/libpjsip(14784): c: application/sdp
D/libpjsip(14784): l:   273
D/libpjsip(14784): 
D/libpjsip(14784): v=0
D/libpjsip(14784): o=- 3569587799 3569587800 IN IP4 188.189.67.183
D/libpjsip(14784): s=pjmedia
D/libpjsip(14784): c=IN IP4 188.189.67.183
D/libpjsip(14784): t=0 0
D/libpjsip(14784): m=audio 2
D/libpjsip(14784): 17:10:03.056   pjsua_core.c !.RX 464 bytes Request msg ACK/cseq=18021 (rdata0x2bbe94) from tcp 93.94.109.36:5060:
D/libpjsip(14784): ACK sip:koen@188.189.67.183:61249;transport=TCP;ob SIP/2.0
D/libpjsip(14784): Via: SIP/2.0/TCP 93.94.109.36;branch=z9hG4bKcydzigwkX;i=e1
D/libpjsip(14784): v: SIP/2.0/TLS 192.168.1.55:38512;received=109.20.3.91;rport=38512;branch=z9hG4bKPjZoyCzEnmqhwA9eTkDHhAJG8H4HQtcDM8
D/libpjsip(14784): Max-Forwards: 69
D/libpjsip(14784): f: "disple" ;tag=oMKTGNINfNkTtswEzYYsmYDSp3zzXrU0
D/libpjsip(14784): t: ;tag=QXzD8TsJKLzIbKBWYpNZu6K.6Ur.lqrZ
D/libpjsip(14784): i: -nGwirchXTqEobxZpt4Ot3MWAH9CMFyn
D/libpjsip(14784): CSeq: 18021 ACK
D/libpjsip(14784): l:  0
D/libpjsip(14784): 
D/libpjsip(14784): 
D/libpjsip(14784): --end msg--
I/libpjsip(14784): 17:10:03.062 pjsua_jni_addo  ...Call 0 state changed to CONFIRMED
I/libpjsip(14784): 17:10:03.067 pjsua_jni_addo  ...Get call secure info...
D/libpjsip(14784): 17:10:03.067 pjsua_jni_addo  ...Get secure for media type 1
D/Timer wrap(14784): Treat 3
D/libpjsip(14784): 17:10:03.736   pjsua_core.c  .RX 464 bytes Request msg ACK/cseq=18021 (rdata0x2bbe94) from tcp 93.94.109.36:5060:
D/libpjsip(14784): ACK sip:koen@188.189.67.183:61249;transport=TCP;ob SIP/2.0
D/libpjsip(14784): Via: SIP/2.0/TCP 93.94.109.36;branch=z9hG4bKcydzigwkX;i=e1
D/libpjsip(14784): v: SIP/2.0/TLS 192.168.1.55:38512;received=109.20.3.91;rport=38512;branch=z9hG4bKPjZoyCzEnmqhwA9eTkDHhAJG8H4HQtcDM8
D/libpjsip(14784): Max-Forwards: 69
D/libpjsip(14784): f: "disple" ;tag=oMKTGNINfNkTtswEzYYsmYDSp3zzXrU0
D/libpjsip(14784): t: ;tag=QXzD8TsJKLzIbKBWYpNZu6K.6Ur.lqrZ
D/libpjsip(14784): i: -nGwirchXTqEobxZpt4Ot3MWAH9CMFyn
D/libpjsip(14784): CSeq: 18021 ACK
D/libpjsip(14784): l:  0
D/libpjsip(14784): 
D/libpjsip(14784): 
D/libpjsip(14784): --end msg--
D/libpjsip(14784): 17:10:09.737   pjsua_core.c  .RX 512 bytes Request msg BYE/cseq=18022 (rdata0x2bbe94) from tcp 93.94.109.36:5060:
D/libpjsip(14784): BYE sip:koen@188.189.67.183:61249;transport=TCP;ob SIP/2.0
D/libpjsip(14784): Via: SIP/2.0/TCP 93.94.109.36;branch=z9hG4bK61b3.42e06ab3.0;i=e1
D/libpjsip(14784): v: SIP/2.0/TLS 192.168.1.55:38512;received=109.20.3.91;rport=38512;branch=z9hG4bKPjol0.OuxNVdk-xTPTMcYBq7tEebmDwz5p
D/libpjsip(14784): Max-Forwards: 69
D/libpjsip(14784): f: "disple" ;tag=oMKTGNINfNkTtswEzYYsmYDSp3zzXrU0
D/libpjsip(14784): t: ;tag=QXzD8TsJKLzIbKBWYpNZu6K.6Ur.lqrZ
D/libpjsip(14784): i: -nGwirchXTqEobxZpt4Ot3MWAH9CMFyn
D/libpjsip(14784): CSeq: 18022 BYE
D/libpjsip(14784): User-Agent: CSipSimple_GT-I9100-15/r1916
D/libpjsip(14784): l:  0
D/libpjsip(14784): 
D/libpjsip(14784): 
D/libpjsip(14784): --end msg--
D/libpjsip(14784): 17:10:09.738   pjsua_core.c  .......TX 428 bytes Response msg 200/BYE/cseq=18022 (tdta0x2c51a8) to tcp 93.94.109.36:5060:
D/libpjsip(14784): SIP/2.0 200 OK
D/libpjsip(14784): v: SIP/2.0/TCP 93.94.109.36;received=93.94.109.36;branch=z9hG4bK61b3.42e06ab3.0;i=e1
D/libpjsip(14784): v: SIP/2.0/TLS 192.168.1.55:38512;rport=38512;received=109.20.3.91;branch=z9hG4bKPjol0.OuxNVdk-xTPTMcYBq7tEebmDwz5p
D/libpjsip(14784): i: -nGwirchXTqEobxZpt4Ot3MWAH9CMFyn
D/libpjsip(14784): f: "disple" ;tag=oMKTGNINfNkTtswEzYYsmYDSp3zzXrU0
D/libpjsip(14784): t: ;tag=QXzD8TsJKLzIbKBWYpNZu6K.6Ur.lqrZ
D/libpjsip(14784): CSeq: 18022 BYE
D/libpjsip(14784): l:  0
D/libpjsip(14784): 
D/libpjsip(14784): 
D/libpjsip(14784): --end msg--
I/libpjsip(14784): 17:10:09.754 pjsua_jni_addo  ......Call 0 is DISCONNECTED [reason=200 (Normal call clearing)]
I/libpjsip(14784): 17:10:09.793 pjsua_jni_addo  ......Get call secure info...
D/libpjsip(14784): 17:10:09.793 pjsua_jni_addo  ......Get secure for media type 1
D/libpjsip(14784): 17:10:09.881  pjsua_media.c  ......Call 0: deinitializing media..
D/libpjsip(14784): 17:10:09.895  pjsua_media.c  ........Media stream call00:0 is destroyed
D/libpjsip(14784): 17:10:10.902    pjsua_aud.c !Closing sound device after idle for 1 second(s)
D/libpjsip(14784): 17:10:10.902 android_jni_de  .Get stream params
D/libpjsip(14784): 17:10:10.902    pjsua_aud.c  .Closing Android Audio sound playback device and Android Audio sound capture device
I/libpjsip(14784): 17:10:10.902 android_jni_de  .Stopping stream
I/libpjsip(14784): 17:10:10.911 android_jni_de !&gt;&gt; Record thread stopped
I/libpjsip(14784): 17:10:10.915 android_jni_de !&gt;&gt; Play thread stopped
E/AudioPolicyManagerBase(  118): unknown stream type
D/libpjsip(14784): 17:10:11.007 android_jni_de !.Stopping Done
D/libpjsip(14784): 17:10:11.007 android_jni_de  .Destroying stream
W/libpjsip(14784): 17:10:11.007 android_jni_de  .Already stopped.... nothing to do here
I/libpjsip(14784): 17:10:11.007 android_jni_de  .---&gt; Released recorder
I/libpjsip(14784): 17:10:11.007 android_jni_de  .---&gt; Released track
I/libpjsip(14784): 17:10:11.007 android_jni_de  .Stream is destroyed</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Need-Details</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>