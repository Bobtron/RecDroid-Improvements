https://code.google.com/archive/p/csipsimple/issues/1554<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #1554</h1>
            <p class="ng-binding">More Choppy sound compared to CounterPath bria with ilbc-Code</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 5, 2012 by
                  <i class="ng-binding">Massive Rabbit</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p><b>What steps will reproduce the problem?</b>
1. Install Counterpath Bria VOIP-App, set ilbc as only allowed Codec
2. Make a phone call via EDGE connection
3. Make also a phone call with CSipSimple and only allowed Coded is ilbc</p>

<p><b>What is the expected output? What do you see instead?</b>
Soundquality should be as good as with counterpath bria</p>

<p><b>What version of the product are you using? On what operating system?</b>
Tried latest nightly and current release (0.03-01 r1108)</p>

<p><b>Please provide any additional information below.</b>
Phone is samsung galaxy i9000</p>

<p>When using CSipSimple via EDGE there is always choppy sound. You can understand your phone partner, but because of the choppy sound much less. Counterpath bria has barely chopped sound. Both apps were configured to use only ilbc 30 Codec. The other side also used only ilbc with both apps. 
I tried several times, counterpath bria always had the better sound quality.
I know CSipSimple is free, but I think the sound quality can be made as high as with the commercial product.
Don't know if there is as setting so that I can improve sound quality. </p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 5, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Well, as far as I understood, bria use the same sip stack than the one used by csipsimple. But they are closed source ;).</p>

<p>However, iLBC implementation choosen by csipsimple is probably different than the one they use (unless they reuse my source code ;) ). In CSipSimple I decided to use the implementation from webRTC project. This project is developped by google and is opensource too. The benefit of their implementation is that it should run on devices with lower cpu capabilities. However, I'm not sure it's as performant as the other one used in pjsip. I also have to check if it's ilbc 20 or ilbc 30 that is used by default in webRTC. Maybe switching to 30 could be a good idea.</p>

<p>I also think that your problem could be linked to something different. There is many things in android audio layer that may make worse/better the audio layer. So you should try to play with <a href="http://code.google.com/p/csipsimple/wiki/FAQ?wl=en#Audio_routing_troubleshooting">http://code.google.com/p/csipsimple/wiki/FAQ?wl=en#Audio_routing_troubleshooting</a> options.
There is also many options that could impact audio quality. The audio quality option, the echo cancellation mode (or disabled) etc.</p>

<p>Just a side note about commercial vs opensource (not only free, but opensource and free as in speech ;) ), the fact that csipsimple is community driven project and that anyone can contribute make that the project should in the future be better than a commercial project as soon as users helps to develop it. Obviously if all users decide to use Bria or any commercial project and don't take care of their freedom, the CSipSimple project will never become as good as any commercial one. But if users decide to help (documenting, helping support, or even developing), I believe in the fact the application can be better. It's an app made by users for users ;).
It's somehow more than just an efficiency choice, but more a philosophical choice ;)</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 8, 2012 by
                  <i class="ng-binding">Massive Rabbit</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>My Fritzbox tells me when making a call that CSipSimple also uses (like bria) ilbc-30, but I'm not 100% sure that this is right. Tried with Wireshark to find something out, but Wireshark tells me only it is ilbc but not what kind of.</p>

<p>"Just a side note about commercial vs opensource (not only free, but opensource and free as in speech ;) ), the fact that csipsimple is community driven project and that anyone can contribute make that the project should in the future be better than a commercial project as soon as users helps to develop it. Obviously if all users decide to use Bria or any commercial project and don't take care of their freedom, the CSipSimple project will never become as good as any commercial one. But if users decide to help (documenting, helping support, or even developing), I believe in the fact the application can be better. It's an app made by users for users ;).
It's somehow more than just an efficiency choice, but more a philosophical choice ;)"</p>

<p>Thats why I postet here, I want to help to improve CSipSimple.</p>

<p>I've tested various options, but sound is still choppy. With bria there are almost no interruptions in audio. 
I changed following options, made a call to test and then reverted it, because there was no change in the audio quality.
* Changed Audio implementation to OpenSL-ES
* Changed Audio mode to IN_CALL
* Activated "Use WebRTC implementation"
* Tried the Option "IO Queue" but that leads that CSipSimple can't register, don't know why but a quick look at Wireshark seems that it doesn't send authentification information when that option is enabled.
* Set Paket ptime from 20 to 60
* Set samplingrate from 16 kHz to 8 kHz
* Set audio quality from 4 to 8 and to 1
* Deactivated echo compensation completely</p>

<p>I also tried in the user interface settings that display stays on while in call. There is explicitely stated that it prevents problems with choppy audio.</p>

<p>All this didn't help. What now? I can't really use CSipSimple because I can't hardly understand my phone partner. With Bria everything is fine, almost no interruptions (see above).</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 9, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I've updated webRTC version in nightly and seems that it improves a lot the echo canceller that turned very weird in previous version.
You can try it : <a href="http://nightlies.csipsimple.com/trunk/">http://nightlies.csipsimple.com/trunk/</a>
Also, maybe removing VAD (voice auto detection) could help. Since the app does not create noise comfort sound, it's sometimes a little bit annoying (and maybe it turns iLBC in a weird state).</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #4</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 9, 2012 by
                  <i class="ng-binding">Massive Rabbit</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I've tried the latest nightly. Saidly, there is no improvement. What can I try next?
Interessting thing is that even I in my last test very bad quality (no audio for 3-4 seconds) there is shown that no packets were lost (Fritzbox tells me the same). </p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #5</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 9, 2012 by
                  <i class="ng-binding">Massive Ox</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Hi, I have this same issue, and have also messed around with almost every setting, and have no perceivable changes.  I just started using this with a Samsung Galaxy Nexus about 4 days ago, and have tried almost over VoIP app by now.  Bria was a bit better than CSipSimple in voice quality, but the UI is terrible/crashy, and the lack of bluetooth working was a dealbreaker.</p>

<p>I'm also a developer/programmer, and love open source, so could feasibly make code changes/tests, and re-build if I knew where to start (never worked on this kinda stuff).  It would be great to get this app to the best, and I think it already is getting there, honestly.  I switched to this phone and no longer have any calling plan, so I have to figure out a way to make VoIP work.  I like making things by users for users :)</p>

<p>My audio issues with it are sporadic: sometimes the call sounds great, then other times it's useless and the call has to be hung up and started over.  I've even had 20 seconds of silence once before I could hear the other side come back, then it was all  choppy.
I haven't yet isolated the network/internet quality, but I'm tending to think here that it's not a factor, as it just doesn't make sense.  I have problems with the call quality even here on my home wi-fi network.  I'm in San Francisco and speedtest.net gives me 19ms ping time, 24.9Mbps down, and about 6Mbps up.  </p>

<p>On the mobile side, everywhere I'm using it is with T-Mobile's HSDPA+.  Data rates seem to average around 100-150ms, 4-8Mbps down, 1.4 - 1.8 Mbps up consistently wherever I go.  In theory this should be more than enough to have tons of calls going through the pipe, but why are there so many issues just having 1?</p>

<p>Let me know if there is anything you want me to try, or any logs I could provide, I'd be more than happy to help any way that I can.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #6</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Mar 22, 2012 by
                  <i class="ng-binding">Swift Lion</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>On Samsung Exhibit 2 4g, running Android 2.3.5, I have the same choppiness issue. I am using Radiovox as my sip provider. ILBC on Media5-fone sounds really good but not on CSipSimple, unfortunately.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #7</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Aug 10, 2013 by
                  <i class="ng-binding">Happy Ox</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>anyone know if this has been fixed? I'm having issues even over wifi.... I have a gsm galaxy nexus. </p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Need-Details</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>