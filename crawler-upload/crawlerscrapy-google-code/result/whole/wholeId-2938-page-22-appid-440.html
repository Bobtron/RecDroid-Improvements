https://code.google.com/archive/p/csipsimple/issues/1900<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #1900</h1>
            <p class="ng-binding">can't hangup</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Aug 23, 2012 by
                  <i class="ng-binding">Happy Monkey</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>On outgoing call c sip simple can't initiate hangup. It does not do anything pressing hangup, the client does not send anything, examined by tcpdump on server side.</p>

<p>phone: LT22i 4.0.4 ics, csipsimple: r1788
server side: asterisk 1.6.2.20</p>

<p>the trace: </p>

<p>INVITE sip:1231@172.21.57.15 SIP/2.0
Via: SIP/2.0/UDP 172.21.56.101:43258;rport;branch=z9hG4bKPjfpmYHsiUz81ykYKn2QDA1YbN6QgezTUx
Max-Forwards: 70
From: &lt;sip:19@172.21.57.15&gt;;tag=Z0BRXFPjfGUFIdoHh8khsrWm46QAsael
To: &lt;sip:1231@172.21.57.15&gt;
Contact: &lt;sip:19@172.21.56.101:43258&gt;
Call-ID: reppVkPzA23OqieJx4hPQOs1P.MIxPk4
CSeq: 3241 INVITE
Route: &lt;sip:172.21.57.15;lr&gt;
Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
Supported: replaces, 100rel, timer, norefersub
Session-Expires: 1800
Min-SE: 90
User-Agent: CSipSimple_LT22i-15/r1788
Content-Type: application/sdp
Content-Length:   268</p>

<p>v=0
o=- 3554702838 3554702838 IN IP4 172.21.56.101
s=pjmedia
b=AS:84
t=0 0
m=audio 40022 RTP/AVP 8 101
c=IN IP4 172.21.56.101
b=TIAS:64000
a=rtcp:40023 IN IP4 172.21.56.101
a=sendrecv
a=rtpmap:8 PCMA/8000
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-15</p>

<p>SIP/2.0 401 Unauthorized
Via: SIP/2.0/UDP 172.21.56.101:43258;branch=z9hG4bKPjfpmYHsiUz81ykYKn2QDA1YbN6QgezTUx;received=172.21.56.101;rport=43258
From: &lt;sip:19@172.21.57.15&gt;;tag=Z0BRXFPjfGUFIdoHh8khsrWm46QAsael
To: &lt;sip:1231@172.21.57.15&gt;;tag=as5c439d4a
Call-ID: reppVkPzA23OqieJx4hPQOs1P.MIxPk4
CSeq: 3241 INVITE
Server: FPBX-2.8.1(1.6.2.20)
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO
Supported: replaces, timer
WWW-Authenticate: Digest algorithm=MD5, realm="asterisk", nonce="1bbe5660"
Content-Length: 0</p>

<p>ACK sip:1231@172.21.57.15 SIP/2.0
Via: SIP/2.0/UDP 172.21.56.101:43258;rport;branch=z9hG4bKPjfpmYHsiUz81ykYKn2QDA1YbN6QgezTUx
Max-Forwards: 70
From: &lt;sip:19@172.21.57.15&gt;;tag=Z0BRXFPjfGUFIdoHh8khsrWm46QAsael
To: &lt;sip:1231@172.21.57.15&gt;;tag=as5c439d4a
Call-ID: reppVkPzA23OqieJx4hPQOs1P.MIxPk4
CSeq: 3241 ACK
Route: &lt;sip:172.21.57.15;lr&gt;
Content-Length:  0</p>

<p>INVITE sip:1231@172.21.57.15 SIP/2.0
Via: SIP/2.0/UDP 172.21.56.101:43258;rport;branch=z9hG4bKPjbQWtvUAyeNOk-SQ.RmSxoShbeB6Cdv0t
Max-Forwards: 70
From: &lt;sip:19@172.21.57.15&gt;;tag=Z0BRXFPjfGUFIdoHh8khsrWm46QAsael
To: &lt;sip:1231@172.21.57.15&gt;
Contact: &lt;sip:19@172.21.56.101:43258&gt;
Call-ID: reppVkPzA23OqieJx4hPQOs1P.MIxPk4
CSeq: 3242 INVITE
Route: &lt;sip:172.21.57.15;lr&gt;
Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
Supported: replaces, 100rel, timer, norefersub
Session-Expires: 1800
Min-SE: 90
User-Agent: CSipSimple_LT22i-15/r1788
Authorization: Digest username="19", realm="asterisk", nonce="1bbe5660", uri="sip:1231@172.21.57.15", response="d7cfbe84578058673fa8123969f89a9c", algorithm=MD5
Content-Type: application/sdp
Content-Length:   268</p>

<p>v=0
o=- 3554702838 3554702838 IN IP4 172.21.56.101
s=pjmedia
b=AS:84
t=0 0
m=audio 40022 RTP/AVP 8 101
c=IN IP4 172.21.56.101
b=TIAS:64000
a=rtcp:40023 IN IP4 172.21.56.101
a=sendrecv
a=rtpmap:8 PCMA/8000
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-15</p>

<p>SIP/2.0 100 Trying
Via: SIP/2.0/UDP 172.21.56.101:43258;branch=z9hG4bKPjbQWtvUAyeNOk-SQ.RmSxoShbeB6Cdv0t;received=172.21.56.101;rport=43258
From: &lt;sip:19@172.21.57.15&gt;;tag=Z0BRXFPjfGUFIdoHh8khsrWm46QAsael
To: &lt;sip:1231@172.21.57.15&gt;
Call-ID: reppVkPzA23OqieJx4hPQOs1P.MIxPk4
CSeq: 3242 INVITE
Server: FPBX-2.8.1(1.6.2.20)
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO
Supported: replaces
Contact: &lt;sip:1231@172.21.57.15&gt;
Content-Length: 0</p>

<p>SIP/2.0 180 Ringing
Via: SIP/2.0/UDP 172.21.56.101:43258;branch=z9hG4bKPjbQWtvUAyeNOk-SQ.RmSxoShbeB6Cdv0t;received=172.21.56.101;rport=43258
From: &lt;sip:19@172.21.57.15&gt;;tag=Z0BRXFPjfGUFIdoHh8khsrWm46QAsael
To: &lt;sip:1231@172.21.57.15&gt;;tag=as000967f1
Call-ID: reppVkPzA23OqieJx4hPQOs1P.MIxPk4
CSeq: 3242 INVITE
Server: FPBX-2.8.1(1.6.2.20)
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO
Supported: replaces
Contact: &lt;sip:1231@172.21.57.15&gt;
Content-Length: 0</p>

<p>SIP/2.0 200 OK
Via: SIP/2.0/UDP 172.21.56.101:43258;branch=z9hG4bKPjbQWtvUAyeNOk-SQ.RmSxoShbeB6Cdv0t;received=172.21.56.101;rport=43258
From: &lt;sip:19@172.21.57.15&gt;;tag=Z0BRXFPjfGUFIdoHh8khsrWm46QAsael
To: &lt;sip:1231@172.21.57.15&gt;;tag=as000967f1
Call-ID: reppVkPzA23OqieJx4hPQOs1P.MIxPk4
CSeq: 3242 INVITE
Server: FPBX-2.8.1(1.6.2.20)
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO
Supported: replaces
Contact: &lt;sip:1231@172.21.57.15&gt;
Content-Type: application/sdp
Content-Length: 235</p>

<p>v=0
o=root 224732356 224732356 IN IP4 172.21.57.15
s=Asterisk PBX 1.6.2.20
c=IN IP4 172.21.57.15
t=0 0
m=audio 13570 RTP/AVP 8 101
a=rtpmap:8 PCMA/8000
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-16
a=ptime:20
a=sendrecv</p>

<p>ACK sip:1231@172.21.57.15 SIP/2.0
Via: SIP/2.0/UDP 172.21.56.101:43258;rport;branch=z9hG4bKPj8X9-b14vYClMWTugHm0og.7LzCdAcKcf
Max-Forwards: 70
From: &lt;sip:19@172.21.57.15&gt;;tag=Z0BRXFPjfGUFIdoHh8khsrWm46QAsael
To: &lt;sip:1231@172.21.57.15&gt;;tag=as000967f1
Call-ID: reppVkPzA23OqieJx4hPQOs1P.MIxPk4
CSeq: 3242 ACK
Content-Length:  0</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Aug 23, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Is the client in the same 172.21.57.15 network? Or is it in a different network and both network are not routable? (for example 172.21.56.xxx)</p>

<p>Can you collect logs from the app. I think it sends the BYE command, but as a subsequent SIP command it doesn't necessarily use the same path to reach the other side.
See HowToCollectLogs wiki page.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Aug 23, 2012 by
                  <i class="ng-binding">Happy Monkey</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>172.21.57.0/24 wired 172.21.56.0/24 wifi, the 2 networks are routed in our office.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Aug 23, 2012 by
                  <i class="ng-binding">Happy Monkey</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Please forgot the ticket sorry... The juniper srx is stupid.... Sorry again, works fine everthing.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #4</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Aug 23, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Ok, Thanks for the update.
No problems :). Don't hesitate if you find something. I learn a lot of things helping to debug this kind of situations.</p>

<p>As I rely entierly on pjsip for the sip stack and I'm not a sip expert, my skills are often improved when I help to debug some sip problem. Very often pjsip does right things as it's widely used by other products and intensively test. But understanding why and what configuration should apply the case help me to improve the final user app.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Need-Details</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>