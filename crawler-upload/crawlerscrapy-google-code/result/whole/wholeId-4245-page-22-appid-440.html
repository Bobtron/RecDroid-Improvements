https://code.google.com/archive/p/csipsimple/issues/602<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #602</h1>
            <p class="ng-binding">Registration lost if screen off</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 19, 2011 by
                  <i class="ng-binding">Happy Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>State: only Wi-fi connection avaiable (3G not avaiable)</p>

<ol>
<li>If I don't use my handset for a while screen goes off</li>
<li>Then Wi-fi goes off and so SIP registration</li>
<li>If I touch display then Wi-Fi and SIP registration come back.</li>
</ol>

<p>... So while screen was off I lost all incoming calls :(</p>

<p>X10 Mini Pro - Android 2.1</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 19, 2011 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>There is two things to ensure :
1- CSipSimple has to be set in mode "Always available" (or alternatively you can go in CSipsimple network settings and activate "lock wifi"</p>

<p>2- In <em>Android</em> settings, in network, in wifi connection where you see the list of networks ssid, press menu and advanced.
And here you have a sleep mode setting. You can choose this setting to always on or sleep when screen is off or never when cable is plugged. </p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 19, 2011 by
                  <i class="ng-binding">Happy Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Solved! Problem was as you decsribed in point 2: default sleep mode settings was sleep when screen is off (so strange I was the 1st to report issue).</p>

<p>Thanx :)</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 19, 2011 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>In fact it depends on the device.</p>

<p>The first point I asked you to check correspond to something I add in CSipSimple to "ensure" wifi is locked up while the application is connected to wifi.</p>

<p>Some device (manufacturer implementation - and that's the good approach regarding android API) consider that the fact that this has a higher priority over the android setting about sleep policy. In this case sleep policy applies only if no application hold a lock on Wifi.</p>

<p>Other devices, usually when manufacturer is not used with android OS... Sony is really young in this field but they are improving their knowledge : the 2.1 update fixed a lot of things regarding audio API for example. So for other devices, the sleep policy in android settings is consider as more important than the fact an application hold a lock on wifi. As consequence when screen goes of, even if I claim that I need wifi, the wifi will be turned off after a delay.</p>

<p>I could add an option directly inside CSipSimple to force sleep policy. It would directly change the value you changed in android settings. But I fear that users not affected by a bad manufacturer implementation will activate it and it will result a worse battery consumption.</p>

<p>Cause if properly implemented by manufacturer, in the case you are not camping on a wifi spot, CSipSimple will release the lock and as consequence, wifi will follow sleep policy and will be turned off by the OS. This is better in term of battery consumption cause if not turned off when not camping under wifi, the wifi chipset will scan frequently wifi networks around you and try to connect.
That's a good idea if you prefer to use always Wifi but a bad one if you prefer to save battery.</p>

<p>So not so strange that you was the first to notice that ;). </p>

<p>You know android development is sometimes really complicated cause of the fact some manufacturer does not really respect android APIs... The apps works very well on the devices I develop on, but for example there is a lot of known issues on other devices (specially with audio API and audio routing).  ;) </p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #4</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 19, 2011 by
                  <i class="ng-binding">Happy Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Oh, great clarification.</p>

<p>The reason why I adopted solution n. 2 (wifi lock in Android settings) was you used "alternatively" word in your solution n. 1. So I thought 'I already have mode "Always available" on, so also "lock wifi" in CSipsimple settings will not work to solve my problem as well' :)</p>

<p>Of course I switched to solution n. 1, and now I can confirm that "lock wifi" in CSipsimple settings works great to not lose connection.</p>

<p>I'm going to donate you a beer to thank you for your effort and your professionalism.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #5</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 22, 2011 by
                  <i class="ng-binding">Happy Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Anyway... if screen is off then network switching 3G -&gt; Wifi doesn't work, right?</p>

<p>If right, is there a workaround/app/something that could help? I'm sure you agree that Voip always need best connection avaiable, so I wonder how can I make my X10 Mini Pro switching to Wifi when I go to office/home even if screen is off.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #6</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 22, 2011 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Yes if you choose option "1" (the setting in CSipSimple) it's the behavior you'll observe. If you choose solution "2" with android settings, wifi card will always be up and trying to scan networks around you. So that as soon as it will find a network it will connect to it, and wake up CSipSimple that will register.</p>

<p>If you use setting in CSipSimple only, CSipSimple will just acquire the lock over wifi if wifi currently available. It will not wake up wifi card to check if there is an available wifi network.
It's done like that to avoid battery consumption and to not impact the normal android behavior.</p>

<p>So up to you to choose the best setting for you. If you really want your phone to try to connect wifi around you even if screen is off, change the android wifi sleep policy mode. The bad side is that it will consume more battery cause wifi card will periodically check for wifi around it. If you do so, CSipSimple setting about always available or available on wifi is the same cause the wifi is always locked by the system itself.</p>

<p>If you prefer to ~save~ battery and have wifi connected only when you turn screen on (or if you install another app such as Tasker or Locale that activate wifi connection under conditions), you can leave wifi sleep policy to screen off.
In this case CSipSimple setting make sense : if you choose always available, it will lock wifi as soon as it detects wifi and prevent the wifi card to goes off when screen goes off. And if you choose "on wifi" it will not lock the wifi card. This setting save more battery but you are less available; it could be very interesting when used with some third party app that manage your wifi connection time.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #7</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 23, 2011 by
                  <i class="ng-binding">Happy Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I made dozens of tests with SE Xperia Mini Pro: if I choose solution "2" (Android sleep policy to "never") I have following results:
a. it scans for avaiable Wi-Fi <em>ONLY</em> if screen is <em>ON</em> (do you agree)?
b. so until screen doesn't go on then phone keeps to connect to 3G even if I have Wi-Fi coverage;
c. so if I have an incoming call then screen goes on, then phone switch from 3G to Wi-Fi and CSipSimple lose registration after a couple of rings (or after few seconds of conversation if I answer immediately) so call is compromised/interrupted;
d. CSipSimple re-register in Wi-Fi.</p>

<p>More, if screen is off then CSipSimple has trouble in Wi-Fi -&gt; 3G too: when phone disconnect from Wi-Fi then CSipSimple loses registration (of course) and doesn't try to re-register in 3G until phone wake up. Do you confirm?</p>

<p>I know Android has some limitations in Wi-Fi, as you stated here (without having replied yet): <a href="http://code.google.com/p/android/issues/detail?id=9781">http://code.google.com/p/android/issues/detail?id=9781</a></p>

<p>A good VoIp system need good connection.
A mobile VoIp system need it everywhere.
An always-ready-to-incoming-calls VoIp system need it even if screen is off.
So... why CSipSimple can't provide by itself? Why CSipSimple can't have its own connection policy? Why Tasker app can scan and make phone connect to avaiable Wi-Fi and CSipSimple can't?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #8</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 23, 2011 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Mmm what you observer with sleep policy to never is strange.</p>

<p>For a/b : If sleep policy is set to never, android ~should~ scan for available wifi even if screen is off. At least that's what it does on my other phones. But this behavior could be change by manufacturers. I'll try on my X10 mini (I don't use a lot those times ;) ), and let you know if I get the same thing.</p>

<p>For c : weird. I didn't thought about that. -Well in my country SIP is not allowed over 3g so I didn't have this kind of problematics ;) -. Yes something has to be done for this point. At least cutting wifi before ringing.
In an ideal world CSipSimple should be able to handle hand-over but that's really complicated to manage so I postponed that for now.
But well, anyway if point a/ does not occurs it would reduce frequency of this case to only when you actually move and enter wifi coverage.</p>

<p>For your last point, that's could be debated. My approach is to match android approach. Each application has a goal and should do it well.
My first thought is that point a/ should not occur. If you set android wifi card setting to never sleep it should never sleep. So first problem comes here probably from some bug in X10 rom.
Then my point about <em>optimization</em> and "on context" wifi activation is still relevant I think.</p>

<p>My approach is that each application in android should be focused on a specific task and do it well. Then once an application do correctly its job, this application should open API to other applications to use it. The entire android system which is a model in terms of software design is all about that. And that's really powerful.</p>

<p>What I resent is that in field of "context aware" application there is no OpenSource application and as consequence no way for other developpers to provides plugins for their apps to use such a service on the android platform regardless the "context aware" application. I already write several time on this issue list that if I get time I'll try to start something about that cause it is a big big lack on the android platform.</p>

<p>Keep in mind that such an app is about "optimization" not about availablity of wifi. And in terms of optimization, I think that a SIP application will <em>never</em> be as good as an application focused on context awareness. For example with a context aware app, you can provide features such as "Hey I want xxxx to be active only from 8AM to 8PM" where xxxxx is whatever you want (in our case SIP).... well imagine the combination... that's much more powerful than just SIP.</p>

<p>That's the reason why, if I do something like that, I'll not do it inside CSipSimple. I'll do another project, and CSipSimple will just a plugin that represent 0.001% of what could be done with this other app. And besides it will provide to CSipSimple much more other capabilities about context awarness that everything I could imagine just for CSipSimple cause development effort of "context" plugins will be shared by the all community (even those who do not matter SIP).</p>

<p>Hope that's more clear, my point was about optimization, not about connection reliability. For that point I rely on android OS, which should provide a never sleep wifi card when we setup it to never sleep.... but unfortunately on your phone it does not :(...</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #9</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 27, 2011 by
                  <i class="ng-binding">Happy Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Have you already tested the a/b problem with your X10 Mini? This is the "core problem". I wrote in a lot of forums trying to intercept users having same device/firmware as me, but I still have not had definite answers.</p>

<p>Let me know result of your testing. I'm not a power user and much less a coder, so it's a very hard test for me because I can't "see" what does it happen when the screen is off. I'm pretty sure you'll have more advanced tools to do it :)</p>

<p>In the meanwhile I'm having a succesfully workaround with a Tasker task that turn on screen for 15 seconds every 10 minutes, so device switch Wifi &lt;-&gt; 3G (if it have to) and CSipSimple works GREAT :)</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #10</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Mar 2, 2011 by
                  <i class="ng-binding">Massive Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I have the same problem as the op. On my Nexus one (wifi only, no SIM card), I have turned off CSipsimple's "wifi lock" and Android's policy is to disable "When screen turns off". When I turn off the screen and turn it back on, the SIP has unregistered and gives me a reregistration notification in a few seconds. This is as expected. </p>

<p>When I turn on either or both of these settings (and "always available"), the SIP does not give me a reregistration notification, and appears to have had access to wifi while the screen was off. However, when I try to call my phone, nothing happens. Also, when accessing dropbox and downloading a file, turning off the screen haults the no matter what combination of setting I use. </p>

<p>It would appear that these settings are insufficient enough to keep the phone's wifi alive. Is there anything else I can do?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #11</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Mar 9, 2011 by
                  <i class="ng-binding">Happy Monkey</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>"In the meanwhile I'm having a succesfully workaround with a Tasker task that turn on screen for 15 seconds every 10 minutes" </p>

<p>Hi, how did you setup the task in tasker?</p>

<p>Thanks in advance</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">WrongConfig</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>