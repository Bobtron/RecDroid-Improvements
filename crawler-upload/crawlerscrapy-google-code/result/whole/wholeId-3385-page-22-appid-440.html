https://code.google.com/archive/p/csipsimple/issues/1409<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #1409</h1>
            <p class="ng-binding">ZRTP not verified</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 2, 2011 by
                  <i class="ng-binding">Swift Bird</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Hi,</p>

<p>while ZRTP/SRTP work the keys/fingerprints are not being displayed to both parties which renders the encryption useless.</p>

<p>If the voip provider does man-in-the-middle zrtp implementation with both parties the calls can be decrytped without one knowing anything about it.</p>

<p>Please display the fingerprints and/or a catchprase like Redphone did  so that both parties can confirm that no man-in-the-middle is present.</p>

<p>Thank You</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 2, 2011 by
                  <i class="ng-binding">Swift Bird</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>zfone FAQ: (redphone does it similar - SAS string)</p>

<p>"
A: The Diffie-Hellman key exchange by itself does not provide protection against man-in-the-middle (MiTM) attacks. To authenticate the key exchange, ZRTP uses a Short Authentication String (SAS), which is essentially a cryptographic hash of the two Diffie-Hellman values. The SAS value is rendered to both ZRTP endpoints. To carry out authentication, this SAS value is read aloud to the communication partner over the voice connection. If the values on both ends do not match, it indicates the presence of a man-in-middle attack. If they do match, there is a high probability that no man-in-the-middle is present. The use of hash commitment in the DH exchange constrains the attacker to only one guess to generate the correct SAS in his attack, which means the SAS can be quite short. A 16-bit SAS, for example, provides the attacker only one chance out of 65536 of not being detected"</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 2, 2011 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>If ZRTP is established it will show SAS string (it will even ask you to confirm with a popup if not already known remote party). 
"ZRTP not verified" means that ZRTP is not able to be started between your two phones. </p>

<p>So I think there's a problem while it tries to establish the ZRTP media in your case. Can you try to collect some logs?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 2, 2011 by
                  <i class="ng-binding">Swift Bird</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Oh ok i thought its using zrtp but did not verify MIM.</p>

<p>Whatever i do using two android csipsimples i always only get zrtp not verif. Anything in the logs i could watch out for? The only points where encrytpion / zrtp is mentioned  is </p>

<p>D/libpjsip( 3139): 15:36:45.367 zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
D/libpjsip( 3139): 15:36:45.431 timer_android. !FIRE timer 0 at 16d9dc
I/libpjsip( 3139): 15:36:45.431 zrtp_android.c  ZRTP failed: 3, subcode: 5
D/libpjsip( 3139): 15:36:45.431 timer_android.  FIRE done and released</p>

<p>D/libpjsip( 3139): 15:36:49.838  pjsua_media.c  ........Media session call00:0 is destroyed
D/libpjsip( 3139): 15:36:49.838 transport_zrtp  .......Media stop - encrypted packets: 0, decrypted packets: 0
D/libpjsip( 3139): 15:36:49.838 transport_zrtp  .......Destroy - encrypted packets: 0, decrypted packets: 0
D/libpjsip( 3139): 15:36:49.838 timer_android.  .......Ask to cancel something already fired or cancelled : -1</p>

<p>Any information what ZRTP failed: 3, subcode: 5 is about?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #4</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 2, 2011 by
                  <i class="ng-binding">Swift Bird</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>PS: latest trunk apk</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #5</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 2, 2011 by
                  <i class="ng-binding">Happy Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I can confirm this problem, ZRTP is partially broken in the latest trunk builds.</p>

<p>When the CSipSimple is only work as Responder, the ZRTP works fine:
Example: CSipSimple -&gt; FS (bypass mode) -&gt; PhonerLite</p>

<p>When CSipSimple is the Initiator, the ZRTP connection always failed.
Example: CSipSimple -&gt; FS (bypass mode) -&gt; CSipSimple</p>

<p>In same environment the r1064 build is works fine.</p>

<hr>

<p>Device A: CSipSimple (Device B: is PhonerLite)</p>

<p>INFO/libpjsip(5676): zrtp_android.c  ..ZRTP transport created
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: Hello received, preparing a Commit
DEBUG/libpjsip(5676): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
DEBUG/libpjsip(5676): zrtp_android.c  ZRTP getInfos : ZRTP - No verif.
DEBUG/libpjsip(5676): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
INFO/libpjsip(5676): zrtp_android.c !ZRTP info message: Commit: Generated a public DH key
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: Responder: Commit received, preparing DHPart1
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: DH1Part: Generated a public DH key
INFO/libpjsip(5676): zrtp_android.c !ZRTP info message: Responder: DHPart2 received, preparing Confirm1
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: At least one retained secrets matches - security OK
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: Responder: Confirm2 received, preparing Conf2Ack
INFO/libpjsip(5676): zrtp_android.c  ZRTP - Ask PBX enrollment
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: Entered secure state
DEBUG/libpjsip(5676): zrtp_android.c !ZRTP getInfos : ZRTP - OK
DEBUG/libpjsip(5676): zrtp_android.c !ZRTP getInfos : ZRTP - OK</p>

<hr>

<p>But when CSipSimple is playing as Initiator ZRTP is failed, always.
CSipSimple -&gt; FS (bypass mode) -&gt; CSipSimple</p>

<p>Device A: CSipSimple</p>

<p>INFO/libpjsip(10636): zrtp_android.c  ..ZRTP transport created
INFO/libpjsip(10636): zrtp_android.c !ZRTP info message: Hello received, preparing a Commit
DEBUG/libpjsip(10636): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
DEBUG/libpjsip(10636): zrtp_android.c  ZRTP getInfos : ZRTP - No verif.
INFO/libpjsip(10636): zrtp_android.c !ZRTP info message: Commit: Generated a public DH key
DEBUG/libpjsip(10636): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
INFO/libpjsip(10636): zrtp_android.c  ZRTP info message: Initiator: DHPart1 received, preparing DHPart2
INFO/libpjsip(10636): zrtp_android.c !ZRTP warning message: No retained shared secrets available - must verify SAS
INFO/libpjsip(10636): zrtp_android.c  ZRTP Error: severity: 4, subcode: ffffff9e
INFO/libpjsip(10636): zrtp_android.c  ZRTP failed: 3, subcode: 6</p>

<p>Device B: CSipSimple</p>

<p>INFO/libpjsip(23677): zrtp_android.c  ...ZRTP transport created
DEBUG/libpjsip(23677): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
INFO/libpjsip(23677): zrtp_android.c  ZRTP info message: Hello received, preparing a Commit
DEBUG/libpjsip(23677): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
DEBUG/libpjsip(23677): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
INFO/libpjsip(23677): zrtp_android.c !ZRTP info message: Commit: Generated a public DH key
INFO/libpjsip(23677): zrtp_android.c  ZRTP info message: Responder: Commit received, preparing DHPart1
INFO/libpjsip(23677): zrtp_android.c  ZRTP info message: DH1Part: Generated a public DH key
INFO/libpjsip(23677): zrtp_android.c !ZRTP info message: Responder: DHPart2 received, preparing Confirm1
INFO/libpjsip(23677): zrtp_android.c  ZRTP failed: 4, subcode: 98</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #6</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 3, 2011 by
                  <i class="ng-binding">Happy Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>In Responder side, the "ZRTP failed: 4, subcode: 98" means that the Initiator sends wrong HVI to the Responder in the DHPart2 packet. Interesting that the HVI match when the Device B is PhonerLite and does not match when booth device is CSipSimple.</p>

<p>I did an another try, on the latest trunk, I revert this patch:
<a href="https://github.com/r3gis3r/ZRTP4PJ/commit/75dbe50b0f96704be324153905687c8c41b6bd4c">https://github.com/r3gis3r/ZRTP4PJ/commit/75dbe50b0f96704be324153905687c8c41b6bd4c</a>
and this patch:
<a href="http://code.google.com/p/csipsimple/source/diff?spec=svn1155&amp;r=1079&amp;format=side&amp;path=/trunk/CSipSimple/jni/csipsimple-wrapper/src/zrtp_android.c&amp;old_path=/trunk/CSipSimple/jni/csipsimple-wrapper/src/zrtp_android.c&amp;old=1076">http://code.google.com/p/csipsimple/source/diff?spec=svn1155&amp;r=1079&amp;format=side&amp;path=/trunk/CSipSimple/jni/csipsimple-wrapper/src/zrtp_android.c&amp;old_path=/trunk/CSipSimple/jni/csipsimple-wrapper/src/zrtp_android.c&amp;old=1076</a></p>

<p>So the resulting ZRTP code essentially identical to old r1064 code that works fine with pjsip 1.x. But in this case the reverted ZRTP code produces same error with pjsip 2.x.</p>

<p>My knowledge is end of here, so I must give up. :-(</p>

<hr>

<p>Device A: CSipSimple (Device B: is PhonerLite)</p>

<p>INFO/libpjsip(5676): zrtp_android.c  ..ZRTP transport created
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: Hello received, preparing a Commit
DEBUG/libpjsip(5676): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
DEBUG/libpjsip(5676): zrtp_android.c  ZRTP getInfos : ZRTP - No verif.
INFO/libpjsip(5676): zrtp_android.c !ZRTP info message: Commit: Generated a public DH key
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: Responder: Commit received, preparing DHPart1
DEBUG/libpjsip(5676): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: DH1Part: Generated a public DH key
INFO/libpjsip(5676): zrtp_android.c !ZRTP info message: Responder: DHPart2 received, preparing Confirm1
INFO/libpjsip(28996): zrtp_android.c  ZRTP trace: Responder: prepareConfirm1: ExpectedHvi: B22D113883DEE2A1E481D60C7877E464761EB5945AAB58C966BD844D90E82FAA
INFO/libpjsip(28996): zrtp_android.c  ZRTP trace: Responder: prepareConfirm1: ReceivedHvi: B22D113883DEE2A1E481D60C7877E464761EB5945AAB58C966BD844D90E82FAA
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: At least one retained secrets matches - security OK
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: Responder: Confirm2 received, preparing Conf2Ack
INFO/libpjsip(5676): zrtp_android.c  ZRTP - Ask PBX enrollment
INFO/libpjsip(5676): zrtp_android.c  ZRTP info message: Entered secure state
DEBUG/libpjsip(5676): zrtp_android.c !ZRTP getInfos : ZRTP - OK
DEBUG/libpjsip(5676): zrtp_android.c !ZRTP getInfos : ZRTP - OK</p>

<hr>

<p>Device A: CSipSimple</p>

<p>INFO/libpjsip(28485): zrtp_android.c  ..ZRTP transport created
INFO/libpjsip(28485): zrtp_android.c !ZRTP info message: Hello received, preparing a Commit
DEBUG/libpjsip(28485): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
DEBUG/libpjsip(28485): zrtp_android.c  ZRTP getInfos : ZRTP - No verif.
INFO/libpjsip(28485): zrtp_android.c !ZRTP info message: Commit: Generated a public DH key
INFO/libpjsip(28485): zrtp_android.c  ZRTP trace: Initiator: prepareCommit: setHvi: BFEE8FE57E6CF0AD34D27D70E35E6F8B54E67B26B21D7CCDBB4097C07681B90F
DEBUG/libpjsip(28485): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
INFO/libpjsip(28485): zrtp_android.c  ZRTP info message: Initiator: DHPart1 received, preparing DHPart2
INFO/libpjsip(28485): zrtp_android.c !ZRTP warning message: No retained shared secrets available - must verify SAS
INFO/libpjsip(28485): zrtp_android.c  ZRTP Error: severity: 4, subcode: ffffff9e
INFO/libpjsip(28485): zrtp_android.c  ZRTP failed: 3, subcode: 6</p>

<p>Device B: CSipSimple</p>

<p>INFO/libpjsip(31115): zrtp_android.c  ...ZRTP transport created
DEBUG/libpjsip(31115): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
INFO/libpjsip(31115): zrtp_android.c  ZRTP info message: Hello received, preparing a Commit
DEBUG/libpjsip(31115): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
DEBUG/libpjsip(31115): zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
INFO/libpjsip(31115): zrtp_android.c !ZRTP info message: Commit: Generated a public DH key
INFO/libpjsip(31115): zrtp_android.c  ZRTP info message: Responder: Commit received, preparing DHPart1
INFO/libpjsip(31115): zrtp_android.c  ZRTP info message: DH1Part: Generated a public DH key
INFO/libpjsip(31115): zrtp_android.c !ZRTP info message: Responder: DHPart2 received, preparing Confirm1
INFO/libpjsip(31115): zrtp_android.c  ZRTP trace: Responder: prepareConfirm1: ExpectedHvi: E1FF94B4C491F338EB72E104E7F06DEDAA252E4670775A5E68EAE1D68622D804
INFO/libpjsip(31115): zrtp_android.c  ZRTP trace: Responder: prepareConfirm1: ReceivedHvi: BFEE8FE57E6CF0AD34D27D70E35E6F8B54E67B26B21D7CCDBB4097C07681B90F
INFO/libpjsip(31115): zrtp_android.c  ZRTP trace: Responder: prepareConfirm1: Hvi: does not match
INFO/libpjsip(31115): zrtp_android.c  ZRTP failed: 4, subcode: 98</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #7</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 3, 2011 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Ok, thanks for your investigation gcjoe.
About error codes, I think that the file to decode it : <a href="https://github.com/wernerd/ZRTP4PJ/blob/master/zsrtp/include/libzrtpcpp/ZrtpCodes.h">https://github.com/wernerd/ZRTP4PJ/blob/master/zsrtp/include/libzrtpcpp/ZrtpCodes.h</a></p>

<p>So, regarding your tests, it sounds something with the pjsip-2.0 integration. 
I'll try to have a closer look. I know that there is some things not really clean about the way I manage memory pools on integration side, but don't know what could be the root cause of error in case of pjsip-2.0 vs pjsip-1.x. Since I'm not very expert in ZRTP stuff, I can't tell what's wrong without diving in the source code ;).</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #8</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 3, 2011 by
                  <i class="ng-binding">Swift Bird</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Would be great since zrtp is one of the strong points of csipsimple against the other sip clients. Thanks a lot.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #9</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 9, 2011 by
                  <i class="ng-binding">Massive Lion</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Hi all,</p>

<p>I just stumbled across this issue (I'm not reading the issues regularly) and I try to get into this during the weekend. First I'll try to get the latest source from CSipSimple and pjsip 2.0. I never integrated and tested and ZRTP with pjsip 2.0 - only with pjsip 1.x releases. </p>

<p>Maybe something was changed that causes this problem, usually this sort of error happen is some data was not initialized correctly, is overwritten, or released prematurely.</p>

<p>Regards,
Werner</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #10</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 9, 2011 by
                  <i class="ng-binding">Swift Bird</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Very much appreciated Werner. Dived into it a bit the last days but not familiar with it enough yet to see the cause.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #11</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 12, 2011 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Issue 1429 has been merged into this issue.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #12</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 12, 2011 by
                  <i class="ng-binding">Helpful Lion</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Hello. I wanted to say that I don't have this problem, and I am using a Samsung Galaxy Mini phone, and a HTC Desire HD ( Android 2.3.3) with CsipSpmple r1155.I keep seeing "Dropping packet because SRTP authentication failed!" What does this mean? And why at the end of the conversation it says the number of encrypted packets, but always the number of decrypted packets is "0"?</p>

<p>Thanks and I hope this helps somehow.</p>

<p>My logs from a conversation (zrtp related) are:
12-12 12:50:05.699: I/libpjsip(9994): 12:50:05.709 zrtp_android.c  ..ZRTP transport created
12-12 12:50:11.279: D/libpjsip(9994): 12:50:11.286 zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
12-12 12:50:11.389: D/libpjsip(9994): 12:50:11.399 zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
12-12 12:50:11.509: D/libpjsip(9994): 12:50:11.518 zrtp_android.c !ZRTP getInfos : ZRTP - No verif.
12-12 12:50:11.769: I/libpjsip(9994): 12:50:11.778 zrtp_android.c  ZRTP info message: Hello received, preparing a Commit
12-12 12:50:12.039: I/libpjsip(9994): 12:50:12.051 zrtp_android.c !ZRTP info message: Commit: Generated a public DH key
12-12 12:50:12.489: I/libpjsip(9994): 12:50:12.500 zrtp_android.c  ZRTP info message: Initiator: DHPart1 received, preparing DHPart2
12-12 12:50:12.689: I/libpjsip(9994): 12:50:12.698 zrtp_android.c !ZRTP info message: At least one retained secrets matches - security OK
12-12 12:50:13.299: I/libpjsip(9994): 12:50:13.312 zrtp_android.c  ZRTP info message: Initiator: Confirm1 received, preparing Confirm2
12-12 12:50:13.319: D/SIP UA Receiver(9994): ZRTP show SAS 84f4 verified : 1
12-12 12:50:13.349: I/libpjsip(9994): 12:50:13.354 zrtp_android.c !ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.349: I/libpjsip(9994): 12:50:13.355 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.349: I/libpjsip(9994): 12:50:13.358 zrtp_android.c  ZRTP info message: Entered secure state
12-12 12:50:13.359: I/libpjsip(9994): 12:50:13.365 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.359: I/libpjsip(9994): 12:50:13.366 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.359: I/libpjsip(9994): 12:50:13.366 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.369: I/libpjsip(9994): 12:50:13.375 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.369: D/libpjsip(9994): 12:50:13.380 zrtp_android.c !ZRTP getInfos : ZRTP - OK
12-12 12:50:13.409: I/libpjsip(9994): 12:50:13.415 zrtp_android.c !ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.409: I/libpjsip(9994): 12:50:13.415 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.429: I/libpjsip(9994): 12:50:13.435 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.439: D/libpjsip(9994): 12:50:13.446 zrtp_android.c !ZRTP getInfos : ZRTP - OK
12-12 12:50:13.449: I/libpjsip(9994): 12:50:13.455 zrtp_android.c !ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.469: I/libpjsip(9994): 12:50:13.475 zrtp_android.c !ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.489: I/libpjsip(9994): 12:50:13.495 zrtp_android.c !ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.499: D/libpjsip(9994): 12:50:13.508 zrtp_android.c !ZRTP getInfos : ZRTP - OK
12-12 12:50:13.509: I/libpjsip(9994): 12:50:13.517 zrtp_android.c !ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.549: I/libpjsip(9994): 12:50:13.555 zrtp_android.c !ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.549: I/libpjsip(9994): 12:50:13.555 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.589: I/libpjsip(9994): 12:50:13.602 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.609: I/libpjsip(9994): 12:50:13.615 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.629: I/libpjsip(9994): 12:50:13.638 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.649: I/libpjsip(9994): 12:50:13.656 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.679: I/libpjsip(9994): 12:50:13.687 zrtp_android.c !ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.689: I/libpjsip(9994): 12:50:13.695 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.709: I/libpjsip(9994): 12:50:13.715 zrtp_android.c !ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.729: I/libpjsip(9994): 12:50:13.739 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.749: I/libpjsip(9994): 12:50:13.755 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.749: I/libpjsip(9994): 12:50:13.756 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:13.799: I/libpjsip(9994): 12:50:13.805 zrtp_android.c  ZRTP warning message: Dropping packet because SRTP authentication failed!
12-12 12:50:27.609: D/libpjsip(9994): 12:50:27.620 transport_zrtp  .......Media stop - encrypted packets: 712, decrypted packets: 0
12-12 12:50:27.609: D/libpjsip(9994): 12:50:27.620 transport_zrtp  .......Destroy - encrypted packets: 712, decrypted packets: 0
12-12 12:50:27.609: I/libpjsip(9994): 12:50:27.622 zrtp_android.c  .......ZRTP info message: No more security for this session</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #13</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Dec 16, 2011 by
                  <i class="ng-binding">Swift Bird</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Anybody got anywhere yet or got a few hints?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #14</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 11, 2012 by
                  <i class="ng-binding">Grumpy Cat</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>It seems this is a SRTP + ZRTP issue. csipsimple cannot establish ZRTP if SRTP is enabled. SRTP should be disabled when ZRTP is enabled.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #15</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 11, 2012 by
                  <i class="ng-binding">Massive Lion</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>That's correct. CSipSimple uses the PJSIP library to implement SIP, RTP etc. The
PJSIP lib has an embedded SRTP mechanism that uses another way to exchange
the SRTP key material (it uses SIP mechanisms to do it).</p>

<p>This internal PJSIP SRTP mechansim <em>MUST</em> be disabled if ZRTP is enabled. Failing
to do so would confuse ZRTP and its associated SRTP. </p>

<p>Regis, maybe this is a topic for the FAQ or Wiki if not already done?</p>

<p>Regards,
Werner</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #16</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 11, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Yep, indeed I should add probably add specific section about SRTP+ZRTP in the FAQ, I'll do that now.</p>

<p>However, a nice to have would be automatically warn user about the fact his configuration is invalid if he is doing weird things in expert mode. Basically I considered that expert mode is a raw access to pjsip configuration with as less checks as possible. 
I think that I should keep this approach to leave expert users free to tweak the app. </p>

<p>However, there is many points where the application can be considered as obviously wrong and that I should warn somewhere. I'm still thinking about a fancy way to show that. I guess a warning tab that only shows if I detect something weird in UI.
For now the points I know as common mistakes or wrong config are :
 * SRTP + ZRTP at the same time.
 * Trying to use a transport that is not activated. (It's very common for TLS, maybe I could automatically turn it on instead when some account is saved with TLS transport).
 * Allowing over 3G without stun or ice activated.
 * Having random port for UDP with a local account. (this one is already automatically set to 5060 at save time).</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #17</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 11, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Added to FAQ, let me know if you think it's not clear or if there's some missing point. </p>

<p>About the warning stuff it's in my todo list, so stay tuned ;)</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #18</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 31, 2012 by
                  <i class="ng-binding">Happy Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Unfortunately the latest trunk (r1242) still not work. I tried with local account between two CSipSimple (GT-S5570 and GT-I5700) through local WiFi connection.</p>

<p>zrtp_android.c  ZRTP Error: severity: 4, subcode: ffffff9e
zrtp_android.c  ZRTP failed: 3, subcode: 6</p>

<p>:-/</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #19</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 2, 2012 by
                  <i class="ng-binding">Massive Lion</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I've tried to force this error on PJSIP (not Android, Linux based client) but
without success. What I can say is that it the HVI check fails (severity 4, 
subcode ff9e) and this triggers the 3/6 error (protocol error).</p>

<p>The HVI check uses data that was stored at some earlier steps in the protocol,
computes its own HVI (actually a Hash) and compares it with the stored values. If
the stored values and the computed value does not match it triggers the error.</p>

<p>Why this check fails - I don't know because I cannot reproduce the problem.</p>

<p>Werner</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #20</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 2, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Is there a sdcard on both devices?</p>

<p>For now it tries to store in the sdcard if available and ~should~ fallback to cache file of the app if no sdcard, but maybe something went wrong with autodetection.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #21</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 2, 2012 by
                  <i class="ng-binding">Happy Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Thank for your reply! Yes, both device have an external (2GB) sdcard with &gt;1GB free space.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #22</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 13, 2012 by
                  <i class="ng-binding">Happy Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>The ZRTP works fine! Sorry! Something wrong with my GT-I5700 because works fine between two GT-S5570 (I got a second device and I tried this today). Finally I threw the GT-I5700 against the wall, so the problem solved. :)</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #23</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Mar 22, 2012 by
                  <i class="ng-binding">Swift Elephant</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Not works for me (build r1339)</p>

<p>Works fine in case where other peer is non csipsimple (jitsi and twinkle)
but if both peers are csipsimple zrtp not works</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #24</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Mar 23, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Seems to be linked to video feature. I've found something that was wrong. The secure state where checked on video stream (depending on how it's negociated, it can use video stream instead of audio stream to check state).</p>

<p>I'll fix that right now.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #25</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Mar 23, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>This issue was closed by revision r1342.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Fixed</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>