https://code.google.com/archive/p/csipsimple/issues/2313<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #2313</h1>
            <p class="ng-binding">TelAccess change codec and enable multiple calls.</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Apr 7, 2013 by
                  <i class="ng-binding">Happy Elephant</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p><b>What steps will reproduce the problem?</b>
1.Open Menu, then Settings
2.Open Menu again in Settings, then Expert mode
3.See default settings</p>

<p><b>What is the expected output? What do you see instead?</b>
I expected that there are different default settings like I requested for TelAccess wizard, I saw just the same default settings like other versions have or like the generic wizard has</p>

<p><b>What version of the product are you using? On what operating system?</b>
CSipSimple-r2192-trunk, on GT-I5503 Firmware version: 2.1-update1</p>

<p><b>Please provide any additional information below.</b>
Not any, just about the hard coded expert mode default settings for TelAccess wizard</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Apr 8, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Hi,</p>

<p>There is some settings that I usually do not change from the wizard because it's actual user settings.
For example only user knows if he want to use SIP over 3G and activating it without any notice could be very frustrative for user and result in a big bill from his carrier.</p>

<p>Some other settings are settings that are proper to device. If you noticed <em>on your device</em> that some audio setting are necessary for example, it's something I have to change <em>per device</em> (not per wizard). The app at 1st start up detects the device and adapt audio workaround so that the audio plays well on the device. Hardcoding something from wizard will break things for many devices. So if you have some problem with your device please tell me I can apply the workaround for all users (whatever the provider) (just be sure before the setting works well for all case : earpiece/rear speaker/headset)</p>

<p>However, some of the settings you asked me to set automatically (and that are settings that it could be normal for a wizard to change) are actually done.</p>

<p>You can review what are the settings changed by the wizard here :
<a href="https://code.google.com/p/csipsimple/source/browse/trunk/CSipSimple/src/com/csipsimple/wizards/impl/TelAccess.java#51">https://code.google.com/p/csipsimple/source/browse/trunk/CSipSimple/src/com/csipsimple/wizards/impl/TelAccess.java#51</a></p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Apr 8, 2013 by
                  <i class="ng-binding">Happy Elephant</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Thanks for the fast reply and I very appreciate for your fast response to my wizard request. I know there are somethings in settings that I cannot make it mandatory because of user's preferences. I just want to ask:</p>

<ol>
<li>I used to involve with expert mode settings in csipsimple for matching all configurations with my SIP server, so I just saw in expert mode that there's just a few parameters that you set like my request. May I conclude that you only set just the normal mode settings not the expert mode?</li>
<li>If you can change all default values for the expert mode too,can I ask you one more time to set some parameters to be default in according to my request? let me try to mention which parameters that I think those are not user-preferenced and need to be adapted:
-LOCK WIFI (ticked)
-UDP (ticked)
-UDP Port (5060)
-TCP (unticked)
-RTP Port (10000)
-Connection KA (Wifi TLS:80 ; Mobile TLS:40)
-SRTP mode (Mandatory)
-VAD (ticked)
-Noise reduction (ticked)
-Media quality (5)
-Audio frame ptime (40)
-Codec priority list per bandwidth (unticked)
-Codecs (silk8khz;gsm)
-Use routing API (ticked)
-Use mode audio API (ticked)
-Keep awake while on call (ticked)
-Use partial wake lock (ticked)
-Support multiple calls (ticked)</li>
</ol>

<p>I think those are enough and won't dizzy the users because those are mandatory belonging to server configuration and network conditions. The other parameters are in right position yet so let it be. Thank you so much brother.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Apr 8, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>1- In fact all wizard heritates from the expert one. Other are just abstraction of the expert with things automatically set. From your description I just pick-up things that differs from the main implementation (the parent class) of the wizards.</p>

<p>2- I read your entiere mail and set up things I know to be things that makes sense to set automatically for a sip provider.
Others are <em>NOT</em> things that should be set by a wizard. Explanation below.</p>

<p>So point by point: 
 * Lock wifi : this will drain battery of users and is normally necessary only if users wants his phone to be "always available" and "not allowed over 3g". This setting is automatically chosen depending on the very first easy setting view that appears at the first time the user launch the app. So let user decide on first launch of the app how he would like the app to behaves. This setting will be set automatically upon his decision.
 * UDP (ticker) =&gt; it's the default
 * UDP port =&gt; Are you sure it's necessary? NOTE here : this port is <em>NOT</em> the server port. (The server port unless specified is the one of the transport so 5060 for sip and 5061 for sips). It's the <em>LOCAL</em> binding port. If we force 5060 here, the app may conflict with other apps that also bind locally the port 5060 (and some are not configurable). Both apps will fight each other to try to bind locally this port to listen and user will get something not working. Instead port 0 just find a free port.
 * RTP port =&gt; same as previous point? Is that mandatory in your case? (It's the <em>local</em> listen port). If not I recommend to let a random free port to be bound by the app.
 * Connection KA =&gt; it's highly dependent on user network quality. The values you give seems far too small for TLS and will drain battery a lot. It would be better to leave it high if the ROM is not buggy (and apparently android 4.2.2 is but it's not a reason to apply the workaround to <em>all</em> users).
 * SRTP mode =&gt; this was done at account level for your wizard (so for the account). No need to change it in global settings as it's overridden in account. Besides if users has other accounts from other providers it's better to set SRTP mode per account so that it will not try to use srtp for other accounts but only for accounts created with your wizard.
 * VAD =&gt; will be default depending on CPU capabilities of the device. If not enabled there is probably a known exception in code for the device. Better to leave the device auto-detection do its job here. If you enable it for <em>all</em> users it will just get crappy garbled noise for those with armeabi device. Not something you want.
 * Noise reduction =&gt; highly experimental feature taken from webrtc code and known working only on very high cpu devices (such as N4, galaxyS3 etc).
 * Media quality =&gt; 5 is already the default (in fact the default is 4, but all above 3 are the same for android builds of pjsip). If you find it better, probably psychological effect ;).
 * Audio frame ptime =&gt; this depends on the network constraints. 10 gives lower latency, 40 will reduce network usage. So let user decide for that as you don't know what is the network they will use for your service. If you have constraints on your server side, tell me and I'll change this value without problems. It's just that it should come from a constraint, not from your own tests did with your own device under your own network conditions. (CSipSimple is an app of 3 years old and the feedback of users has enriched and refined the default values step by step to try to set automatically the best values to fit most users needs).
 * Codec list per bandwidth =&gt; well I'd rather set the same list for both case. This is a user preference and they might want to reorder codecs later (and choose different codec depending on network they are connected to). It's more some UI thing that user wants or not to use.</p>

<ul>
<li>Codecs =&gt; Ok I take the point to modify that for your wizard. (in your mail you only talked about g729 but it's a proprietary codec that I can't enable automatically for legal reason).</li>
</ul>

<p>Following are <em>ALL</em> specific to audio device implementation. If it's <em>NOT</em> settings to apply to all <em>DEVICES</em> : 
"Use routing API", "Use mode audio API", "Keep awake while on call", "partial wake lock".
If it's mandatory for <em>YOUR DEVICE</em> please tell me the device and follow steps as indicated here : <a href="http://code.google.com/p/csipsimple/wiki/FAQ?wl=en#Audio_routing_troubleshooting">http://code.google.com/p/csipsimple/wiki/FAQ?wl=en#Audio_routing_troubleshooting</a>
Also "Partial wake lock" will drain the battery very fast. It's discouraged to enable it unless the ROM is buggy. (Android 4.2.2 or very old ROM).</p>

<ul>
<li>Support multiple calls (ticked) =&gt; Ok, sorry I missed that in the mail, but that's indeed a setting that make sense to be set by the wizard :). I'll modify the wizard asap so that it set this value automatically.</li>
</ul></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #4</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Apr 8, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>This issue was closed by revision r2194.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #5</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Apr 8, 2013 by
                  <i class="ng-binding">Happy Elephant</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Thank you for all of your recommendations.. I know my requests are so mandatory and make the users cannot define their setting's preferences. Let us say that the users are not very dizzy to decide what they must set according to all constraints they have, cause they are in the level of medium-knowledge about SIP subjectively. In another case, we found a group of users who are so confused to make decisions on parameters in CSipSimple cause they are suffering network problems and device's limitations, so what are the best suggestions you could give to me to face these kind of problems?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #6</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Apr 8, 2013 by
                  <i class="ng-binding">Happy Elephant</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Upsss I forgot to tell you that I want to set the "Clock rate" into default value of 8KHz..Is it okay?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #7</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Apr 9, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Clock rate is also a setting related to device.</p>

<p>Actually when it's device related things it should be managed differently than by wizard. But that's things that should be applied by device.
It's different feature request. Please, if you noticed some device that doesn't play well with the default settings, open a new issue with all information I need to detect the device and what are exactly (and only) the settings you need to change.
This has to be reviewed and will go a different path because it has <em>deeper</em> impact that what you think.
You probably test only with one or two devices. The current auto configuration <em>detection</em> is based on tests done with thousands and in many situation (earpiece/speaker/bluetooth etc). I insist on the fact the app <em>DETECTS</em> these settings. At first run. It look what is the phone and select the <em>best</em> audio settings for the phone.
If it happens it's not the best for the phone you tested, ok to try to review what are the changes needed. But it's <em>NOT</em> related to your wizard. It a different request.
Thanks !</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Fixed</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>