https://code.google.com/archive/p/android-on-freerunner/issues/67<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/android-on-freerunner/">Project</a>
    </li>
    <li>
      <a href="/archive/p/android-on-freerunner/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/android-on-freerunner/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/android-on-freerunner/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/android-on-freerunner/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=android-on-freerunner">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/android-on-freerunner/logo.png">
            <h1 class="ng-binding">android-on-freerunner - issue #67</h1>
            <p class="ng-binding">Automatic setting of date and time using SIM or NTP</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Nov 5, 2009 by
                  <i class="ng-binding">Happy Bear</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p><b>What steps will reproduce the problem?</b>
1. Put in an activated SIM card
2. Turn on the phone
3. Observe the time on the phone is wrong, despite of
"Settings-&gt;Date&amp;time-&gt;Automatic" is checked.</p>

<p><b>What is the expected output? What do you see instead?</b>
I expect the phone to pickup the current time from the mobile network operator.</p>

<p><b>What version of the product are you using? On what operating system?</b>
android-on-freerunner-cupcake-week-2009-44.tar.gz</p>

<p><b>Please provide any additional information below.</b>
It would also be useful for the phone to have option to synchronize time
using NTP protocol, in cases when there is no SIM card present.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Nov 5, 2009 by
                  <i class="ng-binding">Happy Dog</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Note that this functionality also relies on your carrier providing the NITZ
functionality on their GSM network.</p>

<p><a href="http://en.wikipedia.org/wiki/NITZ">http://en.wikipedia.org/wiki/NITZ</a></p>

<p>NTP would also be cool (as would GSM), but those might be possible via an
application instead.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Nov 5, 2009 by
                  <i class="ng-binding">Grumpy Camel</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Out of four means to set the clock on the Freerunner, one isn't used (GPS), another
(NTP) has apparently only one app "Navy Clock" whose author didn't seem to see fit to
do anything more than a registration in the Market, one returns false results (GSM)
even on my other (non-android) phones, and the last one is not automatic... That's a
pity.
Does anyone know why GPS and NTP aren't used in Android to set the time accurately ?
Does anyone know of a free app to set the time (and date, of course) from the GPS
data or from an NTP server ?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Nov 10, 2009 by
                  <i class="ng-binding">Grumpy Camel</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Well... I contacted Richard Schilling (author of Navy Clock) and apparently it is
impossible for an app to change the system time. Navy Clock is a simple comparator
between the system time and "atomic" time (retrieved via NTP)</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #4</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Nov 12, 2009 by
                  <i class="ng-binding">Happy Bear</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Looking at the otimed.py (time daemon on SHR distro):
<a href="http://openmoko.opendevice.org/build/shr-unstable/tmp/work/om-gta02-angstrom-linux-gnueabi/frameworkd-0.8.5.3+gitr1525+7c09174fb4e8837aabc8826e84e1efa6c2456216-r0/git/framework/subsystems/otimed/otimed.py">http://openmoko.opendevice.org/build/shr-unstable/tmp/work/om-gta02-angstrom-linux-gnueabi/frameworkd-0.8.5.3+gitr1525+7c09174fb4e8837aabc8826e84e1efa6c2456216-r0/git/framework/subsystems/otimed/otimed.py</a></p>

<p>Apparently kernel broadcasts the "time update event" on the DBUS, from where it is
picked up by otimed.py. Thus, it looks, the kenrel support for the NITZ is there, it
just need to be handled properly by the android distro.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #5</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on May 3, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>To make matters worse: after rebooting, the hardware clock is substantially off
(having set the time manually and rebooting a few times over the following days, I
noticed the hardware clock being off by some 30 minutes).</p>

<p>As for potential time sources:
NITZ (over GSM/GPRS): potentially the best bet, if the carrier has it, though
especially here in Europe, few offer it, hence it's out of the question for many of us.
NTP: could work IF the phone is connected to the Internet (GPRS, Wi-Fi or USB network
with PC configured as either NTP server or router), but many phones will rarely
connect. The usefulness of NTP is further diminished by the fact that the phone does
not automatically connect as soon as a remembered network is in range but needs some
user input first.
GPS: would work just as well if the phone is outside; note that GPS time is off by a
few seconds, but the difference is well documented and could easily be compensated for.</p>

<p>Conclusion: none of the three time sources is guaranteed to be available regularly,
so we should try to update the time whenever and from wherever we can:
NITZ - try on every GSM/GPRS event (network registration, call/data connection, SMS)
NTP - try as soon as a network connection (GPRS, Wi-Fi or USB) is established
GPS - try as soon as the GPS receiver is enabled and we have a fix</p>

<p>In every case, time should be re-synchronized every 24 hours to keep it accurate.</p>

<p>Also, since the hardware clock appears to drift significantly, explicitly sync the
hardware clock whenever we get a time update (including one from the user), or after
24 hours without a time update.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #6</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 25, 2010 by
                  <i class="ng-binding">Happy Bear</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I don't have the AoF next to me, can someone check whether "ClockSync" app works?
<a href="http://andappstore.com/AndroidApplications/apps/729006">http://andappstore.com/AndroidApplications/apps/729006</a></p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #7</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 25, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>just downloaded and tried it, I get the error message "can't get root permissions". The instructions say something that you need to root your device to get it to work (I thought AoF ships rooted... I use RC1 as of January 30).</p>

<p>I guess we need to find the point at which NITZ sets the system time, which probably happens in some system component which runs as root anyway, and then modify that to allow NTP and GPS as time sources. (BTW, as for GPS, please also have a look at #139, I have found one thing that's definitely a bug and a hot suspect for another, just need someone to apply the patch and build the beast for me so I can test it).</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #8</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 25, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>from the FAQ (available only inside the program itself, didn't find it anywhere on the net):</p>

<p>Q: Why does ClockSync need root to work?</p>

<p>Android system doesn't allow third-party applications to change system time. It's OS security restriction and the only way to overcome it is using root (run commands via su with administrator permissions). You need rooted rom for this feature to work, su binary file and Superuser Permissions application. These are normally included with ROMs from such vendors as Cyanogen or MoDaCo. If you don't know how to root your phone, please google for details.</p>

<p>So, I guess we have a rooted ROM, we just need to find out if we have su and this Superuser Permissions application (the latter I suppose is not included in AoF...)</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #9</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 25, 2010 by
                  <i class="ng-binding">Grumpy Camel</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>As far as I can tell, ClockSync works flawlessly for my rooted Motorola Milestone.
The "rooting" process involves installing Superuser.apk and having /system/bin/su and /system/bin/busybox both with 4755 permissions.
I haven't tested it on my Freerunner yet.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #10</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 25, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Just downloaded Superuser from </p>

<pre><code>http://dl.dropbox.com/u/6408470/su-releases/su-2.2.2-ef-signed.zip
</code></pre>

<p>(not sure if the automated install will work on the Freerunner, but we can always install manually, the folder hierarchy looks quite self-explanatory...)</p>

<p>I'll give it a try and post my results here.</p>

<p>Btw, the backup/restore script mentioned on the wiki also claims to set the time (needs busybox on the device, which is also set up by the script). Haven't tested that one either, though...</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #11</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 26, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>No luck...</p>

<p>I installed Superuser manually, performing the steps outlined in /META-INF/com/google/android/update-script:
- Remounted /system in read/write mode
- Copied su to /system/xbin
- Set permissions to 04755 (rwsr-xr-x)
- Created a symlink in /system/bin/su
- Modified fixsuperm to point to a valid shell, installed busybox and modified $PATH accordingly, then pushed fixsuperm to device and ran it
- Installed superuser.apk (adb install)
- Rebooted</p>

<p>When I run superuser and enter preferences, I get "su vbionic/linker/linker.c:1581 | ERROR:  1216 could not load 'libbinder.so' ". ClockSync says "can't get root permissions".</p>

<p>So I'm kinda stuck here, seems su has a problem.</p>

<p>OTOH, I tried the restore script I mentioned earlier (I stripped it down to just install busybox and set the time). That worked, except that the time it set is 2 hours ahead of local time (time zone is correct, 2 h ahead of UTC, seems busybox takes the time it gets as UTC as the local script reports the correct time). But this takes place over ADB, where different permissions may apply.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #12</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 26, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>afterthought... I realized that busybox also includes su, so I deleted the one that cane with Superuser and ln-ed to the one from busybox and set the permissions for the latter. Superuser now reports "su vnull" where I got the error message before... but still no luck. Maybe I'm still doing something wrong...</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #13</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 26, 2010 by
                  <i class="ng-binding">Grumpy Camel</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Okay, installed ClockSync, Superuser.apk (found the very same link above in the xda-developers forums [1]) and either busybox or the provided "su" binary as "/system/bin/su"
Same result : neither of them works.
Busybox might be a good "shell-replacement" of "su" but apprently not quite good enough for the Superuser app, and the provided binary is apparently not compiled for the Freerunner's architecture :-/
Can someone provide a working "su" binary ? Please ? :-)</p>

<p>[1] <a href="http://forum.xda-developers.com/showthread.php?t=682828">http://forum.xda-developers.com/showthread.php?t=682828</a></p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #14</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 27, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>in my opinion, we should look into the source code and find out where the NITZ information gets processed (as far as I found out until now, the code that initially receives the NITZ information is somewhere inside the RIL part of the telephony stack but returns it to some calling function we have yet to identify).</p>

<p>Then we'd have to tap into that piece of code to allow also other sources (namely NTP and GPS). These are quite accurate while NITZ depends on the network operator. If desired and possible, we might still use the network used to determine the time zone (note that this is not always safe and thus should be configurable).</p>

<p>However, I do realize that this is an issue with Android in general and not specific to the Freerunner port; in fact, there is a similar ticket for that:</p>

<p><a href="http://code.google.com/p/android/issues/detail?id=4581">http://code.google.com/p/android/issues/detail?id=4581</a></p>

<p>I would still keep this ticket open and keep up the work in the context of AoF as Cupcake is our only somewhat stable release while Google has already moved on to Eclair - so I'm unsure as to whether fixes we develop for cupcake will still make it into the official build. If they don't, I don't want that to keep us from fixing the Freerunner port.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #15</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 27, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I've found something in /frameworks/base/telephony/java/com/android/internal/telephony/gsm/RIL.java, around line 2056: this apparently is where NITZ messages from the GSM modem are processed. The time is then passed in a call to </p>

<pre><code>mNITZTimeRegistrant.notifyRegistrant()
</code></pre>

<p>Next step is to find out where this method is implemented and who can call it. If we can hook into that chain somewhere and pass it a GSM or NTP timestamp, we should be almost there and the rest is just cosmetics (e.g. making time sources fully configurable).</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #16</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 27, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p><a href="http://developer.android.com/reference/android/os/SystemClock.html">http://developer.android.com/reference/android/os/SystemClock.html</a></p>

<p>describes details of the system clock, including the setCurrentTimeMillis function for setting local time:</p>

<pre><code>Sets the current wall time, in milliseconds. Requires the calling process to have appropriate permissions.
</code></pre>

<p>Unfortunately it does not say what these permissions are... running in root context? some Android-specific permission?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #17</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 27, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>There's a permission (android.Manifest.permission) called SET_TIME, but it is implemented only in API Level 8 (2.2 - Froyo) and up. The setCurrentTimeMillis is available as of API Level 1. So permission must refer to something else...</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #18</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 28, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Did some more research...</p>

<p><a href="http://groups.google.com/group/android-developers/browse_thread/thread/855ae4fe695d3e70">http://groups.google.com/group/android-developers/browse_thread/thread/855ae4fe695d3e70</a></p>

<pre><code>google experts answers:

**********************************************************************************
User apps cannot set the time. Only the system processes can. This is
</code></pre>

<p>for
    security, but also because it won't have much effect--the time is
reset from
    the radio via network time.
    <strong>******************************************************************************</strong></p>

<p>So it seems the key is the user context. Running ps reveals that there are a bunch of root processes while others run under accounts such as system, media, bluetooth and radio; each app runs in its own app_nn context where nn is a number.</p>

<p>As NITZ processing sits somewhere in the RIL code, it might be inside the rild process, which runs as user "radio".</p>

<p>Another info I found by actually reading the Android ticket I posted ;-)</p>

<pre><code>[...] but android.os.SystemClock.setCurrentTimeMillis (long millis) is only 
usable by root.
setCurrentTimeMillis() [...] [c]urrently [...] just calls settimeofday() from sys/time.h and, as I noted above and as 
noted in the source (the 1.5 source at least), this only works as root.
</code></pre>

<p>Which would mean we need root.</p>

<p>I'll try to create a proof of concept using GPS (as I happen to know my way around that part of the code and where to insert what); I just don't know which process links against the GPS library and thus in which user context the code gets executed, but it's worth a try. If that works, we can try to hook into some network interface code and do similar things there (calling an NTP client, getting its output and passing it to the appropriate routines) and ultimately add some beauty to make time sources configurable.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #19</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 29, 2010 by
                  <i class="ng-binding">Happy Horse</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Issue 143 has been merged into this issue.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #20</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Aug 6, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Good news: the first hurdle has been taken.</p>

<p>I replaced /system/lib/libfreerunner_gps.so with a modified version which, upon getting a fix with a valid timestamp, calls settimeofday(). I then started GPS Status (any other GPS app will do as well) and waited for a fix.</p>

<p>The screen saver now reports the correct local time, same for "adb shell /data/local/system/bin/date" (with busybox installed). Which means the system clock gets updated correctly.</p>

<p>The only problem is that the top bar does not reflect the changes. It seems that it needs to be notified of the change somehow.</p>

<p>Another thing we will need to tackle is the hardware clock: we need to sync the hardware clock whenever we update the system clock. Since (at least on my device) the hardware clock drifts significantly (in the minute range after just 24 hours), we need to sync it at least on shutdown, even better periodically.</p>

<p>The code is still quite dirty in a number of respects:
- Local time is set whenever we get a timestamp, which may be once per second. I'll see if I can store some extra data in the NmeaReader structure to manage the update interval, so that system time gets updated whenever we get the first fix after GPS startup, and then again every 24 hours (in case the GPS receiver is not shut down in between).
- Some NMEA messages have millisecond precision, others just second precision. I need to reliably identify those with millisecond precision and use only those for updates.
- Hardware clock must be synched immediately after system clock update.
- The functionality is hardcoded and can't be disabled - we need to add some configuration settings (at least to enable/disable updates, maybe also an interval).
- Finally, maybe it's not the nicest way to implement time sync in this particular place - though it gives us the advantage that the whole process is quick, keeping the error lower.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #21</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Aug 10, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Comment deleted</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #22</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Aug 10, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Results after a few day of testing:</p>

<p>Apparently, when the system clock is ahead, correcting it with the GPS timestamp as shown above causes the clock in the top bar to stop until system time has caught up, after which it will update again.</p>

<p>Much worse is the fact that during the last two nights the clock would just freeze at a seemingly random time. None of my alarms went off in the morning and the clock showed 4 am in one case, 2 am in the other. Seems something isn't working cleanly.</p>

<p>I'm currently digging my way through the location provider chain to find the right place at which to insert code to process a GPS time stamp and update system time.</p>

<p>Apparently the hardware-specific code gets called from /platform/frameworks/base/core/jni/android_location_GpsLocationProvider.cpp.</p>

<p>The C++ code in turn gets called by /platform/frameworks/base/location/java/com/android/internal/location/GpsLocationProvider.java.</p>

<p>What I don't understand in the latter is that there is some voodoo involved which tries to find out if a network connection is available and, if so, makes an NTP request (sic!) and somehow makes references to system time when returning timestamps. I do see that the NTP code sits near the XTRA code, they might be related.</p>

<p>However, the code for manually setting the time is fairly straightforward. It sits in /platform/packages/apps/Settings/src/com/android/settings/DateTimeSettings.java (lines 149-179) and is basically a straightforward call to SystemClock.setCurrentTimeMillis. The comment says timeUpdated() is not needed because the TIME_CHANGED broadcast is set by the AlarmManager as a side effect of setting the SystemClock time.</p>

<p>Maybe the cleanest way to implement this is to create a system service that runs as root, gets notified of certain events (in particular, enabling a GPS location provider or activating a network link) and takes appropriate action - for GPS, get a fix time; for network, get time from an NTP server - and update the system clock. That way we could even configure the whole thing: which time sources to use and when to update (e.g. every time the source becomes available, plus 24 hours after the last sync if a source is still available). I'd need to dig into the code more deeply, however...</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #23</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Aug 11, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I'm in the early phase of drawing up an application that detects changes in network connectivity (a network interface coming online) or GPS connection status (GPS fix received), tries to obtain the time and updates the system clock.</p>

<p>The application runs as android.uid.system (==root), which means it must be signed with the same key as the rest of the system components - no problem on the Freerunner or other ports for which full source and/or signing key are available. With Froyo, it should be possible to run the app in ordinary user space and request SET_TIME permission - if we're lucky, this is just a matter of modifying the manifest.</p>

<p>A broadcast receiver listens for CONNECTIVITY_CHANGE broadcasts and checks if a network connection has become available; in that case it fetches the time using NTP and sets it.</p>

<p>For GPS unfortunately no such broadcast exists, we have to create a service that gets an instance of LocationManager, implements a GpsStatus.Listener that listens for GPS_EVENT_FIRST_FIX, then queries the timestamp and uses that. The service might also be extended to periodically resync after a certain time has elapsed.</p>

<p>The third component will be a config UI.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #24</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Nov 11, 2010 by
                  <i class="ng-binding">Grumpy Monkey</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I just started with developing applications on Android. My question is about getting the time and date. One solution is like i saw gps (after that NITZ...).But is it possibile to get the time directly from operator using GSM standard? (sch, bcch, ...)
NTP i would not like to use.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #25</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Nov 11, 2010 by
                  <i class="ng-binding">Swift Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>as far as I know, that is what NITZ is supposed to do: supply date/time information over the GSM network. I'm not aware of any other way to get the date and time from GSM, though that doesn't necessarily mean there isn't one - maybe I'm just not aware of it.</p>

<p>In fact I've always been somewhat surprised that GSM apparently doesn't supply this timestamp out of the box - ISDN has had this feature from the beginning (at least the European DSS-1 standard); when placing a call, the phone would fetch the current time from the network. Since GSM was developed in the same period (slightly after), I would have expected it to offer something similar...</p>

<p>Anyways, getting the time from the GPS should be just a matter of querying Location parameters (once we have a fix).</p>

<p>Failing all those, NTP is the last choice - and maybe the best if you're at home and your GSM provider doesn't offer NITZ but you do have a WiFi or GPRS connection.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #26</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 24, 2015 by
                  <i class="ng-binding">Happy Cat</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Hello guys, 
Does NITZ protocol is used only by GSM network and is it the default protocol used by android system to sync time?
Things I know is that:
- user can't set time without root privileges
- NTP server could be used only with third-party apps
- there is a gps.conf file in /system/etc and inside there is a line NTP_SERVER=... 
I want to know the meaning of gps.conf file cause my final goal is to try to sync device with NTP server wihout root priviledge but by redirecting NTP request to my own NTP server (changing DNS maybe)
I used some packets sniffer and I can't see some NTP packets (over Wi-fi or GSM)</p>

<p>Thanks fo help    </p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">New</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>