https://code.google.com/archive/p/csipsimple/issues/1587<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #1587</h1>
            <p class="ng-binding">(Corporate?) Wifi call Sip -&gt; Sip no audio after +/- 1m10sec. No Problem on 3G</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 23, 2012 by
                  <i class="ng-binding">Happy Elephant</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p><b>What steps will reproduce the problem?</b>
1.Call somebody
2.Wait
3.No Audio after 1m10sec</p>

<p><b>What is the expected output? What do you see instead?</b>
Continued audio, no audio</p>

<p><b>What version of the product are you using? On what operating system?</b>
ICS - Galaxy Nexus</p>

<p><b>Please provide any additional information below.</b></p>

<p>Disclaimer, haven't tested it yet on my home wifi.
Edit: Symptom happens on CSipSimple but not using native android client. Any idea what might be happening?</p>

<p>Android Galaxy Nexus running ICS and CSipSimple. No TLS, no ICE, No STUN</p>

<p>If calling on 3g, no problem.
Calling on corporate wifi, no sound after +/- 1m10sec. Seems pretty consistent.
Logs are using 3333 (music server) but problem also exists when calling an iPhone SIP client.</p>

<p>I managed to reach the end of the music on 3333 once (about 2 min. worth of music), when I accidentally put it on hold half way through.</p>

<p>Put on hold halfway, reached end of song (twice):
<a href="https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=vm7Npr733UxDcY64m.PhzrFXqN6LKW72&amp;fromtag=u5FUW1PrKipfdX6YnyLyL2V.pYcbX8iK&amp;totag=as5f542abd&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1">https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=vm7Npr733UxDcY64m.PhzrFXqN6LKW72&amp;fromtag=u5FUW1PrKipfdX6YnyLyL2V.pYcbX8iK&amp;totag=as5f542abd&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1</a></p>

<p><a href="https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=bxyouTpN5OoNyWU23frr9sUGXHKlnSlk&amp;fromtag=9xTSXdJPAZTlqY72oFLIXrMBAiJOiiaq&amp;totag=as795696fb&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1">https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=bxyouTpN5OoNyWU23frr9sUGXHKlnSlk&amp;fromtag=9xTSXdJPAZTlqY72oFLIXrMBAiJOiiaq&amp;totag=as795696fb&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1</a></p>

<p>Sound disappears after 1:10 (three times)
<a href="https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=9lNn9uC13aIHYASWzgf.4rCvB9dLdn1Z&amp;fromtag=o741.vhjch81LecClBM21UzLm20.oYh1&amp;totag=as57fbda36&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1">https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=9lNn9uC13aIHYASWzgf.4rCvB9dLdn1Z&amp;fromtag=o741.vhjch81LecClBM21UzLm20.oYh1&amp;totag=as57fbda36&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1</a></p>

<p><a href="https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=9lNn9uC13aIHYASWzgf.4rCvB9dLdn1Z&amp;fromtag=o741.vhjch81LecClBM21UzLm20.oYh1&amp;totag=as57fbda36&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1">https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=9lNn9uC13aIHYASWzgf.4rCvB9dLdn1Z&amp;fromtag=o741.vhjch81LecClBM21UzLm20.oYh1&amp;totag=as57fbda36&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1</a></p>

<p><a href="https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=Xeg9rIpSQD55GeRCt2MczwvLM6IqES1a&amp;fromtag=dMqX0vFtqiMbXOep0MYk6RJp.8qo7f72&amp;totag=as1054c510&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1">https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=Xeg9rIpSQD55GeRCt2MczwvLM6IqES1a&amp;fromtag=dMqX0vFtqiMbXOep0MYk6RJp.8qo7f72&amp;totag=as1054c510&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1</a></p>

<p>No problems on 3g:
<a href="https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=W0-TdS-rHB3ZnK6UkOaPhE9dokQ3cx5-&amp;fromtag=4r8HEpxR31AQGPVdvCHVppQFlfuLXrLm&amp;totag=as1c0103e0&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1">https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=W0-TdS-rHB3ZnK6UkOaPhE9dokQ3cx5-&amp;fromtag=4r8HEpxR31AQGPVdvCHVppQFlfuLXrLm&amp;totag=as1c0103e0&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1</a></p>

<p>Finally, corporate wifi using native android SIP client.
<a href="https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=5651f2768ca42016776e505e8a791cfb%4010.31.103.193&amp;fromtag=2116774268&amp;totag=as11e8acc9&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1">https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=5651f2768ca42016776e505e8a791cfb%4010.31.103.193&amp;fromtag=2116774268&amp;totag=as11e8acc9&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1</a></p>

<p>Oddly enough, that seems to work. Don't think it's a codec issue as it happens with SILK and G722</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 23, 2012 by
                  <i class="ng-binding">Happy Elephant</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Edit: Sorry, using CSipSimple-r1275-trunk.apk   23-Feb-2012</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 24, 2012 by
                  <i class="ng-binding">Happy Elephant</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Note from Sip2Sip</p>

<p>The sip2sip.info service 'pings' each call leg with an OPTIONS request in order to know if they are alive and free resources and properly terminate the call if one of the parties is no longer there.</p>

<p>I inspected your traces, and in the corporate WiFi case your endpoint is no replying to this 'ping' requests, thus after a while (roughly one minute) the proxy will terminate the call by sending a BYE.</p>

<p>Apparently the device doesn't notice that either, because a bit later it sends a BYE of his own, which is completely wrong but apparently it didn't 'see' the BYE (it didn't reply to it).</p>

<p>The native client does reply to the OPTIONS requests and thus the call stays up.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 24, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Thanks for raising the point. 
Sounds weird because this is managed by pjsip and they reply to OPTIONS. 
Maybe they do not while in call. I'll have a closer look to this point.</p>

<p>On your side can you try to collect logs (see HowToCollectLogs wiki page). Maybe CSipSimple try to send the OPTION reply but not to the right endpoint. (pjsip is very strict regarding that).</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #4</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 24, 2012 by
                  <i class="ng-binding">Happy Elephant</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Sure, I'll make a call right now. Note: it does work on my home wifi so it's not a simple wifi issue :)</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #5</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Feb 24, 2012 by
                  <i class="ng-binding">Happy Elephant</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Checked, it works on corporate wifi today (twice)</p>

<p><a href="https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=bgHpAe2lLT9huUvFAc2TYawijUhD11JZ&amp;fromtag=MJuj3kOeV9-FTVlhVVUJpZU4.i9.-kPO&amp;totag=as38c72717&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1">https://mdns.sipthor.net/CDRTool/sip_trace.phtml?cdr_source=sip_trace_thor&amp;callid=bgHpAe2lLT9huUvFAc2TYawijUhD11JZ&amp;fromtag=MJuj3kOeV9-FTVlhVVUJpZU4.i9.-kPO&amp;totag=as38c72717&amp;proxyIP=85.17.186.7&amp;action=toggleVisibility&amp;toggleVisibility=1&amp;public=1</a></p>

<p>It was a consistent fluke yesterday but seems solved now. If I'm able to reproduce I'll try and log more but for now you can consider this fixed. Thanks :)</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #6</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on May 17, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content -->
              <!-- ngIf: !comment.content --><span ng-if="!comment.content" class="ng-scope">
                <p><em>(No comment was entered for this change.)</em></p>
              </span><!-- end ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Fixed</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>