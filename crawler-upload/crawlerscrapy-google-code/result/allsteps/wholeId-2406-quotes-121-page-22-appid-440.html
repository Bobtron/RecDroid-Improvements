https://code.google.com/archive/p/csipsimple/issues/2427<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #2427</h1>
            <p class="ng-binding">What does "Relaying Denied" mean?</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 5, 2013 by
                  <i class="ng-binding">Helpful Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p><b>What steps will reproduce the problem?</b>
1. Try to call another SIP account on a different VOIP provider
<b>2.</b>
<b>3.</b></p>

<p><b>What is the expected output? What do you see instead?</b>
Can't call, I get "403 / Relaying Denied" error</p>

<p><b>What version of the product are you using? On what device / operating</b>
<b>system?</b>
Latest nightly build r2269</p>

<p><b>Please provide any additional information below.</b>
I can make a call from my computer to phone but I can't make a call from my phone to PC
5060 port is open in my modem</p>

<p>(Account names and Wan IP have been masked)
--end msg--
21:22:26.465 mobile_reg_han  .mod_reg_tracker_on_rx_response
21:22:26.465 mobile_reg_han  .mod_reg_tracker_on_rx_response done
21:22:26.516 evsub0x585b4d1  ....Subscription state changed SENT --&gt; TERMINATED
21:22:26.516   pjsua_pres.c  .....MWI subscription for &lt;sip:mykomturkaccount@sip.komturk.com.tr&gt; is TERMINATED
21:22:28.072   pjsua_call.c !Making call with acc #2 to &lt;sip:myjumbloaccount@sip.jumblo.com&gt;
21:22:28.073    pjsua_aud.c  .Set sound device: capture=-1, playback=-2
21:22:28.073    pjsua_aud.c  ..Opening sound device PCM@16000/1/20ms
21:22:28.073   opensl_dev.c  ...Creating OpenSL stream
21:22:28.075   opensl_dev.c  ...Recording stream type 4, SDK : 16
21:22:28.105 echo_webrtc_ae  ...Create webRTC AEC with clock rate 16000
21:22:28.105   ec0x584cd890  ...WEBRTC AEC created, clock_rate=16000, channel=1, samples per frame=320, tail length=200 ms, latency=100 ms
21:22:28.105   opensl_dev.c  ...Starting OpenSL stream..
21:22:28.388   opensl_dev.c  ...OpenSL stream started
21:22:28.388  pjsua_media.c  .Call 0: initializing media..
21:22:28.389  pjsua_media.c  ..RTP socket reachable at 192.168.2.3:4000
21:22:28.389  pjsua_media.c  ..RTCP socket reachable at 192.168.2.3:4001
21:22:28.389  pjsua_media.c  ..Media index 0 selected for audio call 0
21:22:28.389   pjsua_core.c  ....TX 1027 bytes Request msg INVITE/cseq=4580 (tdta0x5e2de6d8) to UDP 213.243.10.34:5060:
INVITE sip:myjumbloaccount@sip.jumblo.com SIP/2.0
Via: SIP/2.0/UDP 192.168.2.3:60156;rport;branch=z9hG4bKPj0wFhyn.Cgt9NyF5hcUbNVWsW-c2C8kM7
Max-Forwards: 70
From: &lt;sip:mykomturkaccount@sip.komturk.com.tr&gt;;tag=8v2Ui8a0AypQgmgEfVREP79dmvYU-aHW
To: &lt;sip:myjumbloaccount@sip.jumblo.com&gt;
Contact: &lt;sip:mykomturkaccount@myComputerWanIP:60156;ob&gt;
Call-ID: EHf4i0kuE7tg49I2H4igBaxnFx1bgBaW
CSeq: 4580 INVITE
Route: &lt;sip:sip.komturk.com.tr;transport=udp;lr&gt;
Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, INFO, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
Supported: replaces, 100rel, timer, norefersub
Session-Expires: 1800
Min-SE: 90
User-Agent: CSipSimple_t03g-16/r2269
Content-Type: application/sdp
Content-Length:   307</p>

<p>v=0
o=- 3582037348 3582037348 IN IP4 192.168.2.3
s=pjmedia
c=IN IP4 192.168.2.3
t=0 0
m=audio 4000 RTP/AVP 0 102 101
c=IN IP4 192.168.2.3
a=rtcp:4001 IN IP4 192.168.2.3
a=sendrecv
a=rtpmap:0 PCMU/8000
a=rtpmap:102 ILBC/8000
a=fmtp:102 mode=30
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-15</p>

<p>--end msg--
21:22:28.401   ec0x584cd890 !Buffer size adjusted from 2240 to 1761 (eff_cnt=1440)
21:22:28.438   pjsua_core.c !.RX 397 bytes Response msg 403/INVITE/cseq=4580 (rdata0x5e32d624) from UDP 213.243.10.34:5060:
SIP/2.0 403 Relaying Denied
Via: SIP/2.0/UDP 192.168.2.3:60156;rport=60156;branch=z9hG4bKPj0wFhyn.Cgt9NyF5hcUbNVWsW-c2C8kM7;received=myComputerWanIP
From: &lt;sip:mykomturkaccount@sip.komturk.com.tr&gt;;tag=8v2Ui8a0AypQgmgEfVREP79dmvYU-aHW
To: &lt;sip:myjumbloaccount@sip.jumblo.com&gt;;tag=7f32ee2c9e3077a6c5ce</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 5, 2013 by
                  <i class="ng-binding">Helpful Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>I have to ask because I couldn't find anything about "Relaying Denied" on the internet... Sorry</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 6, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Hi,</p>

<p>The message is raised by the sip provider server. So the 100% surely correct reply should come from the sip provider and understand why they return this error when calling different domain.</p>

<p>However, something I can tell from what I've already seen from sip providers : 
Some sip providers doesn't allow (for various reason) to behaves as sip proxy to other sip providers. It's a decision they take (that have nothing to do with SIP protocol). So by constraints they introduce these providers will not allow to forward sip requests.
In this situation the following topology :
You --(a)--&gt; your_provider --(b)--&gt; callee_provider --(c)--&gt; callee</p>

<p>Is broken by "your_provider" because they reply that they don't want to forward the call using "(b)". 
What could also happen is that the "callee_provider" reply that they don't want to forward to callee if "(b)" is not something that comes from their domain.</p>

<p>An alternate configuration/topology is to do the following :
You --(a)--&gt; callee_provider --(c)--&gt; callee.</p>

<p>To get this configuration in csipsimple, you can just modify the sip account to not use your sip provider as a "proxy" (it's possible in advanced and expert wizard -- and you can transform any existing account to a different wizard using long press on account row).
In this case you'll be announced to callee_provider with the sip id of your sip provider but will not use your provider server to reach the callee provider.
It's still possible that callee_provider doesn't want to reply to "(a)". Again, it's depends on what they decide.
Another problem that could also appear is that the callee will not be able to call back using your sip id.</p>

<p>To sum up it's all about what your sip provider and callee sip provider allows. In the spirit of SIP they should all allow to forward requests. SIP is by design close to emails model and it would be a shame that emails providers do not forward emails. However, some SIP providers does. Often because they are not ready to be secured and robust to spam. Some are more open and follow the sip spirit (for example I think sip2sip.info allows that, but there is probably a lot more).</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 6, 2013 by
                  <i class="ng-binding">Helpful Rhino</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Wohoa, Thanks a lot for your informative answer.</p>

<p>I'm using MicroSIP on my computer and I'm able to make a call from my PC to CSipSimple. But vice versa didn't work.</p>

<p>I asked my SIP provider and they said they don't allow calling other SIP Providers. Then I told them that I made a call from my PC to my phone using their account. They said that It's impossible :)
They requested more information about it but I won't give them any more :)</p>

<p>"you can just modify the sip account to not use your sip provider as a "proxy" (it's possible in advanced and expert wizard"
I'm right there but couldn't succeed. Which option(s) does that?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #4</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jul 6, 2013 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>"I'm right there but couldn't succeed. Which option(s) does that?"</p>

<p>So first step is to convert the account to expert or advanced. To do so :
- long press the account row
- select choose wizard
- pick advanced or expert (in generic section)</p>

<p>Then edit the account.
You'll see a lot of new options.
In advanced wizard it should be the last option, something like sip proxy (I don't remember the exact label)
In expert wizard it should be close to the end too with something like sip proxy server too. 
In both mode, remove the field content (it should be set by default to the sip provider domain name if the domain were created with a different wizard).</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Invalid</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>