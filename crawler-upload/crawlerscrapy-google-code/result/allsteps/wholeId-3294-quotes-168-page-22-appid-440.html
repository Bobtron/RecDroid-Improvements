https://code.google.com/archive/p/csipsimple/issues/1518<!DOCTYPE html><html class="google ng-scope" lang="en" ng-app="codesiteArchive.application"><head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">

    <!-- https://developers.google.com/webmasters/ajax-crawling/docs/specification -->
    <meta name="fragment" content="!">
    <title>Google Code Archive - Long-term storage for Google Code Project Hosting.</title>

    <link rel="icon" type="image/vnd.microsoft.icon" href="/archive/img/project-hosting.ico">
    <script src="//www.google.com/js/google.js"></script>
    <link href="//www.google.com/css/maia.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en" rel="stylesheet">
    <link rel="stylesheet" href="/archive/archive_css.css">
    <script>
      CLOSURE_NO_DEPS = true;
    </script>
    <script src="/archive/angular.js"></script><style type="text/css">@charset "UTF-8";

[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide:not(.ng-hide-animate) {
  display: none !important;
}

ng\:form {
  display: block;
}

.ng-animate-shim {
  visibility:hidden;
}

.ng-anchor {
  position:absolute;
}
</style>
    <script src="/archive/pagedown.js"></script>
    <script src="/archive/archive.js"></script>
    <base href="/archive/">
  </head>

  <body>
    <div class="maia-header" id="maia-header" role="banner">
      <div class="maia-aux">
        <a href="/archive/">
          </a><h1><a href="/archive/">
            <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png"> Code</a>
          </h1>
        
        <a href="/archive/">
          <h2>Archive</h2>
        </a>
        <a class="maia-teleport" href="#content">Skip to content</a>
        <div class="maia-util">
          <form action="/archive/search" class="maia-search ng-pristine ng-valid">
            <input name="q" placeholder="Search this site" type="text">
            <button class="maia-button">
              <span class="maia-search-icon">Search</span>
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ngView: --><div ng-view="" class="ng-scope"><div ng-controller="ProjectIssueCtrl as issueCtrl" class="ng-scope">
<nav-bar-widget nav-level-1="projectCtrl.navLevel1" class="ng-isolate-scope"><div class="maia-nav maia-complex" id="maia-nav-x" role="navigation">
  <div class="maia-aux">
    <ul>
      <li ng-class="{active: navLevel1 == 'projects'}">
        <a href="/archive/">Projects</a>
        <!-- ngIf: navLevel2 -->
      </li>
      <li ng-class="{active: navLevel1 == 'search'}">
        <a href="/archive/search">Search</a>
      </li>
      <li ng-class="{active: navLevel1 == 'about'}">
        <a href="/archive/about">About</a>
      </li>
    </ul>
  </div>
</div>
</nav-bar-widget>
<div id="maia-main" role="main">

  <!-- ngIf: issueCtrl.notFound -->

  <div ng-hide="issueCtrl.notFound">
    <!-- Left-side resource nav -->
    <project-resources-widget domain="issueCtrl.domain" project="issueCtrl.projectName" class="ng-isolate-scope"><div class="maia-nav" id="maia-nav-y" role="navigation">
  <!-- ngIf: domain == 'code.google.com' --><ul ng-if="domain == 'code.google.com'" class="ng-scope">
    <li class="active">
      <a href="/archive/p/csipsimple/">Project</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/source">Source</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/issues">Issues</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/wikis">Wikis</a>
    </li>
    <li>
      <a href="/archive/p/csipsimple/downloads">Downloads</a>
    </li>
  </ul><!-- end ngIf: domain == 'code.google.com' -->

    <!-- ngIf: domain != 'code.google.com' -->
</div></project-resources-widget>

    <div class="maia-article" role="article">
      <div class="maia-teleport" id="content"></div>
      <div class="maia-cols">
        <div id="gca-project-header" class="maia-col-10">
          <a id="gca-export-to-gh" class="maia-button" href="https://code.google.com/export-to-github/export?project=csipsimple">Export to GitHub</a>
            <img class="gca-project-logo" src="https://storage.googleapis.com/google-code-archive/v2/code.google.com/csipsimple/logo.png">
            <h1 class="ng-binding">csipsimple - issue #1518</h1>
            <p class="ng-binding">CSipSimple over 3G network cannot register to minisipserver</p>
        </div>

        <div class="maia-col-10">
          <hr>

        <!-- ngIf: issueCtrl.error -->

        <!-- ngIf: !issueCtrl.error --><div ng-if="!issueCtrl.error" class="ng-scope">
          <!-- Comments -->
          <div class="maia-col-8">
            <!-- ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 19, 2012 by
                  <i class="ng-binding">Happy Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p><b>What steps will reproduce the problem?</b>
1. enable 3G network, start csipsimple to register to minisipserver. csipsimple displays time-out, but minisipserver display ok.
2. enable wifi network, start csipsimple to register to minisipserver. everything is ok.</p>

<p><b>What is the expected output? What do you see instead?</b>
over 3G network, csipsimple should register to minisipserver.</p>

<p><b>What version of the product are you using? On what operating system?</b>
android.</p>

<p><b>Please provide any additional information below.</b>
==&gt; I captured SIP messages from miniSipServer, please take a look:
01/19/12 12:35:13 | MSS receives SIP message from 80.27.98.81:20774:
REGISTER sip:178.18.128.163 SIP/2.0
Via: SIP/2.0/UDP 80.27.98.81:1115;rport;branch=z9hG4bKPjc0DLfAsiCwZJmPnFSB6WyiEYzrzkNLxL
Route: &lt;sip:80.27.98.81:1115;transport=udp;lr&gt;
Max-Forwards: 70
From: "111" &lt;sip:111@178.18.128.163&gt;;tag=7GYMTqq7OY4TAhnRc9YlxUabpWB.0SKb
To: "111" &lt;sip:111@178.18.128.163&gt;
Call-ID: Rg3FQfxwM.CRgXjZ1QpjKlaKbwXkVbC8
CSeq: 103 REGISTER
User-Agent: CSipSimple r1108 / hwu8800Pro-8
Contact: "111" &lt;sip:111@80.27.98.81:20760;ob&gt;
Expires: 120
Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
Content-Length: 0</p>

<p>01/19/12 12:35:13 | SIP/2.0 407 Proxy Authentication Required
Via: SIP/2.0/UDP 80.27.98.81:1115;received=80.27.98.81;rport=20774;branch=z9hG4bKPjc0DLfAsiCwZJmPnFSB6WyiEYzrzkNLxL
From: "111" &lt;sip:111@178.18.128.163&gt;;tag=7GYMTqq7OY4TAhnRc9YlxUabpWB.0SKb
To: "111" &lt;sip:111@178.18.128.163&gt;;tag=2202397a
CSeq: 103 REGISTER
Call-ID: Rg3FQfxwM.CRgXjZ1QpjKlaKbwXkVbC8
Allow: INVITE, OPTIONS, ACK, CANCEL, BYE, REFER, SUBSCRIBE, NOTIFY, MESSAGE
User-Agent: miniSipServer V4.0.3 (20 clients) build Jan 19 2012
Proxy-Authenticate: Digest realm="",algorithm=MD5,nonce="1b6449e21a264cd1665c71444563382e",stale=FALSE
Content-Length: 0</p>

<p>01/19/12 12:35:14 | MSS receives SIP message from 80.27.98.81:20774:
REGISTER sip:178.18.128.163 SIP/2.0
Via: SIP/2.0/UDP 80.27.98.81:1115;rport;branch=z9hG4bKPjuCPEAIiVZlq5U37x.7XfY6OqP6ixi.fG
Route: &lt;sip:80.27.98.81:1115;transport=udp;lr&gt;
Max-Forwards: 70
From: "111" &lt;sip:111@178.18.128.163&gt;;tag=7GYMTqq7OY4TAhnRc9YlxUabpWB.0SKb
To: "111" &lt;sip:111@178.18.128.163&gt;
Call-ID: Rg3FQfxwM.CRgXjZ1QpjKlaKbwXkVbC8
CSeq: 104 REGISTER
User-Agent: CSipSimple r1108 / hwu8800Pro-8
Contact: "111" &lt;sip:111@80.27.98.81:20760;ob&gt;
Expires: 120
Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
Proxy-Authorization: Digest username="111", nonce="1b6449e21a264cd1665c71444563382e", uri="sip:178.18.128.163", response="f1d5184c95f835302f300014266be599", algorithm=MD5
Content-Length: 0</p>

<p>01/19/12 12:35:14 | MSS sends following SIP message to peer GW or UA(80.27.98.81:20774):
01/19/12 12:35:14 | SIP/2.0 200 OK
Via: SIP/2.0/UDP 80.27.98.81:1115;received=80.27.98.81;rport=20774;branch=z9hG4bKPjuCPEAIiVZlq5U37x.7XfY6OqP6ixi.fG
From: "111" &lt;sip:111@178.18.128.163&gt;;tag=7GYMTqq7OY4TAhnRc9YlxUabpWB.0SKb
To: "111" &lt;sip:111@178.18.128.163&gt;;tag=78e435e2
CSeq: 104 REGISTER
Call-ID: Rg3FQfxwM.CRgXjZ1QpjKlaKbwXkVbC8
Allow: INVITE, OPTIONS, ACK, CANCEL, BYE, REFER, SUBSCRIBE, NOTIFY, MESSAGE
User-Agent: miniSipServer V4.0.3 (20 clients) build Jan 19 2012
Contact: &lt;sip:111@80.27.98.81:20760&gt;
Expires: 120
Content-Length: 0</p>

<p>01/19/12 12:35:52 | MSS receives SIP message from 80.27.98.81:20785:
REGISTER sip:178.18.128.163 SIP/2.0
Via: SIP/2.0/UDP 80.27.98.81:1116;rport;branch=z9hG4bKPjWFfQ9eAlGSfZwfUF7Lg6SAABY8IpNkhI
Route: &lt;sip:80.27.98.81:1116;transport=udp;lr&gt;
Max-Forwards: 70
From: "111" &lt;sip:111@178.18.128.163&gt;;tag=6cwflbRlpZUQORYICy97nSn7e.l3IlgK
To: "111" &lt;sip:111@178.18.128.163&gt;
Call-ID: YbehmpxhjjkBQHG6Dwb0IE35NWs40kKa
CSeq: 46585 REGISTER
User-Agent: CSipSimple r1108 / hwu8800Pro-8
Contact: "111" &lt;sip:111@80.27.98.81:20774;ob&gt;
Expires: 120
Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
Content-Length: 0</p>

<p>01/19/12 12:35:52 | MSS sends following SIP message to peer GW or UA(80.27.98.81:20785):
01/19/12 12:35:52 | SIP/2.0 407 Proxy Authentication Required
Via: SIP/2.0/UDP 80.27.98.81:1116;received=80.27.98.81;rport=20785;branch=z9hG4bKPjWFfQ9eAlGSfZwfUF7Lg6SAABY8IpNkhI
From: "111" &lt;sip:111@178.18.128.163&gt;;tag=6cwflbRlpZUQORYICy97nSn7e.l3IlgK
To: "111" &lt;sip:111@178.18.128.163&gt;;tag=534a5132
CSeq: 46585 REGISTER
Call-ID: YbehmpxhjjkBQHG6Dwb0IE35NWs40kKa
Allow: INVITE, OPTIONS, ACK, CANCEL, BYE, REFER, SUBSCRIBE, NOTIFY, MESSAGE
User-Agent: miniSipServer V4.0.3 (20 clients) build Jan 19 2012
Proxy-Authenticate: Digest realm="",algorithm=MD5,nonce="67a128cc7919293c606024371d1d24a0",stale=FALSE
Content-Length: 0</p>

<p>01/19/12 12:35:52 | MSS receives SIP message from 80.27.98.81:20785:
REGISTER sip:178.18.128.163 SIP/2.0
Via: SIP/2.0/UDP 80.27.98.81:1116;rport;branch=z9hG4bKPjMq.iwZXMaDSIeznYcMnaMH0S9yYyquwz
Route: &lt;sip:80.27.98.81:1116;transport=udp;lr&gt;
Max-Forwards: 70
From: "111" &lt;sip:111@178.18.128.163&gt;;tag=6cwflbRlpZUQORYICy97nSn7e.l3IlgK
To: "111" &lt;sip:111@178.18.128.163&gt;
Call-ID: YbehmpxhjjkBQHG6Dwb0IE35NWs40kKa
CSeq: 46586 REGISTER
User-Agent: CSipSimple r1108 / hwu8800Pro-8
Contact: "111" &lt;sip:111@80.27.98.81:20774;ob&gt;
Expires: 120
Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
Proxy-Authorization: Digest username="111", nonce="67a128cc7919293c606024371d1d24a0", uri="sip:178.18.128.163", response="0dce65bf89508956c5c1fd6764009c82", algorithm=MD5
Content-Length: 0</p>

<p>01/19/12 12:35:52 | MSS sends following SIP message to peer GW or UA(80.27.98.81:20785):
01/19/12 12:35:52 | SIP/2.0 200 OK
Via: SIP/2.0/UDP 80.27.98.81:1116;received=80.27.98.81;rport=20785;branch=z9hG4bKPjMq.iwZXMaDSIeznYcMnaMH0S9yYyquwz
From: "111" &lt;sip:111@178.18.128.163&gt;;tag=6cwflbRlpZUQORYICy97nSn7e.l3IlgK
To: "111" &lt;sip:111@178.18.128.163&gt;;tag=78e435e2
CSeq: 46586 REGISTER
Call-ID: YbehmpxhjjkBQHG6Dwb0IE35NWs40kKa
Allow: INVITE, OPTIONS, ACK, CANCEL, BYE, REFER, SUBSCRIBE, NOTIFY, MESSAGE
User-Agent: miniSipServer V4.0.3 (20 clients) build Jan 19 2012
Contact: &lt;sip:111@80.27.98.81:20774&gt;
Expires: 120
Content-Length: 0</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #1</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 19, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>It behaves as if 3G network blocked the last 200 OK.</p>

<p>Can you try to collect logs from the app. (See HowToCollectLogs wiki page).
Just to be sure that the app actually does not receive the last message.</p>

<p>I often see mobile carrier that do deep packet inspection and block sip traffic. 
Does your mobile carrier announce that they allow sip usage?</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #2</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 24, 2012 by
                  <i class="ng-binding">Happy Giraffe</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Thanks for your suggestion. </p>

<p>We captured the csipsimple log. It seems it received 200OK from sip server. In the log, I found something interesting:</p>

<p>200OK message returned "rport" parameter, it displayed that the socket port was different with the port in SIP message. So Csipsimple use the new port to re-send some new REGISTER messages. But it is very strange, in the wireshark or minisipserver trace tool, we cannot capture these new REGISTER messages. That's why csipsimple displayed time-out.</p>

<p>Can anybody take a check to find what happened?</p>

<p>I don't know how to attach a text file in this comment, so I have to paste it here:</p>

<hr>

<p>V/DATA    (  245): [DCT] cid = 0, state = DcActiveState, ipv = IPV4, ipaddress = 10.176.116.205, gw=10.176.116.206, dns=[80.58.61.250, ]
D/libpjsip(26390):  11:39:37.126 timer_android.  FIRE timer 1 at 2a4e0c
D/libpjsip(26390):  11:39:37.128   pjsua_core.c  TX 618 bytes Request msg REGISTER/cseq=43924 (tdta0x28fcb8) to UDP 178.18.128.163:5060:
D/libpjsip(26390): REGISTER sip:178.18.128.163 SIP/2.0
D/libpjsip(26390): Via: SIP/2.0/UDP 80.27.98.66:24861;rport;branch=z9hG4bKPj.OD4B7o1zLGuEeonPiv3Z.kLIbDSWZtA
D/libpjsip(26390): Route: 
D/libpjsip(26390): Max-Forwards: 70
D/libpjsip(26390): From: "111" ;tag=4qNynpLBFe.9nw3ogTOliZtdSi5DwzJN
D/libpjsip(26390): To: "111" 
D/libpjsip(26390): Call-ID: UVA84aaB6KifRxpp.4ei9REuJSmsEGkB
D/libpjsip(26390): CSeq: 43924 REGISTER
D/libpjsip(26390): User-Agent: CSipSimple r1108 / hwu8800Pro-8
D/libpjsip(26390): Contact: "111" 
D/libpjsip(26390): Expires: 120
D/libpjsip(26390): Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
D/libpjsip(26390): Content-Length:  0
D/libpjsip(26390): 
D/libpjsip(26390): 
D/libpjsip(26390): --end msg--
D/libpjsip(26390):  11:39:37.128 timer_android.  FIRE done and released
D/libpjsip(26390):  11:39:37.400   pjsua_core.c  RX 637 bytes Response msg 407/REGISTER/cseq=43924 (rdata0x2a0774) from UDP 178.18.128.163:5060:
D/libpjsip(26390): SIP/2.0 407 Proxy Authentication Required
D/libpjsip(26390): Via: SIP/2.0/UDP 80.27.98.66:24861;received=80.27.98.66;rport=24870;branch=z9hG4bKPj.OD4B7o1zLGuEeonPiv3Z.kLIbDSWZtA
D/libpjsip(26390): From: "111" ;tag=4qNynpLBFe.9nw3ogTOliZtdSi5DwzJN
D/libpjsip(26390): To: "111" ;tag=15e345a9
D/libpjsip(26390): CSeq: 43924 REGISTER
D/libpjsip(26390): Call-ID: UVA84aaB6KifRxpp.4ei9REuJSmsEGkB
D/libpjsip(26390): Allow: INVITE, OPTIONS, ACK, CANCEL, BYE, REFER, SUBSCRIBE, NOTIFY, MESSAGE
D/libpjsip(26390): User-Agent: miniSipServer V4.0.3 (20 clients) build Jan 19 2012
D/libpjsip(26390): Proxy-Authenticate: Digest realm="",algorithm=MD5,nonce="1ee228c91cd0543b596655cb5259072d",stale=FALSE
D/libpjsip(26390): Content-Length: 0
D/libpjsip(26390): 
D/libpjsip(26390): 
D/libpjsip(26390): --end msg--
D/libpjsip(26390):  11:39:37.406 timer_android.  Ask to cancel something already fired or cancelled : -1
D/libpjsip(26390):  11:39:37.407   pjsua_core.c  TX 790 bytes Request msg REGISTER/cseq=43925 (tdta0x28fcb8) to UDP 178.18.128.163:5060:
D/libpjsip(26390): REGISTER sip:178.18.128.163 SIP/2.0
D/libpjsip(26390): Via: SIP/2.0/UDP 80.27.98.66:24861;rport;branch=z9hG4bKPjMHehD9kt-dq1MpdBhs9CCUh.ynoKCDWs
D/libpjsip(26390): Route: 
D/libpjsip(26390): Max-Forwards: 70
D/libpjsip(26390): From: "111" ;tag=4qNynpLBFe.9nw3ogTOliZtdSi5DwzJN
D/libpjsip(26390): To: "111" 
D/libpjsip(26390): Call-ID: UVA84aaB6KifRxpp.4ei9REuJSmsEGkB
D/libpjsip(26390): CSeq: 43925 REGISTER
D/libpjsip(26390): User-Agent: CSipSimple r1108 / hwu8800Pro-8
D/libpjsip(26390): Contact: "111" 
D/libpjsip(26390): Expires: 120
D/libpjsip(26390): Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
D/libpjsip(26390): Proxy-Authorization: Digest username="111", nonce="1ee228c91cd0543b596655cb5259072d", uri="sip:178.18.128.163", response="944c3caf6fb97fe615af1d335c868b9f", algorithm=MD5
D/libpjsip(26390): Content-Length:  0
D/libpjsip(26390): 
D/libpjsip(26390): 
D/libpjsip(26390): --end msg--
D/libpjsip(26390):  11:39:37.606   pjsua_core.c  RX 558 bytes Response msg 200/REGISTER/cseq=43925 (rdata0x2a0774) from UDP 178.18.128.163:5060:
D/libpjsip(26390): SIP/2.0 200 OK
D/libpjsip(26390): Via: SIP/2.0/UDP 80.27.98.66:24861;received=80.27.98.66;rport=24870;branch=z9hG4bKPjMHehD9kt-dq1MpdBhs9CCUh.ynoKCDWs
D/libpjsip(26390): From: "111" ;tag=4qNynpLBFe.9nw3ogTOliZtdSi5DwzJN
D/libpjsip(26390): To: "111" ;tag=327d2371
D/libpjsip(26390): CSeq: 43925 REGISTER
D/libpjsip(26390): Call-ID: UVA84aaB6KifRxpp.4ei9REuJSmsEGkB
D/libpjsip(26390): Allow: INVITE, OPTIONS, ACK, CANCEL, BYE, REFER, SUBSCRIBE, NOTIFY, MESSAGE
D/libpjsip(26390): User-Agent: miniSipServer V4.0.3 (20 clients) build Jan 19 2012
D/libpjsip(26390): Contact: 
D/libpjsip(26390): Expires: 120
D/libpjsip(26390): Content-Length: 0
D/libpjsip(26390): 
D/libpjsip(26390): 
D/libpjsip(26390): --end msg--
D/libpjsip(26390):  11:39:37.609 timer_android.  Ask to cancel something already fired or cancelled : -1
D/libpjsip(26390):  11:39:37.622    pjsua_acc.c  SIP outbound status for acc 2 is not active
I/libpjsip(26390):  11:39:37.622    pjsua_acc.c  IP address change detected for account 2 (80.27.98.66:24861 --&gt; 80.27.98.66:24870). Updating registration (using method 2)
D/libpjsip(26390):  11:39:37.623 timer_android.  Ask to cancel something already fired or cancelled : -1
D/libpjsip(26390):  11:39:37.636   pjsua_core.c  TX 855 bytes Request msg REGISTER/cseq=43926 (tdta0x290cc0) to UDP 178.18.128.163:5060:
D/libpjsip(26390): REGISTER sip:178.18.128.163 SIP/2.0
D/libpjsip(26390): Via: SIP/2.0/UDP 80.27.98.66:24870;rport;branch=z9hG4bKPjIrH.Z2T4P2t2SPnbLoaxXpvgU9ccxKqP
D/libpjsip(26390): Route: 
D/libpjsip(26390): Max-Forwards: 70
D/libpjsip(26390): From: "111" ;tag=9TI7Iy.QYKFo7roKKXTOCAjR.le1yUDM
D/libpjsip(26390): To: "111" 
D/libpjsip(26390): Call-ID: UVA84aaB6KifRxpp.4ei9REuJSmsEGkB
D/libpjsip(26390): CSeq: 43926 REGISTER
D/libpjsip(26390): Proxy-Authorization: Digest username="111", nonce="1ee228c91cd0543b596655cb5259072d", uri="sip:178.18.128.163", response="944c3caf6fb97fe615af1d335c868b9f", algorithm=MD5
D/libpjsip(26390): User-Agent: CSipSimple r1108 / hwu8800Pro-8
D/libpjsip(26390): Contact: 
D/libpjsip(26390): Contact: "111" ;expires=0
D/libpjsip(26390): Expires: 120
D/libpjsip(26390): Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
D/libpjsip(26390): Content-Length:  0
D/libpjsip(26390): 
D/libpjsip(26390): 
D/libpjsip(26390): --end msg--
I/libpjsip(26390):  11:39:37.665    pjsua_acc.c  Registration sent
I/ActivityManager(  166): Starting activity: Intent { cmp=com.csipsimple/.ui.help.Help }
D/libpjsip(26390):  11:39:38.179 timer_android.  FIRE timer 4 at 2dbef4
D/libpjsip(26390):  11:39:38.183   pjsua_core.c  TX 855 bytes Request msg REGISTER/cseq=43926 (tdta0x290cc0) to UDP 178.18.128.163:5060:
D/libpjsip(26390): REGISTER sip:178.18.128.163 SIP/2.0
D/libpjsip(26390): Via: SIP/2.0/UDP 80.27.98.66:24870;rport;branch=z9hG4bKPjIrH.Z2T4P2t2SPnbLoaxXpvgU9ccxKqP
D/libpjsip(26390): Route: 
D/libpjsip(26390): Max-Forwards: 70
D/libpjsip(26390): From: "111" ;tag=9TI7Iy.QYKFo7roKKXTOCAjR.le1yUDM
D/libpjsip(26390): To: "111" 
D/libpjsip(26390): Call-ID: UVA84aaB6KifRxpp.4ei9REuJSmsEGkB
D/libpjsip(26390): CSeq: 43926 REGISTER
D/libpjsip(26390): Proxy-Authorization: Digest username="111", nonce="1ee228c91cd0543b596655cb5259072d", uri="sip:178.18.128.163", response="944c3caf6fb97fe615af1d335c868b9f", algorithm=MD5
D/libpjsip(26390): User-Agent: CSipSimple r1108 / hwu8800Pro-8
D/libpjsip(26390): Contact: 
D/libpjsip(26390): Contact: "111" ;expires=0
D/libpjsip(26390): Expires: 120
D/libpjsip(26390): Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
D/libpjsip(26390): Content-Length:  0
D/libpjsip(26390): 
D/libpjsip(26390): 
D/libpjsip(26390): --end msg--
D/libpjsip(26390):  11:39:38.183 timer_android.  FIRE done and released
D/SIP_HOME(26396): On Pause SIPHOME
D/Dialer  (26396): Pausing dialer
I/ActivityManager(  166): Displayed activity com.csipsimple/.ui.help.Help: 80 ms (total 80 ms)
D/libpjsip(26390):  11:39:39.190 timer_android.  FIRE timer 4 at 2dbef4
D/libpjsip(26390):  11:39:39.192   pjsua_core.c  TX 855 bytes Request msg REGISTER/cseq=43926 (tdta0x290cc0) to UDP 178.18.128.163:5060:
D/libpjsip(26390): REGISTER sip:178.18.128.163 SIP/2.0
D/libpjsip(26390): Via: SIP/2.0/UDP 80.27.98.66:24870;rport;branch=z9hG4bKPjIrH.Z2T4P2t2SPnbLoaxXpvgU9ccxKqP
D/libpjsip(26390): Route: 
D/libpjsip(26390): Max-Forwards: 70
D/libpjsip(26390): From: "111" ;tag=9TI7Iy.QYKFo7roKKXTOCAjR.le1yUDM
D/libpjsip(26390): To: "111" 
D/libpjsip(26390): Call-ID: UVA84aaB6KifRxpp.4ei9REuJSmsEGkB
D/libpjsip(26390): CSeq: 43926 REGISTER
D/libpjsip(26390): Proxy-Authorization: Digest username="111", nonce="1ee228c91cd0543b596655cb5259072d", uri="sip:178.18.128.163", response="944c3caf6fb97fe615af1d335c868b9f", algorithm=MD5
D/libpjsip(26390): User-Agent: CSipSimple r1108 / hwu8800Pro-8
D/libpjsip(26390): Contact: 
D/libpjsip(26390): Contact: "111" ;expires=0
D/libpjsip(26390): Expires: 120
D/libpjsip(26390): Allow: PRACK, INVITE, ACK, BYE, CANCEL, UPDATE, SUBSCRIBE, NOTIFY, REFER, MESSAGE, OPTIONS
D/libpjsip(26390): Content-Length:  0
D/libpjsip(26390): 
D/libpjsip(26390): 
D/libpjsip(26390): --end msg--
D/libpjsip(26390):  11:39:39.192 timer_android.  FIRE done and released
E/Help    (26396): Clicked on record logs line while isRecording is : true
D/Collect Logs(26396): [logcat, -f, /mnt/sdcard/CSipSimple/logs/logs_01-21-12_113939.txt]
I/global  (26396): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments --><div ng-repeat="comment in issueCtrl.issue.comments" class="ng-scope">
              <div>
                <!-- ngIf: comment.id --><h3 ng-if="comment.id" class="ng-binding ng-scope">Comment #3</h3><!-- end ngIf: comment.id -->
                <!-- ms to seconds. -->
                <small class="ng-binding">
                  Posted on Jan 25, 2012 by
                  <i class="ng-binding">Quick Hippo</i>
                </small>
              </div>

              <!-- TODO(chrsmith): Get the formatting right. Google Code comments
              are not stored in wiki/markdown or HTML format. So we probably need to
              create a custom filter to get 100% paritiy. -->
              <!-- ngIf: comment.content --><span ng-if="comment.content" class="ng-scope">
                <markdown-widget text="comment.content" class="markdown"><p>Yep, this double registration process is a behavior of pjsip to try to get rid of nat problems. However, sometimes, when sip server does things to manage nat on its side it can break things.</p>

<p>You can try to disable it by :
Go in accounts, long press on you account, click on "choose wizard" and select Expert wizard.
Then, edit the account, (you'll see that there is many new settings ;) ), and disable "Allow contact rewrite" option.</p>

<p>It will at least simplify the register process.</p>

<p>However, on your description it sounds more about a problem on an INVITE than on a register. So I'm not sure that you'll get things working.
So do not hesitate to copy paste logs about the INVITE which are more relevant of the problem.</p>

<p>Also what often happens is the sip transactions get lost because of the fact SIP may send subsequent requests to the remote side directly (unless the sip proxy server does its job correctly). In this case, all SIP client that correctly respect sip RFCs will fail with your server + network topology however.</p></markdown-widget>
              </span><!-- end ngIf: comment.content -->
              <!-- ngIf: !comment.content -->

              <!-- ngIf: comment.attachments.length -->
              <!-- ngRepeat: attachment in comment.attachments -->
            </div><!-- end ngRepeat: comment in issueCtrl.issue.comments -->
          </div>

          <!-- Sidebar with additional information -->
          <div class="maia-col-4">
            <div class="maia-aside">
              <p>Status: <code class="ng-binding">Need-Details</code></p>
              <!-- ngIf: issueCtrl.issue.labels.length > 0 --><p ng-if="issueCtrl.issue.labels.length &gt; 0" class="ng-scope">
                Labels:
                <br>
                <!-- ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Type-Defect</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index --><span ng-repeat="label in issueCtrl.issue.labels track by $index" class="ng-scope">
                  <span class="gca-label ng-binding">Priority-Medium</span>
                </span><!-- end ngRepeat: label in issueCtrl.issue.labels track by $index -->
              </p><!-- end ngIf: issueCtrl.issue.labels.length > 0 -->
            </div>
          </div>
        </div><!-- end ngIf: !issueCtrl.error -->
      </div>
    </div>

  </div>
</div>
</div></div></div>
    <noscript>
      &lt;p&gt;The Google Code Archive requires JavaScript to be enabled in your browser.&lt;/p&gt;
    </noscript>

    <div id="maia-signature"></div>
    <div class="maia-footer" id="maia-footer">
      <div id="maia-footer-local">
      </div>
      <div id="maia-footer-global">
        <div class="maia-aux">
          <ul>
            <li>
              <a href="//www.google.com/">Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/about/">About Google</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
            </li>
            <li>
              <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <script src="//www.google.com/js/maia.js"></script>
  


</body></html>