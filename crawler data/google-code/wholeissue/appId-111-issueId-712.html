https://github.com/microg/AppleWifiNlpBackend/issues/7





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://assets-cdn.github.com">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" media="all" integrity="sha512-qQ+v+W1uJYfDMrQ/cwCVI+AGTsn1yi4rCU6KX45obe52BoF+WiHNeQ11u63iJA05vyivY57xNbhAsyK4/j1ZIQ==" rel="stylesheet" href="https://assets-cdn.github.com/assets/frameworks-01356238c65ce56a395237b592b58668.css" />
  <link crossorigin="anonymous" media="all" integrity="sha512-7yYV8wJ4BPf4U5EUeyvRcyknxBActQrfmqbpWbjd7YFg0IwGo9LqgF+LZDcTkHtRGe9qFHs8K4q+myXUV1PDtA==" rel="stylesheet" href="https://assets-cdn.github.com/assets/github-48c53378d4f1a26f1652c879f8c3cbbf.css" />
  
  
  <link crossorigin="anonymous" media="all" integrity="sha512-2jE+5s+6LV2ckEshC+YTwb0A/IhES9iLMcwfkkybRMMGemXcEjAx8wdd2ZbbVr1dYBJt+fkCaR+UvXiybFr/sA==" rel="stylesheet" href="https://assets-cdn.github.com/assets/site-99075769314a73391cea9aa2907a29f9.css" />
  

  <meta name="viewport" content="width=device-width">
  
  <title>Add caching configuration · Issue #7 · microg/AppleWifiNlpBackend · GitHub</title>
    <meta name="description" content="It&#39;s not entirely clear for me as an user how the cache works. I keep seeing data usage even for places that should be completely cached by now. How long is location data cached for? I propose that the caching duration be configurable. T...">
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta property="og:image" content="https://avatars0.githubusercontent.com/u/781030?s=400&amp;v=4" /><meta property="og:site_name" content="GitHub" /><meta property="og:type" content="object" /><meta property="og:title" content="Add caching configuration · Issue #7 · microg/AppleWifiNlpBackend" /><meta property="og:url" content="https://github.com/microg/AppleWifiNlpBackend/issues/7" /><meta property="og:description" content="It&amp;#39;s not entirely clear for me as an user how the cache works. I keep seeing data usage even for places that should be completely cached by now. How long is location data cached for? I propose ..." />

  <link rel="assets" href="https://assets-cdn.github.com/">
  
  <meta name="pjax-timeout" content="1000">
  
  <meta name="request-id" content="F105:5113:6C0227:D4096B:5B64933F" data-pjax-transient>

    <meta name="hovercard-subject-tag" content="issue:59221600" data-pjax-transient>

  

  <meta name="selected-link" value="repo_issues" data-pjax-transient>

    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">
    <meta name="google-analytics" content="UA-3769691-2">

<meta name="octolytics-host" content="collector.githubapp.com" /><meta name="octolytics-app-id" content="github" /><meta name="octolytics-event-url" content="https://collector.githubapp.com/github-external/browser_event" /><meta name="octolytics-dimension-request_id" content="F105:5113:6C0227:D4096B:5B64933F" /><meta name="octolytics-dimension-region_edge" content="iad" /><meta name="octolytics-dimension-region_render" content="iad" />
<meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/issues/show" data-pjax-transient="true" />




<meta class="js-ga-set" name="dimension1" content="Logged Out">


  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="ZjYzM2IzMzNkZGVhZmE0YmExYWFjMTNjNzNjMzljZGQ5OGMyODJmOTljZGI2MDNhMDIxYjkyYWNlNWYxMGJhZXx7InJlbW90ZV9hZGRyZXNzIjoiMTI4LjE2My4yMzguNzYiLCJyZXF1ZXN0X2lkIjoiRjEwNTo1MTEzOjZDMDIyNzpENDA5NkI6NUI2NDkzM0YiLCJ0aW1lc3RhbXAiOjE1MzMzMTc5NTQsImhvc3QiOiJnaXRodWIuY29tIn0=">

    <meta name="enabled-features" content="DASHBOARD_V2_LAYOUT_OPT_IN,EXPLORE_DISCOVER_REPOSITORIES,UNIVERSE_BANNER,FREE_TRIALS,MARKETPLACE_INSIGHTS,MARKETPLACE_PLAN_RESTRICTION_EDITOR,MARKETPLACE_SEARCH,MARKETPLACE_INSIGHTS_CONVERSION_PERCENTAGES">

  <meta name="html-safe-nonce" content="985d301e0b1e6b4060236fc5f2b40ff132431b37">

  <meta http-equiv="x-pjax-version" content="bd07d8f74cd963f34fa7e8a35a7c98b3">
  

      <link href="https://github.com/microg/AppleWifiNlpBackend/commits/master.atom" rel="alternate" title="Recent Commits to AppleWifiNlpBackend:master" type="application/atom+xml">

  <meta name="go-import" content="github.com/microg/AppleWifiNlpBackend git https://github.com/microg/AppleWifiNlpBackend.git">

  <meta name="octolytics-dimension-user_id" content="2758598" /><meta name="octolytics-dimension-user_login" content="microg" /><meta name="octolytics-dimension-repository_id" content="17641760" /><meta name="octolytics-dimension-repository_nwo" content="microg/AppleWifiNlpBackend" /><meta name="octolytics-dimension-repository_public" content="true" /><meta name="octolytics-dimension-repository_is_fork" content="false" /><meta name="octolytics-dimension-repository_network_root_id" content="17641760" /><meta name="octolytics-dimension-repository_network_root_nwo" content="microg/AppleWifiNlpBackend" /><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false" />




  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">



<link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-out env-production">
    

  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="px-2 py-4 bg-blue text-white show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    



        


  <header class="Header header-logged-out  position-relative f4 py-3" role="banner" >
    <div class="container-lg d-flex px-3">
      <div class="d-flex flex-justify-between flex-items-center">
        <a class="header-logo-invertocat my-0" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark; experiment:site_header_dropdowns; group:control">
          <svg height="32" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
        </a>

      </div>

      <div class="HeaderMenu d-flex flex-justify-between flex-auto">
          <nav class="mt-0">
            <ul class="d-flex list-style-none">
                <li class="ml-2">
                  <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:features; experiment:site_header_dropdowns; group:control" data-selected-links="/features /features/project-management /features/code-review /features/project-management /features/integrations /features" href="/features">
                    Features
</a>                </li>
                <li class="ml-4">
                  <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:business; experiment:site_header_dropdowns; group:control" data-selected-links="/business /business/security /business/customers /business" href="/business">
                    Business
</a>                </li>

                <li class="ml-4">
                  <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:explore; experiment:site_header_dropdowns; group:control" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="/explore">
                    Explore
</a>                </li>

                <li class="ml-4">
                      <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:marketplace; experiment:site_header_dropdowns; group:control" data-selected-links=" /marketplace" href="/marketplace">
                        Marketplace
</a>                </li>
                <li class="ml-4">
                  <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:pricing; experiment:site_header_dropdowns; group:control" data-selected-links="/pricing /pricing/developer /pricing/team /pricing/business-hosted /pricing/business-enterprise /pricing" href="/pricing">
                    Pricing
</a>                </li>
            </ul>
          </nav>

        <div class="d-flex">
            <div class="d-lg-flex flex-items-center mr-3">
              <div class="header-search scoped-search site-scoped-search js-site-search position-relative js-jump-to"
  role="search combobox"
  aria-owns="jump-to-results"
  aria-label="Search or jump to"
  aria-haspopup="listbox"
  aria-expanded="true"
>
  <div class="position-relative">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-site-search-form" data-scope-type="Repository" data-scope-id="17641760" data-scoped-search-url="/microg/AppleWifiNlpBackend/search" data-unscoped-search-url="/search" action="/microg/AppleWifiNlpBackend/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="&#x2713;" />
      <label class="form-control header-search-wrapper header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center js-chromeless-input-container">
        <input type="text"
          class="form-control header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
          data-hotkey="s,/"
          name="q"
          value=""
          placeholder="Search"
          data-unscoped-placeholder="Search GitHub"
          data-scoped-placeholder="Search"
          autocapitalize="off"
          aria-autocomplete="list"
          aria-controls="jump-to-results"
          data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations#csrf-token=Zo2/FhL9CJYcPOQDpQvMEpWdH0fStOcCT6f8vVOy6nmdY4Pre3B5B2uS05BgvyVd4/rArXMPfoXh40FBoEG17g=="
          spellcheck="false"
          autocomplete="off"
          >
          <input type="hidden" class="js-site-search-type-field" name="type" >
            <img src="https://assets-cdn.github.com/images/search-shortcut-hint.svg" alt="" class="mr-2 header-search-key-slash">

            <div class="Box position-absolute overflow-hidden d-none jump-to-suggestions js-jump-to-suggestions-container">
              <ul class="d-none js-jump-to-suggestions-template-container">
                <li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item">
                  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center p-2 jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open" href="">
                    <div class="jump-to-octicon js-jump-to-octicon mr-2 text-center d-none"></div>
                    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar" alt="" aria-label="Team" src="" width="28" height="28">

                    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
                    </div>

                    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
                      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
                        In this repository
                      </span>
                      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
                        All GitHub
                      </span>
                      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
                    </div>

                    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
                      Jump to
                      <span class="d-inline-block ml-1 v-align-middle">↵</span>
                    </div>
                  </a>
                </li>
                <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-repo-octicon-template" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
                <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-project-octicon-template" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
                <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-search-octicon-template" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"/></svg>
              </ul>
              <ul class="d-none js-jump-to-no-results-template-container">
                <li class="d-flex flex-justify-center flex-items-center p-3 f5 d-none">
                  <span class="text-gray">No suggested jump to results</span>
                </li>
              </ul>

              <ul id="jump-to-results" class="js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container" >
                <li class="d-flex flex-justify-center flex-items-center p-0 f5">
                  <img src="https://assets-cdn.github.com/images/spinners/octocat-spinner-128.gif" alt="Octocat Spinner Icon" class="m-2" width="28">
                </li>
              </ul>
            </div>
      </label>
</form>  </div>
</div>

            </div>

          <span class="d-inline-block">
              <div class="HeaderNavlink px-0 py-2 m-0">
                <a class="text-bold text-white no-underline" href="/login?return_to=%2Fmicrog%2FAppleWifiNlpBackend%2Fissues%2F7" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in; experiment:site_header_dropdowns; group:control">Sign in</a>
                  <span class="text-gray">or</span>
                  <a class="text-bold text-white no-underline" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up; experiment:site_header_dropdowns; group:control">Sign up</a>
              </div>
          </span>
        </div>
      </div>
    </div>
  </header>

  </div>

  <div id="start-of-content" class="show-on-focus"></div>

    <div id="js-flash-container">


</div>



  <div role="main" class="application-main ">
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <div id="js-repo-pjax-container" data-pjax-container >
      



  



  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav  ">
    <div class="repohead-details-container clearfix container">

      <ul class="pagehead-actions">
  <li>
      <a href="/login?return_to=%2Fmicrog%2FAppleWifiNlpBackend"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to watch a repository" rel="nofollow">
    <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
    Watch
  </a>
  <a class="social-count" href="/microg/AppleWifiNlpBackend/watchers"
     aria-label="14 users are watching this repository">
    14
  </a>

  </li>

  <li>
      <a href="/login?return_to=%2Fmicrog%2FAppleWifiNlpBackend"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <svg class="octicon octicon-star v-align-text-bottom" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"/></svg>
    Star
  </a>

    <a class="social-count js-social-count" href="/microg/AppleWifiNlpBackend/stargazers"
      aria-label="32 users starred this repository">
      32
    </a>

  </li>

  <li>
      <a href="/login?return_to=%2Fmicrog%2FAppleWifiNlpBackend"
        class="btn btn-sm btn-with-count tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <svg class="octicon octicon-repo-forked v-align-text-bottom" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
        Fork
      </a>

    <a href="/microg/AppleWifiNlpBackend/network/members" class="social-count"
       aria-label="10 users forked this repository">
      10
    </a>
  </li>
</ul>

      <h1 class="public ">
  <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
  <span class="author" itemprop="author"><a class="url fn" rel="author" href="/microg">microg</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a data-pjax="#js-repo-pjax-container" href="/microg/AppleWifiNlpBackend">AppleWifiNlpBackend</a></strong>

</h1>

    </div>
    
<nav class="reponav js-repo-nav js-sidenav-container-pjax container"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
     role="navigation"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item reponav-item" itemprop="url" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /microg/AppleWifiNlpBackend" href="/microg/AppleWifiNlpBackend">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" data-hotkey="g i" class="js-selected-navigation-item selected reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /microg/AppleWifiNlpBackend/issues" href="/microg/AppleWifiNlpBackend/issues">
        <svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">8</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /microg/AppleWifiNlpBackend/pulls" href="/microg/AppleWifiNlpBackend/pulls">
      <svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">2</span>
      <meta itemprop="position" content="3">
</a>  </span>

    <a data-hotkey="g b" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /microg/AppleWifiNlpBackend/projects" href="/microg/AppleWifiNlpBackend/projects">
      <svg class="octicon octicon-project" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      Projects
      <span class="Counter" >0</span>
</a>


  <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse /microg/AppleWifiNlpBackend/pulse" href="/microg/AppleWifiNlpBackend/pulse">
    <svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"/></svg>
    Insights
</a>

</nav>


  </div>

<div class="container new-discussion-timeline experiment-repo-nav  ">
  <div class="repository-content ">

    
  <div class="issues-listing" data-pjax>
    
      <div class="signup-prompt-bg rounded-1">
      <div class="signup-prompt p-4 text-center mb-4 rounded-1">
        <div class="position-relative">
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form action="/site/dismiss_signup_prompt" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="xNVBhB6sWAlFw+nU8Px/OifZxXEY88hb4ka2ofPaZDppm70tdGIujpJThW+FBMi0cINYo8fkW/GuBNd8TEDT/A==" />
            <button type="submit" class="position-absolute top-0 right-0 btn-link link-gray" data-ga-click="(Logged out) Sign up prompt, clicked Dismiss, text:dismiss">
              Dismiss
            </button>
</form>          <h3 class="pt-2">Join GitHub today</h3>
          <p class="col-6 mx-auto">GitHub is home to over 28 million developers working together to host and review code, manage projects, and build software together.</p>
          <a class="btn btn-primary" href="/join?source=prompt-issue-show" data-ga-click="(Logged out) Sign up prompt, clicked Sign up, text:sign-up">Sign up</a>
        </div>
      </div>
    </div>


    <div id="show_issue" class="js-issues-results">

    
  <div
    id="partial-discussion-header"
    class="gh-header js-details-container Details js-socket-channel js-updatable-content issue"
    data-channel="issue:59221600"
    data-url="/microg/AppleWifiNlpBackend/issues/7/show_partial?partial=issues%2Ftitle">

  <div class="gh-header-show ">
      <div class="gh-header-actions">

          
<details class="details-reset details-overlay details-overlay-dark float-right" >
  <summary class="btn btn-sm btn-primary" aria-haspopup="dialog" data-ga-click="Issues, create new issue, view:issue_show location:issue_header style:button logged_in:false">
    
    New issue
  </summary>
  <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast overflow-auto" aria-label="Sign up for GitHub">
    <button class="position-absolute p-4 right-0 btn-link muted-link" type="button" aria-label="Close dialog" data-close-dialog>
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
    </button>
    <div class="p-4 d-flex flex-column">
            <div class="mt-3 mb-2 text-center">
  <svg height="60" class="octicon octicon-comment-discussion text-blue" viewBox="0 0 16 16" version="1.1" width="60" aria-hidden="true"><path fill-rule="evenodd" d="M15 1H6c-.55 0-1 .45-1 1v2H1c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h1v3l3-3h4c.55 0 1-.45 1-1V9h1l3 3V9h1c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zM9 11H4.5L3 12.5V11H1V5h4v3c0 .55.45 1 1 1h3v2zm6-3h-2v1.5L11.5 8H6V2h9v6z"/></svg>
</div>

<div class="px-4">
  <p class="text-center mb-4">
  <strong>Have a question about this project?</strong> Sign up for a free GitHub account to open an issue and contact its maintainers and the community.
  </p>

  <form class="js-signup-form" autocomplete="off" action="/join?return_to=%2Fmicrog%2FAppleWifiNlpBackend%2Fissues%2Fnew" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="kSTsPOvG7/iuqlFfbHez0w7Z6l6DYSO1hw5Oa0WfWfo/qve7B/niM6birtoehhj6n4r36XeBdIaK2z8tIBNE7Q==" />    <auto-check src="/signup_check/username" csrf="YrNNuabw/mwtJpBiVHhjiKLed3Zei36KGKlPUGvKF8H4lxEFy5vqxZErbaui08ffrdz/Z0mra3ntKNFw3O3gaA==">
      <dl class="form-group"><dt class="input-label"><label name="user[login]" data-facebox-id="user-login-issues" autocapitalize="off" autofocus="autofocus" for="user_login_issues">Pick a username</label></dt><dd><input name="user[login]" data-facebox-id="user-login-issues" autocapitalize="off" autofocus="autofocus" class="form-control" type="text" id="user_login_issues" /></dd></dl>
    </auto-check>

    <auto-check src="/signup_check/email" csrf="Ga07gBvk//3tEpDFzvdUoNxIjUDfI8CfUHZ0zIrLZagSVWV6YyMDtfMEc7XIl+OQYIJtRhJrLoH/5byXL1CdeA==">
      <dl class="form-group"><dt class="input-label"><label name="user[email]" data-facebox-id="user-email-issues" autocapitalize="off" for="user_email_issues">Email Address</label></dt><dd><input name="user[email]" data-facebox-id="user-email-issues" autocapitalize="off" class="form-control" type="text" id="user_email_issues" /></dd></dl>
    </auto-check>

    <dl class="form-group"><dt class="input-label"><label name="user[password]" data-facebox-id="user-password-issues" for="user_password_issues">Password</label></dt><dd><input name="user[password]" data-facebox-id="user-password-issues" class="form-control" type="password" id="user_password_issues" /></dd></dl>

    <input type="hidden" name="source" class="js-signup-source" value="modal-issues">
    <input type="text" name="required_field_fa6f" id="required_field_fa6f" hidden="hidden" class="form-control" />
<input type="hidden" name="timestamp" value="1533317954557" class="form-control" />
<input type="hidden" name="timestamp_secret" value="e22b04b1155babecd9ab15d4b8a430e3b60c9875d08502c4d130eae057f29f20" class="form-control" />


    <button class="btn btn-primary mt-2 btn-block" type="submit" data-ga-click="(Logged out) New issue modal, clicked Sign up, text:sign-up">Sign up for GitHub</button>
</form>
  <p class="mt-4 text-gray text-center">By clicking &ldquo;Sign up for GitHub&rdquo;, you agree to our <a href="https://help.github.com/terms" target="_blank">terms of service</a> and
  <a href="https://help.github.com/privacy" target="_blank">privacy statement</a>. We’ll occasionally send you account related emails.</p>
  <p class="mt-4 text-gray text-center">Already on GitHub? <a href="/login?return_to=%2Fmicrog%2FAppleWifiNlpBackend%2Fissues%2Fnew" data-ga-click="(Logged out) New issue modal, clicked Sign in, text:sign-in">Sign in</a> to your account</p>
</div>

</div>
  </details-dialog>
</details>
      </div>

    <h1 class="gh-header-title">
      <span class="js-issue-title">
        Add caching configuration
      </span>
      <span class="gh-header-number">#7</span>
    </h1>
  </div>


  <div class="TableObject gh-header-meta">
    <div class="TableObject-item">
        <div class="State State--green">
          <svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg>
          Open
        </div>
    </div>
    <div class="TableObject-item TableObject-item--primary">
        <a class="author" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp">haarp</a>  opened this <span class="noun">Issue</span>
        <relative-time datetime="2015-02-27T11:01:35Z">Feb 27, 2015</relative-time>
        &middot; 8 comments
    </div>
  </div>
</div>


    <h2 class="sr-only">Comments</h2>
    <div id="discussion_bucket" class="clearfix">
      <div class="discussion-sidebar">
        <div id="partial-discussion-sidebar"
  class="js-socket-channel js-updatable-content"
  data-channel="issue:59221600"
  data-url="/microg/AppleWifiNlpBackend/issues/7/show_partial?partial=issues%2Fsidebar">


  <div class="discussion-sidebar-item sidebar-assignee js-discussion-sidebar-item">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-issue-sidebar-form" action="/microg/AppleWifiNlpBackend/issues/7?partial=issues%2Fsidebar%2Fshow%2Fassignees" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="put" /><input type="hidden" name="authenticity_token" value="ltCnewQH5AIdrCCGKb7N4mHVZHVzfS4dI8SIOFv3S6xKm23fvVjgNMHHieU3MwvgjBmWVQuAwcrfQjY3pWDMAA==" />
    

  <div class="discussion-sidebar-heading text-bold">
    Assignees
  </div>

    <span class="css-truncate">
    No one assigned
</span>

</form></div>

  <div class="discussion-sidebar-item sidebar-labels js-discussion-sidebar-item">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-issue-sidebar-form" action="/microg/AppleWifiNlpBackend/issues/7?partial=issues%2Fsidebar%2Fshow%2Flabels" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="put" /><input type="hidden" name="authenticity_token" value="5+AV1nyJzIyD9mglR642FTM7M1Xh9jTzabPXaq6JZuI7q99yxdbIul+dwUZZI/AX3vfBdZkL2ySVNWllUB7hTg==" />
    <div class="js-issue-labels-container">
      


  <div class="discussion-sidebar-heading text-bold">
    Labels
  </div>


    </div>
    <div aria-live="polite" aria-label="Labels">
      <div class="labels css-truncate">
    None yet
</div>

    </div>
</form></div>

    <div class="discussion-sidebar-item js-discussion-sidebar-item">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-issue-sidebar-form" action="/microg/AppleWifiNlpBackend/projects/issues/7" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="put" /><input type="hidden" name="authenticity_token" value="0vXUKY0UY2axcQ8IrqGLt4PS5RfINSphXZHPdqDWBLL+mLHpGhFuAlNCbjmBM7Ao44RwuC59N783jOfWR2Nwvw==" />
    

  <div class="discussion-sidebar-heading text-bold">
    Projects
  </div>

    
<span class="css-truncate sidebar-projects">
    None yet
</span>

</form></div>

  <div class="discussion-sidebar-item sidebar-milestone js-discussion-sidebar-item">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-issue-sidebar-form" action="/microg/AppleWifiNlpBackend/issues/7/set_milestone?partial=issues%2Fsidebar%2Fshow%2Fmilestone" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="_method" value="put" /><input type="hidden" name="authenticity_token" value="pBw1WpBFXVM17++qsWmt8wFcd4v1leyr5gJvgvxZVP/1/KTPDCeSefOaQ+c2TpPygMVEo4/gb4wx5GAMYWhBzw==" />
    

  <div class="discussion-sidebar-heading text-bold">
    Milestone
  </div>

      No milestone

</form></div>

  
  <div id="partial-users-participants" class="discussion-sidebar-item">
  <div class="participation">

    <div class="discussion-sidebar-heading text-bold">
      4 participants
    </div>
    <div class="participation-avatars d-flex flex-wrap">
        <a class="participant-avatar" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp">
          <img class="avatar" src="https://avatars2.githubusercontent.com/u/781030?s=52&amp;v=4" width="26" height="26" alt="@haarp" /> 
</a>        <a class="participant-avatar" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in">
          <img class="avatar" src="https://avatars1.githubusercontent.com/u/994036?s=52&amp;v=4" width="26" height="26" alt="@mar-v-in" /> 
</a>        <a class="participant-avatar" data-hovercard-user-id="4681938" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/n76">
          <img class="avatar" src="https://avatars3.githubusercontent.com/u/4681938?s=52&amp;v=4" width="26" height="26" alt="@n76" /> 
</a>        <a class="participant-avatar" data-hovercard-user-id="23470042" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/alienman1">
          <img class="avatar" src="https://avatars1.githubusercontent.com/u/23470042?s=52&amp;v=4" width="26" height="26" alt="@alienman1" /> 
</a>    </div>
  </div>
</div>


  

</div>

      </div>

      <div class="discussion-timeline js-quote-selection-container" >

        <div class="js-discussion js-socket-channel" data-channel="marked-as-read:issue:59221600">

          <div class="timeline-comment-wrapper js-comment-container mt-0">
            

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp"><img class="avatar rounded-1" height="44" width="44" alt="@haarp" src="https://avatars1.githubusercontent.com/u/781030?s=88&amp;v=4" /></a>

</div>


            
<div class="timeline-comment-group js-minimizable-comment-group" id="issue-59221600">
  <div class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="d703fa0169b17f060e6a1ca9242788fe"
       data-unfurl-authenticity-token="v+6UAGGMs/Dl2M71e2dMRN5kxSjJKBEVDRI6IYhn1P5u7XcoL7Gp2jCMiFCh6ax1l+1l+9Zhv/AkyAeRhO6g7Q==">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    






  </div>

    



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp">haarp</a>
  

    </strong>

    commented

    <a href="#issue-59221600" class="timestamp"><relative-time datetime="2015-02-27T11:01:35Z">Feb 27, 2015</relative-time></a>


    <span class="js-comment-fragment">
      <include-fragment class="js-comment-edit-history d-inline">
      </include-fragment>
    </span>
  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p>It's not entirely clear for me as an user how the cache works. I keep seeing data usage even for places that should be completely cached by now. How long is location data cached for?</p>
<p>I propose that the caching duration be configurable. This way someone can<br>
a) Figure out how long the cache duration is<br>
b) Modify it to balance privacy and up-to-date-ness</p>
<p>:)</p>
<p>(btw, it is impressive how much dedication and polish is flowing into microg. Thank you for making this!)</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>

          </div>

          

  <div id="js-timeline-progressive-loader" data-timeline-item-src="microg/AppleWifiNlpBackend/timeline?id=MDU6SXNzdWU1OTIyMTYwMA%3D%3D&amp;variables%5Bafter%5D=Y3Vyc29yOnYyOpPPAAABWGkZt%2FgAqTI2MDcxMzU1Ng%3D%3D&amp;variables%5Bfirst%5D=80" ></div>


  
<div class="js-timeline-item js-timeline-progressive-focus-container" data-gid="MDEyOklzc3VlQ29tbWVudDc2NDI1MTQ5">
    
  <div class="timeline-comment-wrapper js-comment-container">

  

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in"><img class="avatar rounded-1" height="44" width="44" alt="@mar-v-in" src="https://avatars2.githubusercontent.com/u/994036?s=88&amp;v=4" /></a>

</div>


  
<div class="timeline-comment-group js-minimizable-comment-group" id="issuecomment-76425149">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="3c3e0c18eaa778610f00ec918d1d961f">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <div class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</div>
        <div class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</div>
      </div>
    </summary>
    <div class="review-comment border-top pt-3">
      <div class="previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            






          </div>
            <a class="float-left mt-1" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in"><img class="avatar" height="28" width="28" alt="@mar-v-in" src="https://avatars3.githubusercontent.com/u/994036?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in">mar-v-in</a>
  

              </strong>
              <span class="text-gray">
                  <a href="#issuecomment-76425149" class="timestamp"><relative-time datetime="2015-02-27T16:38:46Z">Feb 27, 2015</relative-time></a>
              </span>
            </h4>
            
    <span class="timeline-comment-label text-bold tooltipped tooltipped-multiline tooltipped-s" aria-label="This user is a member of the microG Project organization.">
      Member
    </span>

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body ">
                  <p>Currently the cache duration is hard coded to 30 days. I'm sure I'll add an option to change this some day <g-emoji class="g-emoji" alias="smile" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png">😄</g-emoji></p>
<p>The behavior you described most likely is due to how the cache works: If a visible AP is unknown, the client asks for its location even if it would already be cached if an location is known. Only once an AP is known to be unknown by being named in a request, the cache will store the negative response. I'm not sure if there is any better way to do this, but I guess it should be possible to save some "area" of already downloaded cache and do not request for unknown APs inside this area - but this does only work if the current location is already known (maybe due to other visible APs?). If you have any good ideas on how caching can be improved I'd like to hear them.</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="3c3e0c18eaa778610f00ec918d1d961f"
       data-unfurl-authenticity-token="pKJucCo7WJfueT8Nno6YED3qV9OhfrDEJlrxYf5dFbt1oY1YZAZCvTsteahEAHghdGP3AL43HiEPgMzR8tRhqA==">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    






  </div>

    
    <span class="timeline-comment-label text-bold tooltipped tooltipped-multiline tooltipped-s" aria-label="This user is a member of the microG Project organization.">
      Member
    </span>



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in">mar-v-in</a>
  

    </strong>

    commented

    <a href="#issuecomment-76425149" class="timestamp"><relative-time datetime="2015-02-27T16:38:46Z">Feb 27, 2015</relative-time></a>


    <span class="js-comment-fragment">
      <include-fragment class="js-comment-edit-history d-inline">
      </include-fragment>
    </span>
  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p>Currently the cache duration is hard coded to 30 days. I'm sure I'll add an option to change this some day <g-emoji class="g-emoji" alias="smile" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png">😄</g-emoji></p>
<p>The behavior you described most likely is due to how the cache works: If a visible AP is unknown, the client asks for its location even if it would already be cached if an location is known. Only once an AP is known to be unknown by being named in a request, the cache will store the negative response. I'm not sure if there is any better way to do this, but I guess it should be possible to save some "area" of already downloaded cache and do not request for unknown APs inside this area - but this does only work if the current location is already known (maybe due to other visible APs?). If you have any good ideas on how caching can be improved I'd like to hear them.</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>


</div>

</div>

  
<div class="js-timeline-item js-timeline-progressive-focus-container" data-gid="MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjQzMzg0MzE1">
      <div class="discussion-item discussion-item-renamed">
  <h3 class="discussion-item-header f5 text-normal" id="event-243384315">

    <span class="discussion-item-icon">
      <svg class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"/></svg>
    </span>

    

        <a class="d-inline-block" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in"><img class="avatar" height="16" width="16" alt="@mar-v-in" src="https://avatars3.githubusercontent.com/u/994036?s=60&amp;v=4" /></a>
  <a class="author text-inherit" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in">mar-v-in</a>
  


      
changed the title from
<span class="renamed-was">Caching parameters</span>
to
<span class="renamed-is">Add caching configuration</span>


    <a href="#event-243384315" class="timestamp"><relative-time datetime="2015-02-27T16:39:06Z">Feb 27, 2015</relative-time></a>

  </h3>
</div>



</div>

  
<div class="js-timeline-item js-timeline-progressive-focus-container" data-gid="MDEyOklzc3VlQ29tbWVudDc2NDgzMzA4">
    
  <div class="timeline-comment-wrapper js-comment-container">

  

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp"><img class="avatar rounded-1" height="44" width="44" alt="@haarp" src="https://avatars1.githubusercontent.com/u/781030?s=88&amp;v=4" /></a>

</div>


  
<div class="timeline-comment-group js-minimizable-comment-group" id="issuecomment-76483308">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="2b31cf7a53e0293a411e024d03582457">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <div class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</div>
        <div class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</div>
      </div>
    </summary>
    <div class="review-comment border-top pt-3">
      <div class="previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            






          </div>
            <a class="float-left mt-1" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp"><img class="avatar" height="28" width="28" alt="@haarp" src="https://avatars0.githubusercontent.com/u/781030?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp">haarp</a>
  

              </strong>
              <span class="text-gray">
                  <a href="#issuecomment-76483308" class="timestamp"><relative-time datetime="2015-02-27T22:19:28Z">Feb 27, 2015</relative-time></a>
              </span>
            </h4>
            

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body ">
                  <p>Sorry, I do not understand your description. From what I understand, Apple does not provide the location of each AP, but instead locations for "sets" of APs (correct me if I'm wrong)</p>
<p>So what if for each AP we can see we pretend that only this AP is visible, send that information upstream, get location data for each AP and <em>then</em> determine the device location (average based on all visible AP). This would allow very easy caching.</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="2b31cf7a53e0293a411e024d03582457"
       data-unfurl-authenticity-token="E4nsX8jxfh08mum3bc2gKT1ZnrrLh/3FmV37o2qOLXzCig93hsxkN+nOrxK3Q0AYdNA+adTOUyCwh8YTZgdZbw==">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    






  </div>

    



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp">haarp</a>
  

    </strong>

    commented

    <a href="#issuecomment-76483308" class="timestamp"><relative-time datetime="2015-02-27T22:19:28Z">Feb 27, 2015</relative-time></a>


    <span class="js-comment-fragment">
      <include-fragment class="js-comment-edit-history d-inline">
      </include-fragment>
    </span>
  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p>Sorry, I do not understand your description. From what I understand, Apple does not provide the location of each AP, but instead locations for "sets" of APs (correct me if I'm wrong)</p>
<p>So what if for each AP we can see we pretend that only this AP is visible, send that information upstream, get location data for each AP and <em>then</em> determine the device location (average based on all visible AP). This would allow very easy caching.</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>


</div>

</div>

  
<div class="js-timeline-item js-timeline-progressive-focus-container" data-gid="MDEyOklzc3VlQ29tbWVudDc2NDg2Njc1">
    
  <div class="timeline-comment-wrapper js-comment-container">

  

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="4681938" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/n76"><img class="avatar rounded-1" height="44" width="44" alt="@n76" src="https://avatars0.githubusercontent.com/u/4681938?s=88&amp;v=4" /></a>

</div>


  
<div class="timeline-comment-group js-minimizable-comment-group" id="issuecomment-76486675">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="d193cc61b8b0c6ff420a128b9d428e2f">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <div class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</div>
        <div class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</div>
      </div>
    </summary>
    <div class="review-comment border-top pt-3">
      <div class="previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            






          </div>
            <a class="float-left mt-1" data-hovercard-user-id="4681938" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/n76"><img class="avatar" height="28" width="28" alt="@n76" src="https://avatars1.githubusercontent.com/u/4681938?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="4681938" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/n76">n76</a>
  

              </strong>
              <span class="text-gray">
                  <a href="#issuecomment-76486675" class="timestamp"><relative-time datetime="2015-02-27T22:43:46Z">Feb 27, 2015</relative-time></a>
              </span>
            </h4>
            

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body ">
                  <p><a class="user-mention" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/haarp">@haarp</a> How is requesting one WiFi AP at a time more efficient that requesting information for a number of APs in one request?</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="d193cc61b8b0c6ff420a128b9d428e2f"
       data-unfurl-authenticity-token="kN0pygw3MCMaxJQG8QC2s5kzYLF9PILmPsYav5MG66BB3sriQgoqCc+Q0qMrjlaC0LrAYmJ1LAMXHCcPn4+fsw==">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    






  </div>

    



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="4681938" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/n76">n76</a>
  

    </strong>

    commented

    <a href="#issuecomment-76486675" class="timestamp"><relative-time datetime="2015-02-27T22:43:46Z">Feb 27, 2015</relative-time></a>


    <span class="js-comment-fragment">
      <include-fragment class="js-comment-edit-history d-inline">
      </include-fragment>
    </span>
  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p><a class="user-mention" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/haarp">@haarp</a> How is requesting one WiFi AP at a time more efficient that requesting information for a number of APs in one request?</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>


</div>

</div>

  
<div class="js-timeline-item js-timeline-progressive-focus-container" data-gid="MDEyOklzc3VlQ29tbWVudDc2NDg3MTA0">
    
  <div class="timeline-comment-wrapper js-comment-container">

  

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp"><img class="avatar rounded-1" height="44" width="44" alt="@haarp" src="https://avatars1.githubusercontent.com/u/781030?s=88&amp;v=4" /></a>

</div>


  
<div class="timeline-comment-group js-minimizable-comment-group" id="issuecomment-76487104">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="b66de366a9aea3ad2f9ece9fa6559eb7">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <div class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</div>
        <div class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</div>
      </div>
    </summary>
    <div class="review-comment border-top pt-3">
      <div class="previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            






          </div>
            <a class="float-left mt-1" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp"><img class="avatar" height="28" width="28" alt="@haarp" src="https://avatars0.githubusercontent.com/u/781030?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp">haarp</a>
  

              </strong>
              <span class="text-gray">
                  <a href="#issuecomment-76487104" class="timestamp"><relative-time datetime="2015-02-27T22:47:00Z">Feb 27, 2015</relative-time></a>
              </span>
            </h4>
            

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body ">
                  <p>It isn't. But it would allow efficient caching of the location of each AP.</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="b66de366a9aea3ad2f9ece9fa6559eb7"
       data-unfurl-authenticity-token="0JsdUVhpzav4aVbdsmSE/KOOlQSi9nPU4LpRKSOuFT4BmP55FlTXgS09EHho6mTN6gc1172/3THJYGyZLydhLQ==">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    






  </div>

    



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp">haarp</a>
  

    </strong>

    commented

    <a href="#issuecomment-76487104" class="timestamp"><relative-time datetime="2015-02-27T22:47:00Z">Feb 27, 2015</relative-time></a>


    <span class="js-comment-fragment">
      <include-fragment class="js-comment-edit-history d-inline">
      </include-fragment>
    </span>
  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p>It isn't. But it would allow efficient caching of the location of each AP.</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>


</div>

</div>

  
<div class="js-timeline-item js-timeline-progressive-focus-container" data-gid="MDEyOklzc3VlQ29tbWVudDc2NDg5MjM2">
    
  <div class="timeline-comment-wrapper js-comment-container">

  

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in"><img class="avatar rounded-1" height="44" width="44" alt="@mar-v-in" src="https://avatars2.githubusercontent.com/u/994036?s=88&amp;v=4" /></a>

</div>


  
<div class="timeline-comment-group js-minimizable-comment-group" id="issuecomment-76489236">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="e3587087c082212800a70dc8f2a8d984">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <div class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</div>
        <div class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</div>
      </div>
    </summary>
    <div class="review-comment border-top pt-3">
      <div class="previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            






          </div>
            <a class="float-left mt-1" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in"><img class="avatar" height="28" width="28" alt="@mar-v-in" src="https://avatars3.githubusercontent.com/u/994036?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in">mar-v-in</a>
  

              </strong>
              <span class="text-gray">
                  <a href="#issuecomment-76489236" class="timestamp"><relative-time datetime="2015-02-27T23:01:25Z">Feb 27, 2015</relative-time></a>
              </span>
            </h4>
            
    <span class="timeline-comment-label text-bold tooltipped tooltipped-multiline tooltipped-s" aria-label="This user is a member of the microG Project organization.">
      Member
    </span>

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body ">
                  <p>I guess the misconception here is how the Apple API does work (and I did not document it a lot yet).</p>
<p>Apple's server provides location data per AP, no location calculation is done on their servers. This is different how most other location APIs (Mozilla, Google, ...) work, which do not share the real AP location, but only the location averaged from a number of APs.</p>
<p>With Apple's server, a request can contain any number of AP mac addresses (no additional information like rssi is send). It is not necessary that these APs are next to the others in the same request, they can be at any place in the world.<br>
The response consists of the location, an accuracy value and wifi channel number for each of the requested APs. Additionally, the 200 APs geographically next to the first AP in the request list will also be returned to fill up the cache (cause Apple does not want us to do thousands of requests). Thus, compared to Mozilla and Google APIs, Apple's API does not require a lot of requests and caching can be done efficiently.</p>
<p>The current cache implementation does not take into consideration that the answer will contain the nearest 200 APs. This would allow it to not do new requests if an unknown AP is inside the circle of APs returned in a previous request.</p>
<p>However if you stay at a single location no new requests should be required. If this happens to you, can you check if logcat contains log entries "Requesting Apple for xxx locations"?</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="e3587087c082212800a70dc8f2a8d984"
       data-unfurl-authenticity-token="zRH6OaScO3LI00W3Wyv7cY/E6yqf4UEgN6Ej4Mb9czccEhkR6qEhWB2HAxKBpRtAxk1L+YCo78Ueex5QynQHJA==">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    






  </div>

    
    <span class="timeline-comment-label text-bold tooltipped tooltipped-multiline tooltipped-s" aria-label="This user is a member of the microG Project organization.">
      Member
    </span>



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in">mar-v-in</a>
  

    </strong>

    commented

    <a href="#issuecomment-76489236" class="timestamp"><relative-time datetime="2015-02-27T23:01:25Z">Feb 27, 2015</relative-time></a>


    <span class="js-comment-fragment">
      <include-fragment class="js-comment-edit-history d-inline">
      </include-fragment>
    </span>
  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p>I guess the misconception here is how the Apple API does work (and I did not document it a lot yet).</p>
<p>Apple's server provides location data per AP, no location calculation is done on their servers. This is different how most other location APIs (Mozilla, Google, ...) work, which do not share the real AP location, but only the location averaged from a number of APs.</p>
<p>With Apple's server, a request can contain any number of AP mac addresses (no additional information like rssi is send). It is not necessary that these APs are next to the others in the same request, they can be at any place in the world.<br>
The response consists of the location, an accuracy value and wifi channel number for each of the requested APs. Additionally, the 200 APs geographically next to the first AP in the request list will also be returned to fill up the cache (cause Apple does not want us to do thousands of requests). Thus, compared to Mozilla and Google APIs, Apple's API does not require a lot of requests and caching can be done efficiently.</p>
<p>The current cache implementation does not take into consideration that the answer will contain the nearest 200 APs. This would allow it to not do new requests if an unknown AP is inside the circle of APs returned in a previous request.</p>
<p>However if you stay at a single location no new requests should be required. If this happens to you, can you check if logcat contains log entries "Requesting Apple for xxx locations"?</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>


</div>

</div>

  
<div class="js-timeline-item js-timeline-progressive-focus-container" data-gid="MDEyOklzc3VlQ29tbWVudDc2NTI3NjQ1">
    
  <div class="timeline-comment-wrapper js-comment-container">

  

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp"><img class="avatar rounded-1" height="44" width="44" alt="@haarp" src="https://avatars1.githubusercontent.com/u/781030?s=88&amp;v=4" /></a>

</div>


  
<div class="timeline-comment-group js-minimizable-comment-group" id="issuecomment-76527645">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="8f7a76cfd2cb7e9f29a6360b8f9119b2">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <div class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</div>
        <div class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</div>
      </div>
    </summary>
    <div class="review-comment border-top pt-3">
      <div class="previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            






          </div>
            <a class="float-left mt-1" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp"><img class="avatar" height="28" width="28" alt="@haarp" src="https://avatars0.githubusercontent.com/u/781030?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp">haarp</a>
  

              </strong>
              <span class="text-gray">
                  <a href="#issuecomment-76527645" class="timestamp"><relative-time datetime="2015-02-28T14:14:12Z">Feb 28, 2015</relative-time></a>
              </span>
            </h4>
            

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body ">
                  <p>Ah, understood. But then I wonder why the nearest 200 aren't cached. Is there a reason for it?</p>
<p>I'll check for requests next time I'm on the go.</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="8f7a76cfd2cb7e9f29a6360b8f9119b2"
       data-unfurl-authenticity-token="aZM0uARyyrde6D4ACKWbzCVA4FiwC9NpPEvDvYsSwk24kNeQSk/QnYu8eKXSK3v9bMlAi69CfYwVkf4Nh5u2Xg==">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    






  </div>

    



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/haarp">haarp</a>
  

    </strong>

    commented

    <a href="#issuecomment-76527645" class="timestamp"><relative-time datetime="2015-02-28T14:14:12Z">Feb 28, 2015</relative-time></a>


    <span class="js-comment-fragment">
      <include-fragment class="js-comment-edit-history d-inline">
      </include-fragment>
    </span>
  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p>Ah, understood. But then I wonder why the nearest 200 aren't cached. Is there a reason for it?</p>
<p>I'll check for requests next time I'm on the go.</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>


</div>

</div>

  
<div class="js-timeline-item js-timeline-progressive-focus-container" data-gid="MDEyOklzc3VlQ29tbWVudDI2MDY4MjU2NA==">
    
  <div class="timeline-comment-wrapper js-comment-container">

  

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="23470042" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/alienman1"><img class="avatar rounded-1" height="44" width="44" alt="@alienman1" src="https://avatars2.githubusercontent.com/u/23470042?s=88&amp;v=4" /></a>

</div>


  
<div class="timeline-comment-group js-minimizable-comment-group" id="issuecomment-260682564">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="204b0879f03e398570f946260887b77a">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <div class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</div>
        <div class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</div>
      </div>
    </summary>
    <div class="review-comment border-top pt-3">
      <div class="previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            






          </div>
            <a class="float-left mt-1" data-hovercard-user-id="23470042" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/alienman1"><img class="avatar" height="28" width="28" alt="@alienman1" src="https://avatars3.githubusercontent.com/u/23470042?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="23470042" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/alienman1">alienman1</a>
  

              </strong>
              <span class="text-gray">
                  <a href="#issuecomment-260682564" class="timestamp"><relative-time datetime="2016-11-15T16:03:13Z">Nov 15, 2016</relative-time></a>
              </span>
            </h4>
            

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body ">
                  <p>Is still missing, i should write it, shouldn't I?</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="204b0879f03e398570f946260887b77a"
       data-unfurl-authenticity-token="Upzh7J7aLcCo7jhxArSYbay1mcF1wId8ak2meKTy3mqDnwLE0Oc36n26ftTYOnhc5Tw5EmqJKZlDl5vIqHuqeQ==">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    






  </div>

    



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="23470042" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/alienman1">alienman1</a>
  

    </strong>

    commented

    <a href="#issuecomment-260682564" class="timestamp"><relative-time datetime="2016-11-15T16:03:13Z">Nov 15, 2016</relative-time></a>


    <span class="js-comment-fragment">
      <include-fragment class="js-comment-edit-history d-inline">
      </include-fragment>
    </span>
  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p>Is still missing, i should write it, shouldn't I?</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>


</div>

</div>

  
<div class="js-timeline-item js-timeline-progressive-focus-container" data-gid="MDEyOklzc3VlQ29tbWVudDI2MDcxMzU1Ng==">
    
  <div class="timeline-comment-wrapper js-comment-container">

  

<div class="avatar-parent-child timeline-comment-avatar">
    <a class="d-inline-block" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in"><img class="avatar rounded-1" height="44" width="44" alt="@mar-v-in" src="https://avatars2.githubusercontent.com/u/994036?s=88&amp;v=4" /></a>

</div>


  
<div class="timeline-comment-group js-minimizable-comment-group" id="issuecomment-260713556">
    <div class="minimized-comment d-none ">
      

  <details class="Details-element details-reset border rounded-1 bg-white"
       data-body-version="a3156b57d8ad76b29ac1aaec8a601505">
    <summary class="bg-gray border-bottom-0 py-0 px-2">
      <div class="d-flex flex-justify-between flex-items-center">
        <h3 class="timeline-comment-header-text f5 text-gray text-normal text-italic">
              This comment has been minimized.

        </h3>
        <div class="Details-content--closed text-gray f6"><svg class="octicon octicon-unfold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"/></svg>Show comment</div>
        <div class="Details-content--open text-gray f6"><svg class="octicon octicon-fold position-relative mr-1" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"/></svg>Hide comment</div>
      </div>
    </summary>
    <div class="review-comment border-top pt-3">
      <div class="previewable-edit  js-task-list-container ">
        <div class="edit-comment-hide">
          <div class="timeline-comment-actions">
            






          </div>
            <a class="float-left mt-1" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in"><img class="avatar" height="28" width="28" alt="@mar-v-in" src="https://avatars3.githubusercontent.com/u/994036?s=60&amp;v=4" /></a>
          <div class="review-comment-contents">
            <h4 class="f5 text-normal d-inline text-gray-dark">
              <strong class="text-gray">
                

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in">mar-v-in</a>
  

              </strong>
              <span class="text-gray">
                  <a href="#issuecomment-260713556" class="timestamp"><relative-time datetime="2016-11-15T17:47:23Z">Nov 15, 2016</relative-time></a>
              </span>
            </h4>
            
    <span class="timeline-comment-label text-bold tooltipped tooltipped-multiline tooltipped-s" aria-label="This user is a member of the microG Project organization.">
      Member
    </span>

            <task-lists disabled sortable>
              <div class="comment-body markdown-body p-0 pt-1 js-comment-body ">
                  <p>Sorry for not answering here to <a class="user-mention" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/haarp">@haarp</a> s last message: everything that is sent from Apple to the phone is stored for at least 30 days, which imho is a good value for most. The most important thing is not to make the cache duration an option (which of course won't hurt, but it also does not solve problems), but to find a solution to be aware what area is cached (which is not that hard) and to know if an unknown AP resides in this area (which is a lot harder). Only if we know that a certain AP would already be in the cache if it was known to the backend servers, we can reduce the number of requests done to the servers drastically.</p>
<p>My current idea to solve this is to store the circle of cached data per request in the cache database. This way we know what area we have in the cache db.<br>
If we encounter an unknown AP we try to locate based on the surrounding APs which we have cached data for. If this does not result in any location (full cache miss) we request new data from Apple. If some of the APs are not present and the others locate us near the border of cached area (half cache miss), we try to request the missing APs, adding the known AP nearest to the border to the request (this ensures we receive a response from Apple, effectively moving the border away from the current location and thus reducing the need to do a very similar request again). And finally if the current location as guessed from the subset of known APs is not near a border, we ignore the other APs that we don't know anything about (missing negative cache entry).</p>
<p>The problematic variable here is: what means "near a border". Wi-Fi signal can easily spread over 100 meters and more and in ubran areas, the 200 nearest APs to a loation can spread far less than 100 meters radius. Of course we can make this a variable in the settings as well, using some not too bad default (maybe 50 meters?), but that setting would require a lot of explanation to the user. Another approach would be to go relative: "near a border" could mean that the minimum distance to the center of a circle is higher than xx% (maybe ~90%) of its radius. This presumes a bit that wifis have less range in urban areas, which is not necessarily true, but is probably far better than absolute values.</p>
<p>I am open for input and suggestions here.</p>
              </div>
            </task-lists>
          </div>
        </div>

      </div>
    </div>
  </details>

    </div>
  <div class="unminimized-comment comment previewable-edit js-comment js-task-list-container timeline-comment  "
       data-body-version="a3156b57d8ad76b29ac1aaec8a601505"
       data-unfurl-authenticity-token="qTdF35wiosXN5WwFzw5GqXOjUXVz+ly4vzSTS1l9eVZ4NKb30h+47xixKqAVgKaYOirxpmyz8l2W7q77VfQNRQ==">

    
<div class="timeline-comment-header clearfix">
  <div class="timeline-comment-actions">
    






  </div>

    
    <span class="timeline-comment-label text-bold tooltipped tooltipped-multiline tooltipped-s" aria-label="This user is a member of the microG Project organization.">
      Member
    </span>



  <h3 class="timeline-comment-header-text f5 text-normal">

    <strong class="css-truncate">
      

  <a class="author text-inherit css-truncate-target" data-hovercard-user-id="994036" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/mar-v-in">mar-v-in</a>
  

    </strong>

    commented

    <a href="#issuecomment-260713556" class="timestamp"><relative-time datetime="2016-11-15T17:47:23Z">Nov 15, 2016</relative-time></a>


    <span class="js-comment-fragment">
      <include-fragment class="js-comment-edit-history d-inline">
      </include-fragment>
    </span>
  </h3>
</div>


    <div class="edit-comment-hide">

      
<task-lists disabled sortable>
<table class="d-block">
  <tbody class="d-block">
    <tr class="d-block">
      <td class="d-block comment-body markdown-body  js-comment-body">

          <p>Sorry for not answering here to <a class="user-mention" data-hovercard-user-id="781030" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/haarp">@haarp</a> s last message: everything that is sent from Apple to the phone is stored for at least 30 days, which imho is a good value for most. The most important thing is not to make the cache duration an option (which of course won't hurt, but it also does not solve problems), but to find a solution to be aware what area is cached (which is not that hard) and to know if an unknown AP resides in this area (which is a lot harder). Only if we know that a certain AP would already be in the cache if it was known to the backend servers, we can reduce the number of requests done to the servers drastically.</p>
<p>My current idea to solve this is to store the circle of cached data per request in the cache database. This way we know what area we have in the cache db.<br>
If we encounter an unknown AP we try to locate based on the surrounding APs which we have cached data for. If this does not result in any location (full cache miss) we request new data from Apple. If some of the APs are not present and the others locate us near the border of cached area (half cache miss), we try to request the missing APs, adding the known AP nearest to the border to the request (this ensures we receive a response from Apple, effectively moving the border away from the current location and thus reducing the need to do a very similar request again). And finally if the current location as guessed from the subset of known APs is not near a border, we ignore the other APs that we don't know anything about (missing negative cache entry).</p>
<p>The problematic variable here is: what means "near a border". Wi-Fi signal can easily spread over 100 meters and more and in ubran areas, the 200 nearest APs to a loation can spread far less than 100 meters radius. Of course we can make this a variable in the settings as well, using some not too bad default (maybe 50 meters?), but that setting would require a lot of explanation to the user. Another approach would be to go relative: "near a border" could mean that the minimum distance to the center of a circle is higher than xx% (maybe ~90%) of its radius. This presumes a bit that wifis have less range in urban areas, which is not necessarily true, but is probably far better than absolute values.</p>
<p>I am open for input and suggestions here.</p>
      </td>
    </tr>
  </tbody>
</table>
</task-lists>


        

<div class="comment-reactions  js-reactions-container "

    >
</div>

    </div>

  </div>
</div>


</div>

</div>






<!-- Rendered timeline since 2016-11-15 09:47:23 -->
<div class="js-timeline-marker js-socket-channel js-updatable-content"
      id="partial-timeline"
      data-channel="issue:59221600"
      data-url="/_render_node/MDU6SXNzdWU1OTIyMTYwMA==/issues/timeline?variables%5BhasFocusedReviewComment%5D=false&amp;variables%5BhasFocusedReviewThread%5D=false&amp;variables%5BsyntaxHighlightingEnabled%5D=true&amp;variables%5BtimelinePageSize%5D=40&amp;variables%5BtimelineSince%5D=2016-11-15T17%3A47%3A23Z"
      data-last-modified="Tue, 15 Nov 2016 17:47:23 GMT">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="d-none js-timeline-marker-form" action="/_graphql/MarkNotificationSubjectAsRead" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><input type="hidden" name="authenticity_token" value="nsjrInKnP6U3eJB07FVMGHZNgTwmdlGnKLMwFZ/hb7HPIOhyATXwZebdIK/bG35upO/piUSXwKVFcGz6XbwVwg==" />
    <input type="hidden" name="variables[subjectId]" value="MDU6SXNzdWU1OTIyMTYwMA==">
</form></div>


        </div>


        <div class="discussion-timeline-actions">
                <div class="flash flash-warn mt-3">
    <a rel="nofollow" class="btn btn-primary" href="/join?source=comment-repo">Sign up for free</a>
    <strong>to join this conversation on GitHub</strong>.
    Already have an account?
    <a rel="nofollow" href="/login?return_to=https%3A%2F%2Fgithub.com%2Fmicrog%2FAppleWifiNlpBackend%2Fissues%2F7">Sign in to comment</a>
</div>


        </div>
      </div>

    </div>
    <div class="clear"></div>
  </div>

  </div>

  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </div>
  </div>

  </div>

        
<div class="footer container-lg px-3" role="contentinfo">
  <div class="position-relative d-flex flex-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap ">
      <li class="mr-3">&copy; 2018 <span title="0.45275s from unicorn-85d57df5c5-phfgh">GitHub</span>, Inc.</li>
        <li class="mr-3"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3"><a href="https://help.github.com/articles/github-security/" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li class="mr-3"><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com">Help</a></li>
    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon" href="https://github.com">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap ">
        <li class="mr-3"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
      <li class="mr-3"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li class="mr-3"><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li class="mr-3"><a href="https://blog.github.com" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>

    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
    </button>
    You can’t perform that action at this time.
  </div>


    <script crossorigin="anonymous" integrity="sha512-2VdGgXQE8W5ONZ4OsrbEo/noennUZaqXkevD9R8juTHiCsjT0HFTTF6MoBfySUc8G+eFqUcDgd7v+CAu8Gjxlg==" type="application/javascript" src="https://assets-cdn.github.com/assets/compat-f849c975b0ffaa01d6ca305e48417d08.js"></script>
    <script crossorigin="anonymous" integrity="sha512-ZCuUuaCERG6/AdCPvg2qDAGDVKP7KsHnKx3EuTwcIZSLeqJpyqaZZBUmbK7Wbtgar1y1iAlO66Vstl53f/EFOg==" type="application/javascript" src="https://assets-cdn.github.com/assets/frameworks-b83c5ea8e6d3b8ce4839ec986855c7bf.js"></script>
    
    <script crossorigin="anonymous" async="async" integrity="sha512-QkJ2em2YgUjPT/JspkF1pxBTErfpAG/J1L4Bt860iyvUG+w0pYdghaljYcVYVL96r+SsiwlFJXL6kCeMDw6kLw==" type="application/javascript" src="https://assets-cdn.github.com/assets/github-89c3df7d15d9bd534fd9b0d980fa62cb.js"></script>
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>
    </button>
  </div>
</div>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large" style="width:360px;">
  </div>
</div>

<div id="hovercard-aria-description" class="sr-only">
  Press h to open a hovercard with more details.
</div>


  </body>
</html>

